/**
 * // ==UserScript==
 * // @name         ShinyColorsEng
 * // @namespace    https://github.com/snowyivu/ShinyColors
 * // @version      0.11.14
 * // @description  For questions or submitting translations https://github.com/snowyivu/ShinyColors
 * // @icon         https://shinycolors.enza.fun/icon_192x192.png
 * // @author       biuuu
 * // @match        https://shinycolors.enza.fun/*
 * // @run-at       document-start
 * // @grant        GM_xmlhttpRequest
 * // @connect      api.interpreter.caiyunai.com
 * // @connect      translate.google.com
 * // @connect      fanyi.baidu.com
 * // @updateURL    https://github.com/snowyivu/ShinyColors/raw/gh-pages/ShinyColors.user.js
 * // @downloadURL  https://github.com/snowyivu/ShinyColors/raw/gh-pages/ShinyColors.user.js
 * // @supportURL   https://github.com/snowyivu/ShinyColors/issues
 * // ==/UserScript==
 */
! function() {
    "use strict";
    var e = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};

    function t(e, t) {
        return e(t = {
            exports: {}
        }, t.exports), t.exports
    }
    var r = "object" == typeof e && e && e.Object === Object && e,
        n = "object" == typeof self && self && self.Object === Object && self,
        i = r || n || Function("return this")(),
        a = i.Symbol,
        o = Object.prototype,
        s = o.hasOwnProperty,
        c = o.toString,
        l = a ? a.toStringTag : void 0;
    var u = function(e) {
            var t = s.call(e, l),
                r = e[l];
            try {
                e[l] = void 0;
                var n = !0
            } catch (e) {}
            var i = c.call(e);
            return n && (t ? e[l] = r : delete e[l]), i
        },
        d = Object.prototype.toString;
    var h = function(e) {
            return d.call(e)
        },
        p = a ? a.toStringTag : void 0;
    var f = function(e) {
            return null == e ? void 0 === e ? "[object Undefined]" : "[object Null]" : p && p in Object(e) ? u(e) : h(e)
        },
        m = Array.isArray;
    var g = function(e) {
        return null != e && "object" == typeof e
    };
    var y = function(e) {
        return "string" == typeof e || !m(e) && g(e) && "[object String]" == f(e)
    };
    const v = e => "​" + e,
        w = e => {
            if (!e) return "";
            return e.replace(/[\u0020]+$/g, "").replace(/^[\u0020]+/g, "")
        },
        _ = (e, t = !1) => {
            let r = w(e).replace(/(\\r)?\\n/g, "\n").replace(/\\r/g, "\n");
            return t ? r : r.replace(/\n{2,}/g, "\n")
        },
        S = e => w(e).replace(/\r/g, "\n").replace(/\n{2,}/g, "\n"),
        E = e => e.replace(/\?/g, "\\?").replace(/\./g, "\\.").replace(/\*/g, "\\*").replace(/\+/g, "\\+").replace(/\(/g, "\\(").replace(/\)/g, "\\)");
    let b = (() => {
        const e = document.createElement("iframe");
        return e.style.display = "none", document.body.appendChild(e), e.contentWindow.console
    })();
    const x = (...e) => {
            0
        },
        T = (...e) => {
            b.log(...e)
        },
        C = (e, t) => {
            const r = document.createElement("a");
            r.download = t, r.style.display = "none";
            const n = new Blob([e], {
                type: "text/csv"
            });
            r.href = URL.createObjectURL(n), document.body.appendChild(r), r.click(), document.body.removeChild(r)
        },
        k = e => y(e) ? e.replace(/\r?\n/g, "\\n").replace(/\r/g, "\\n") : e,
        A = (e, t) => {
            if (!e || !e.length) return e;
            let r = e,
                n = !1,
                i = ((e = 2) => {
                    let t = "";
                    for (let r = 0; r < e; r++) t += String.fromCharCode(Math.floor(16 * Math.random() + 65520));
                    return t
                })(3);
            Array.isArray(e) && (r = e.join(i), n = !0);
            for (let [e, n] of t) {
                if (!e || e.length < 2) continue;
                const t = e.replace(/\./g, "\\.").replace(/\*/g, "\\*");
                r = r.replace(new RegExp(t, "g"), n)
            }
            return n ? r.split(i) : r
        },
        M = ["プロデューサー", "審査員"],
        R = (e, t) => {
            if (e.speaker) {
                const r = w(e.speaker);
                M.includes(r) && t.has(r) && (e.speaker = v(t.get(r)))
            }
        },
        I = (e, t) => {
            try {
                if (t) return sessionStorage.setItem(e, JSON.stringify(t)), !0; {
                    let t = sessionStorage.getItem(e);
                    return JSON.parse(t)
                }
            } catch (e) {}
        };
    var P = function(e) {
        return !0 === e || !1 === e || g(e) && "[object Boolean]" == f(e)
    };
    var O = function(e, t) {
            return function(r) {
                return e(t(r))
            }
        },
        D = O(Object.getPrototypeOf, Object),
        F = Function.prototype,
        B = Object.prototype,
        j = F.toString,
        L = B.hasOwnProperty,
        N = j.call(Object);
    var H = function(e) {
        if (!g(e) || "[object Object]" != f(e)) return !1;
        var t = D(e);
        if (null === t) return !0;
        var r = L.call(t, "constructor") && t.constructor;
        return "function" == typeof r && r instanceof r && j.call(r) == N
    };
    const U = {
            origin: "https://snowyivu.github.io/ShinyColors",
            hash: "",
            localHash: "",
            version: "0.11.14",
            story: "normal",
            timeout: 30,
            font1: "yuanti",
            font2: "heiti",
            auto: "off",
            bgm: "off",
            myPage: "normal",
            commuTitle: "normal"
        },
        z = Object.assign({}, U),
        G = ["yuanti", "heiti", "yuanti2"],
        $ = {
            HEITI_JA: "UDKakugo_SmallPr6-B",
            HEITI_TRANS: "sczh-heiti,UDKakugo_SmallPr6-B",
            YUAN_JA: "HummingStd-E",
            YUAN_TRANS: "sczh-yuanti,HummingStd-E"
        },
        W = ["origin", "font1", "font2", "timeout", "story", "auto", "bgm", "myPage", "commuTitle"],
        K = W,
        X = () => {
            $.HEITI_TRANS = `${G.includes(U.font2)?"sczh-":""}${U.font2},${$.HEITI_JA}`, $.YUAN_TRANS = `${G.includes(U.font1)?"sczh-":""}${U.font1},${$.YUAN_JA}`
        },
        V = () => {
            let e = {};
            K.forEach(t => {
                U[t] !== z[t] && (e[t] = U[t])
            }), X(), localStorage.setItem("sczh:setting", JSON.stringify(e))
        },
        J = () => {
            let e = location.hash;
            e = e.slice(1).replace(/\?tdsourcetag=s_pc(tim|qq)_aiomsg/, ""), e.split(";").forEach(e => {
                let t = e.split("="),
                    r = decodeURIComponent(t[0].trim()),
                    n = t[1] ? decodeURIComponent(t[1].trim()) : "";
                r && K.includes(r) && (U[r] = n || z[r], V())
            })
        };
    (() => {
        const e = localStorage.getItem("sczh:setting");
        let t = JSON.parse(e);
        H(t) || (t = {}), (e => {
            "https://snowyivu.github.io/ShinyColors" === e.origin && (e.origin = z.origin)
        })(t);
        const {
            origin: r
        } = t;
        (e => !!/^https?:\/\//.test(e) && !/\s/.test(e.trim()))(r) && (U.origin = r.trim()), K.forEach(e => {
            let r = t[e];
            y(r) && (r = r.trim()), (P(r) || r) && (U[e] = r)
        }), X()
    })(), (() => {
        try {
            const e = sessionStorage.getItem("sczh:data"),
                t = JSON.parse(e);
            U.localHash = t.hash
        } catch (e) {}
    })(), J(), window.addEventListener("hashchange", J);
    const {
        origin: q
    } = U, Q = async () => {
        const e = Math.floor(Date.now() / 1e3 / 60 / 60 / 6),
            t = await fetch(`${q}/manifest.json?t=${e}`);
        if (t.ok) {
            const e = await t.json();
            return e.time = Date.now(), localStorage.setItem("sczh:manifest", JSON.stringify(e)), e
        }
        throw new Error(`${t.status} ${t.url}`)
    };
    let Y = {
        data: null
    };
    const Z = new Promise((e, t) => {
            (async () => {
                let e;
                try {
                    let t = localStorage.getItem("sczh:manifest");
                    t && (e = JSON.parse(t)), Date.now() - e.time > 60 * U.cacheTime * 1e3 && (e = !1)
                } catch (e) {}
                return e ? setTimeout(Q, 5e3) : e = await Q(), e
            })().then(t => {
                Y.data = t, U.newVersion = t.version, U.hashes = t.hashes, e(t)
            }).catch(t)
        }),
        ee = async e => {
            const {
                hash: t
            } = await Z;
            return await (async e => new Promise((t, r) => {
                let n = setTimeout(() => {
                    r(`加载${e}超时`)
                }, 1e3 * U.timeout);
                fetch(`${q}${e}`).then(e => {
                    if (clearTimeout(n), !e.ok) return r(`${e.status} ${e.url}`), "";
                    const t = e.headers.get("content-type");
                    return t && t.includes("json") ? e.json() : e.text()
                }).then(t).catch(r)
            }))(`${e}?v=${t}`)
        };
    var te = t((function(e, t) {
        /* @license
        	Papa Parse
        	v4.6.3
        	https://github.com/mholt/PapaParse
        	License: MIT
        	*/
        Array.isArray || (Array.isArray = function(e) {
            return "[object Array]" === Object.prototype.toString.call(e)
        }), e.exports = function() {
            var e, t, r = "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {},
                n = !r.document && !!r.postMessage,
                i = n && /(\?|&)papaworker(=|&|$)/.test(r.location.search),
                a = !1,
                o = {},
                s = 0,
                c = {
                    parse: function(t, n) {
                        var i = (n = n || {}).dynamicTyping || !1;
                        if (b(i) && (n.dynamicTypingFunction = i, i = {}), n.dynamicTyping = i, n.transform = !!b(n.transform) && n.transform, n.worker && c.WORKERS_SUPPORTED) {
                            var l = function() {
                                if (!c.WORKERS_SUPPORTED) return !1;
                                if (!a && null === c.SCRIPT_PATH) throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");
                                var t = c.SCRIPT_PATH || e;
                                t += (-1 !== t.indexOf("?") ? "&" : "?") + "papaworker";
                                var n = new r.Worker(t);
                                return n.onmessage = v, n.id = s++, o[n.id] = n
                            }();
                            return l.userStep = n.step, l.userChunk = n.chunk, l.userComplete = n.complete, l.userError = n.error, n.step = b(n.step), n.chunk = b(n.chunk), n.complete = b(n.complete), n.error = b(n.error), delete n.worker, void l.postMessage({
                                input: t,
                                config: n,
                                workerId: l.id
                            })
                        }
                        var u = null;
                        return "string" == typeof t ? u = n.download ? new d(n) : new p(n) : !0 === t.readable && b(t.read) && b(t.on) ? u = new f(n) : (r.File && t instanceof File || t instanceof Object) && (u = new h(n)), u.stream(t)
                    },
                    unparse: function(e, t) {
                        var r = !1,
                            n = !0,
                            i = ",",
                            a = "\r\n",
                            o = '"',
                            s = !1;
                        "object" == typeof t && ("string" != typeof t.delimiter || c.BAD_DELIMITERS.filter((function(e) {
                            return -1 !== t.delimiter.indexOf(e)
                        })).length || (i = t.delimiter), ("boolean" == typeof t.quotes || Array.isArray(t.quotes)) && (r = t.quotes), "boolean" != typeof t.skipEmptyLines && "string" != typeof t.skipEmptyLines || (s = t.skipEmptyLines), "string" == typeof t.newline && (a = t.newline), "string" == typeof t.quoteChar && (o = t.quoteChar), "boolean" == typeof t.header && (n = t.header));
                        var l = new RegExp(g(o), "g");
                        if ("string" == typeof e && (e = JSON.parse(e)), Array.isArray(e)) {
                            if (!e.length || Array.isArray(e[0])) return d(null, e, s);
                            if ("object" == typeof e[0]) return d(u(e[0]), e, s)
                        } else if ("object" == typeof e) return "string" == typeof e.data && (e.data = JSON.parse(e.data)), Array.isArray(e.data) && (e.fields || (e.fields = e.meta && e.meta.fields), e.fields || (e.fields = Array.isArray(e.data[0]) ? e.fields : u(e.data[0])), Array.isArray(e.data[0]) || "object" == typeof e.data[0] || (e.data = [e.data])), d(e.fields || [], e.data || [], s);
                        throw "exception: Unable to serialize unrecognized input";

                        function u(e) {
                            if ("object" != typeof e) return [];
                            var t = [];
                            for (var r in e) t.push(r);
                            return t
                        }

                        function d(e, t, r) {
                            var o = "";
                            "string" == typeof e && (e = JSON.parse(e)), "string" == typeof t && (t = JSON.parse(t));
                            var s = Array.isArray(e) && 0 < e.length,
                                c = !Array.isArray(t[0]);
                            if (s && n) {
                                for (var l = 0; l < e.length; l++) 0 < l && (o += i), o += h(e[l], l);
                                0 < t.length && (o += a)
                            }
                            for (var u = 0; u < t.length; u++) {
                                var d = s ? e.length : t[u].length,
                                    p = !1,
                                    f = s ? 0 === Object.keys(t[u]).length : 0 === t[u].length;
                                if (r && !s && (p = "greedy" === r ? "" === t[u].join("").trim() : 1 === t[u].length && 0 === t[u][0].length), "greedy" === r && s) {
                                    for (var m = [], g = 0; g < d; g++) {
                                        var y = c ? e[g] : g;
                                        m.push(t[u][y])
                                    }
                                    p = "" === m.join("").trim()
                                }
                                if (!p) {
                                    for (var v = 0; v < d; v++) {
                                        0 < v && !f && (o += i);
                                        var w = s && c ? e[v] : v;
                                        o += h(t[u][w], v)
                                    }
                                    u < t.length - 1 && (!r || 0 < d && !f) && (o += a)
                                }
                            }
                            return o
                        }

                        function h(e, t) {
                            return null == e ? "" : e.constructor === Date ? JSON.stringify(e).slice(1, 25) : (e = e.toString().replace(l, o + o), "boolean" == typeof r && r || Array.isArray(r) && r[t] || function(e, t) {
                                for (var r = 0; r < t.length; r++)
                                    if (-1 < e.indexOf(t[r])) return !0;
                                return !1
                            }(e, c.BAD_DELIMITERS) || -1 < e.indexOf(i) || " " === e.charAt(0) || " " === e.charAt(e.length - 1) ? o + e + o : e)
                        }
                    }
                };
            if (c.RECORD_SEP = String.fromCharCode(30), c.UNIT_SEP = String.fromCharCode(31), c.BYTE_ORDER_MARK = "\ufeff", c.BAD_DELIMITERS = ["\r", "\n", '"', c.BYTE_ORDER_MARK], c.WORKERS_SUPPORTED = !n && !!r.Worker, c.SCRIPT_PATH = null, c.NODE_STREAM_INPUT = 1, c.LocalChunkSize = 10485760, c.RemoteChunkSize = 5242880, c.DefaultDelimiter = ",", c.Parser = y, c.ParserHandle = m, c.NetworkStreamer = d, c.FileStreamer = h, c.StringStreamer = p, c.ReadableStreamStreamer = f, r.jQuery) {
                var l = r.jQuery;
                l.fn.parse = function(e) {
                    var t = e.config || {},
                        n = [];
                    return this.each((function(e) {
                        if ("INPUT" !== l(this).prop("tagName").toUpperCase() || "file" !== l(this).attr("type").toLowerCase() || !r.FileReader || !this.files || 0 === this.files.length) return !0;
                        for (var i = 0; i < this.files.length; i++) n.push({
                            file: this.files[i],
                            inputElem: this,
                            instanceConfig: l.extend({}, t)
                        })
                    })), i(), this;

                    function i() {
                        if (0 !== n.length) {
                            var t, r, i, o = n[0];
                            if (b(e.before)) {
                                var s = e.before(o.file, o.inputElem);
                                if ("object" == typeof s) {
                                    if ("abort" === s.action) return t = o.file, r = o.inputElem, i = s.reason, void(b(e.error) && e.error({
                                        name: "AbortError"
                                    }, t, r, i));
                                    if ("skip" === s.action) return void a();
                                    "object" == typeof s.config && (o.instanceConfig = l.extend(o.instanceConfig, s.config))
                                } else if ("skip" === s) return void a()
                            }
                            var u = o.instanceConfig.complete;
                            o.instanceConfig.complete = function(e) {
                                b(u) && u(e, o.file, o.inputElem), a()
                            }, c.parse(o.file, o.instanceConfig)
                        } else b(e.complete) && e.complete()
                    }

                    function a() {
                        n.splice(0, 1), i()
                    }
                }
            }

            function u(e) {
                this._handle = null, this._finished = !1, this._completed = !1, this._input = null, this._baseIndex = 0, this._partialLine = "", this._rowCount = 0, this._start = 0, this._nextChunk = null, this.isFirstChunk = !0, this._completeResults = {
                        data: [],
                        errors: [],
                        meta: {}
                    },
                    function(e) {
                        var t = S(e);
                        t.chunkSize = parseInt(t.chunkSize), e.step || e.chunk || (t.chunkSize = null), this._handle = new m(t), (this._handle.streamer = this)._config = t
                    }.call(this, e), this.parseChunk = function(e, t) {
                        if (this.isFirstChunk && b(this._config.beforeFirstChunk)) {
                            var n = this._config.beforeFirstChunk(e);
                            void 0 !== n && (e = n)
                        }
                        this.isFirstChunk = !1;
                        var a = this._partialLine + e;
                        this._partialLine = "";
                        var o = this._handle.parse(a, this._baseIndex, !this._finished);
                        if (!this._handle.paused() && !this._handle.aborted()) {
                            var s = o.meta.cursor;
                            this._finished || (this._partialLine = a.substring(s - this._baseIndex), this._baseIndex = s), o && o.data && (this._rowCount += o.data.length);
                            var l = this._finished || this._config.preview && this._rowCount >= this._config.preview;
                            if (i) r.postMessage({
                                results: o,
                                workerId: c.WORKER_ID,
                                finished: l
                            });
                            else if (b(this._config.chunk) && !t) {
                                if (this._config.chunk(o, this._handle), this._handle.paused() || this._handle.aborted()) return;
                                o = void 0, this._completeResults = void 0
                            }
                            return this._config.step || this._config.chunk || (this._completeResults.data = this._completeResults.data.concat(o.data), this._completeResults.errors = this._completeResults.errors.concat(o.errors), this._completeResults.meta = o.meta), this._completed || !l || !b(this._config.complete) || o && o.meta.aborted || (this._config.complete(this._completeResults, this._input), this._completed = !0), l || o && o.meta.paused || this._nextChunk(), o
                        }
                    }, this._sendError = function(e) {
                        b(this._config.error) ? this._config.error(e) : i && this._config.error && r.postMessage({
                            workerId: c.WORKER_ID,
                            error: e,
                            finished: !1
                        })
                    }
            }

            function d(e) {
                var t;
                (e = e || {}).chunkSize || (e.chunkSize = c.RemoteChunkSize), u.call(this, e), this._nextChunk = n ? function() {
                    this._readChunk(), this._chunkLoaded()
                } : function() {
                    this._readChunk()
                }, this.stream = function(e) {
                    this._input = e, this._nextChunk()
                }, this._readChunk = function() {
                    if (this._finished) this._chunkLoaded();
                    else {
                        if (t = new XMLHttpRequest, this._config.withCredentials && (t.withCredentials = this._config.withCredentials), n || (t.onload = E(this._chunkLoaded, this), t.onerror = E(this._chunkError, this)), t.open("GET", this._input, !n), this._config.downloadRequestHeaders) {
                            var e = this._config.downloadRequestHeaders;
                            for (var r in e) t.setRequestHeader(r, e[r])
                        }
                        if (this._config.chunkSize) {
                            var i = this._start + this._config.chunkSize - 1;
                            t.setRequestHeader("Range", "bytes=" + this._start + "-" + i), t.setRequestHeader("If-None-Match", "webkit-no-cache")
                        }
                        try {
                            t.send()
                        } catch (e) {
                            this._chunkError(e.message)
                        }
                        n && 0 === t.status ? this._chunkError() : this._start += this._config.chunkSize
                    }
                }, this._chunkLoaded = function() {
                    4 === t.readyState && (t.status < 200 || 400 <= t.status ? this._chunkError() : (this._finished = !this._config.chunkSize || this._start > function(e) {
                        var t = e.getResponseHeader("Content-Range");
                        return null === t ? -1 : parseInt(t.substr(t.lastIndexOf("/") + 1))
                    }(t), this.parseChunk(t.responseText)))
                }, this._chunkError = function(e) {
                    var r = t.statusText || e;
                    this._sendError(new Error(r))
                }
            }

            function h(e) {
                var t, r;
                (e = e || {}).chunkSize || (e.chunkSize = c.LocalChunkSize), u.call(this, e);
                var n = "undefined" != typeof FileReader;
                this.stream = function(e) {
                    this._input = e, r = e.slice || e.webkitSlice || e.mozSlice, n ? ((t = new FileReader).onload = E(this._chunkLoaded, this), t.onerror = E(this._chunkError, this)) : t = new FileReaderSync, this._nextChunk()
                }, this._nextChunk = function() {
                    this._finished || this._config.preview && !(this._rowCount < this._config.preview) || this._readChunk()
                }, this._readChunk = function() {
                    var e = this._input;
                    if (this._config.chunkSize) {
                        var i = Math.min(this._start + this._config.chunkSize, this._input.size);
                        e = r.call(e, this._start, i)
                    }
                    var a = t.readAsText(e, this._config.encoding);
                    n || this._chunkLoaded({
                        target: {
                            result: a
                        }
                    })
                }, this._chunkLoaded = function(e) {
                    this._start += this._config.chunkSize, this._finished = !this._config.chunkSize || this._start >= this._input.size, this.parseChunk(e.target.result)
                }, this._chunkError = function() {
                    this._sendError(t.error)
                }
            }

            function p(e) {
                var t;
                u.call(this, e = e || {}), this.stream = function(e) {
                    return t = e, this._nextChunk()
                }, this._nextChunk = function() {
                    if (!this._finished) {
                        var e = this._config.chunkSize,
                            r = e ? t.substr(0, e) : t;
                        return t = e ? t.substr(e) : "", this._finished = !t, this.parseChunk(r)
                    }
                }
            }

            function f(e) {
                u.call(this, e = e || {});
                var t = [],
                    r = !0,
                    n = !1;
                this.pause = function() {
                    u.prototype.pause.apply(this, arguments), this._input.pause()
                }, this.resume = function() {
                    u.prototype.resume.apply(this, arguments), this._input.resume()
                }, this.stream = function(e) {
                    this._input = e, this._input.on("data", this._streamData), this._input.on("end", this._streamEnd), this._input.on("error", this._streamError)
                }, this._checkIsFinished = function() {
                    n && 1 === t.length && (this._finished = !0)
                }, this._nextChunk = function() {
                    this._checkIsFinished(), t.length ? this.parseChunk(t.shift()) : r = !0
                }, this._streamData = E((function(e) {
                    try {
                        t.push("string" == typeof e ? e : e.toString(this._config.encoding)), r && (r = !1, this._checkIsFinished(), this.parseChunk(t.shift()))
                    } catch (e) {
                        this._streamError(e)
                    }
                }), this), this._streamError = E((function(e) {
                    this._streamCleanUp(), this._sendError(e)
                }), this), this._streamEnd = E((function() {
                    this._streamCleanUp(), n = !0, this._streamData("")
                }), this), this._streamCleanUp = E((function() {
                    this._input.removeListener("data", this._streamData), this._input.removeListener("end", this._streamEnd), this._input.removeListener("error", this._streamError)
                }), this)
            }

            function m(e) {
                var t, r, n, i = /^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,
                    a = /(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,
                    o = this,
                    s = 0,
                    l = 0,
                    u = !1,
                    d = !1,
                    h = [],
                    p = {
                        data: [],
                        errors: [],
                        meta: {}
                    };
                if (b(e.step)) {
                    var f = e.step;
                    e.step = function(t) {
                        if (p = t, w()) v();
                        else {
                            if (v(), 0 === p.data.length) return;
                            s += t.data.length, e.preview && s > e.preview ? r.abort() : f(p, o)
                        }
                    }
                }

                function m(t) {
                    return "greedy" === e.skipEmptyLines ? "" === t.join("").trim() : 1 === t.length && 0 === t[0].length
                }

                function v() {
                    if (p && n && (E("Delimiter", "UndetectableDelimiter", "Unable to auto-detect delimiting character; defaulted to '" + c.DefaultDelimiter + "'"), n = !1), e.skipEmptyLines)
                        for (var t = 0; t < p.data.length; t++) m(p.data[t]) && p.data.splice(t--, 1);
                    return w() && function() {
                            if (p) {
                                for (var t = 0; w() && t < p.data.length; t++)
                                    for (var r = 0; r < p.data[t].length; r++) {
                                        var n = p.data[t][r];
                                        e.trimHeaders && (n = n.trim()), h.push(n)
                                    }
                                p.data.splice(0, 1)
                            }
                        }(),
                        function() {
                            if (!p || !e.header && !e.dynamicTyping && !e.transform) return p;
                            for (var t = 0; t < p.data.length; t++) {
                                var r, n = e.header ? {} : [];
                                for (r = 0; r < p.data[t].length; r++) {
                                    var i = r,
                                        a = p.data[t][r];
                                    e.header && (i = r >= h.length ? "__parsed_extra" : h[r]), e.transform && (a = e.transform(a, i)), a = _(i, a), "__parsed_extra" === i ? (n[i] = n[i] || [], n[i].push(a)) : n[i] = a
                                }
                                p.data[t] = n, e.header && (r > h.length ? E("FieldMismatch", "TooManyFields", "Too many fields: expected " + h.length + " fields but parsed " + r, l + t) : r < h.length && E("FieldMismatch", "TooFewFields", "Too few fields: expected " + h.length + " fields but parsed " + r, l + t))
                            }
                            return e.header && p.meta && (p.meta.fields = h), l += p.data.length, p
                        }()
                }

                function w() {
                    return e.header && 0 === h.length
                }

                function _(t, r) {
                    return n = t, e.dynamicTypingFunction && void 0 === e.dynamicTyping[n] && (e.dynamicTyping[n] = e.dynamicTypingFunction(n)), !0 === (e.dynamicTyping[n] || e.dynamicTyping) ? "true" === r || "TRUE" === r || "false" !== r && "FALSE" !== r && (i.test(r) ? parseFloat(r) : a.test(r) ? new Date(r) : "" === r ? null : r) : r;
                    var n
                }

                function E(e, t, r, n) {
                    p.errors.push({
                        type: e,
                        code: t,
                        message: r,
                        row: n
                    })
                }
                this.parse = function(i, a, o) {
                    var s = e.quoteChar || '"';
                    if (e.newline || (e.newline = function(e, t) {
                            e = e.substr(0, 1048576);
                            var r = new RegExp(g(t) + "([^]*?)" + g(t), "gm"),
                                n = (e = e.replace(r, "")).split("\r"),
                                i = e.split("\n"),
                                a = 1 < i.length && i[0].length < n[0].length;
                            if (1 === n.length || a) return "\n";
                            for (var o = 0, s = 0; s < n.length; s++) "\n" === n[s][0] && o++;
                            return o >= n.length / 2 ? "\r\n" : "\r"
                        }(i, s)), n = !1, e.delimiter) b(e.delimiter) && (e.delimiter = e.delimiter(i), p.meta.delimiter = e.delimiter);
                    else {
                        var l = function(t, r, n, i) {
                            for (var a, o, s, l = [",", "\t", "|", ";", c.RECORD_SEP, c.UNIT_SEP], u = 0; u < l.length; u++) {
                                var d = l[u],
                                    h = 0,
                                    p = 0,
                                    f = 0;
                                s = void 0;
                                for (var g = new y({
                                        comments: i,
                                        delimiter: d,
                                        newline: r,
                                        preview: 10
                                    }).parse(t), v = 0; v < g.data.length; v++)
                                    if (n && m(g.data[v])) f++;
                                    else {
                                        var w = g.data[v].length;
                                        p += w, void 0 !== s ? 1 < w && (h += Math.abs(w - s), s = w) : s = 0
                                    } 0 < g.data.length && (p /= g.data.length - f), (void 0 === o || o < h) && 1.99 < p && (o = h, a = d)
                            }
                            return {
                                successful: !!(e.delimiter = a),
                                bestDelimiter: a
                            }
                        }(i, e.newline, e.skipEmptyLines, e.comments);
                        l.successful ? e.delimiter = l.bestDelimiter : (n = !0, e.delimiter = c.DefaultDelimiter), p.meta.delimiter = e.delimiter
                    }
                    var d = S(e);
                    return e.preview && e.header && d.preview++, t = i, r = new y(d), p = r.parse(t, a, o), v(), u ? {
                        meta: {
                            paused: !0
                        }
                    } : p || {
                        meta: {
                            paused: !1
                        }
                    }
                }, this.paused = function() {
                    return u
                }, this.pause = function() {
                    u = !0, r.abort(), t = t.substr(r.getCharIndex())
                }, this.resume = function() {
                    u = !1, o.streamer.parseChunk(t, !0)
                }, this.aborted = function() {
                    return d
                }, this.abort = function() {
                    d = !0, r.abort(), p.meta.aborted = !0, b(e.complete) && e.complete(p), t = ""
                }
            }

            function g(e) {
                return e.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")
            }

            function y(e) {
                var t, r = (e = e || {}).delimiter,
                    n = e.newline,
                    i = e.comments,
                    a = e.step,
                    o = e.preview,
                    s = e.fastMode,
                    l = t = void 0 === e.quoteChar ? '"' : e.quoteChar;
                if (void 0 !== e.escapeChar && (l = e.escapeChar), ("string" != typeof r || -1 < c.BAD_DELIMITERS.indexOf(r)) && (r = ","), i === r) throw "Comment character same as delimiter";
                !0 === i ? i = "#" : ("string" != typeof i || -1 < c.BAD_DELIMITERS.indexOf(i)) && (i = !1), "\n" !== n && "\r" !== n && "\r\n" !== n && (n = "\n");
                var u = 0,
                    d = !1;
                this.parse = function(e, c, h) {
                    if ("string" != typeof e) throw "Input must be a string";
                    var p = e.length,
                        f = r.length,
                        m = n.length,
                        y = i.length,
                        v = b(a),
                        w = [],
                        _ = [],
                        S = [],
                        E = u = 0;
                    if (!e) return B();
                    if (s || !1 !== s && -1 === e.indexOf(t)) {
                        for (var x = e.split(n), T = 0; T < x.length; T++) {
                            if (S = x[T], u += S.length, T !== x.length - 1) u += n.length;
                            else if (h) return B();
                            if (!i || S.substr(0, y) !== i) {
                                if (v) {
                                    if (w = [], P(S.split(r)), j(), d) return B()
                                } else P(S.split(r));
                                if (o && o <= T) return w = w.slice(0, o), B(!0)
                            }
                        }
                        return B()
                    }
                    for (var C, k = e.indexOf(r, u), A = e.indexOf(n, u), M = new RegExp(g(l) + g(t), "g");;)
                        if (e[u] !== t)
                            if (i && 0 === S.length && e.substr(u, y) === i) {
                                if (-1 === A) return B();
                                u = A + m, A = e.indexOf(n, u), k = e.indexOf(r, u)
                            } else if (-1 !== k && (k < A || -1 === A)) S.push(e.substring(u, k)), u = k + f, k = e.indexOf(r, u);
                    else {
                        if (-1 === A) break;
                        if (S.push(e.substring(u, A)), F(A + m), v && (j(), d)) return B();
                        if (o && w.length >= o) return B(!0)
                    } else
                        for (C = u, u++;;) {
                            if (-1 === (C = e.indexOf(t, C + 1))) return h || _.push({
                                type: "Quotes",
                                code: "MissingQuotes",
                                message: "Quoted field unterminated",
                                row: w.length,
                                index: u
                            }), D();
                            if (C === p - 1) return D(e.substring(u, C).replace(M, t));
                            if (t !== l || e[C + 1] !== l) {
                                if (t === l || 0 === C || e[C - 1] !== l) {
                                    var R = O(-1 === A ? k : Math.min(k, A));
                                    if (e[C + 1 + R] === r) {
                                        S.push(e.substring(u, C).replace(M, t)), u = C + 1 + R + f, k = e.indexOf(r, u), A = e.indexOf(n, u);
                                        break
                                    }
                                    var I = O(A);
                                    if (e.substr(C + 1 + I, m) === n) {
                                        if (S.push(e.substring(u, C).replace(M, t)), F(C + 1 + I + m), k = e.indexOf(r, u), v && (j(), d)) return B();
                                        if (o && w.length >= o) return B(!0);
                                        break
                                    }
                                    _.push({
                                        type: "Quotes",
                                        code: "InvalidQuotes",
                                        message: "Trailing quote on quoted field is malformed",
                                        row: w.length,
                                        index: u
                                    }), C++
                                }
                            } else C++
                        }
                    return D();

                    function P(e) {
                        w.push(e), E = u
                    }

                    function O(t) {
                        var r = 0;
                        if (-1 !== t) {
                            var n = e.substring(C + 1, t);
                            n && "" === n.trim() && (r = n.length)
                        }
                        return r
                    }

                    function D(t) {
                        return h || (void 0 === t && (t = e.substr(u)), S.push(t), u = p, P(S), v && j()), B()
                    }

                    function F(t) {
                        u = t, P(S), S = [], A = e.indexOf(n, u)
                    }

                    function B(e) {
                        return {
                            data: w,
                            errors: _,
                            meta: {
                                delimiter: r,
                                linebreak: n,
                                aborted: d,
                                truncated: !!e,
                                cursor: E + (c || 0)
                            }
                        }
                    }

                    function j() {
                        a(B()), w = [], _ = []
                    }
                }, this.abort = function() {
                    d = !0
                }, this.getCharIndex = function() {
                    return u
                }
            }

            function v(e) {
                var t = e.data,
                    r = o[t.workerId],
                    n = !1;
                if (t.error) r.userError(t.error, t.file);
                else if (t.results && t.results.data) {
                    var i = {
                        abort: function() {
                            n = !0, w(t.workerId, {
                                data: [],
                                errors: [],
                                meta: {
                                    aborted: !0
                                }
                            })
                        },
                        pause: _,
                        resume: _
                    };
                    if (b(r.userStep)) {
                        for (var a = 0; a < t.results.data.length && (r.userStep({
                                data: [t.results.data[a]],
                                errors: t.results.errors,
                                meta: t.results.meta
                            }, i), !n); a++);
                        delete t.results
                    } else b(r.userChunk) && (r.userChunk(t.results, i, t.file), delete t.results)
                }
                t.finished && !n && w(t.workerId, t.results)
            }

            function w(e, t) {
                var r = o[e];
                b(r.userComplete) && r.userComplete(t), r.terminate(), delete o[e]
            }

            function _() {
                throw "Not implemented."
            }

            function S(e) {
                if ("object" != typeof e || null === e) return e;
                var t = Array.isArray(e) ? [] : {};
                for (var r in e) t[r] = S(e[r]);
                return t
            }

            function E(e, t) {
                return function() {
                    e.apply(t, arguments)
                }
            }

            function b(e) {
                return "function" == typeof e
            }
            return i ? r.onmessage = function(e) {
                var t = e.data;
                if (void 0 === c.WORKER_ID && t && (c.WORKER_ID = t.workerId), "string" == typeof t.input) r.postMessage({
                    workerId: c.WORKER_ID,
                    results: c.parse(t.input, t.config),
                    finished: !0
                });
                else if (r.File && t.input instanceof File || t.input instanceof Object) {
                    var n = c.parse(t.input, t.config);
                    n && r.postMessage({
                        workerId: c.WORKER_ID,
                        results: n,
                        finished: !0
                    })
                }
            } : c.WORKERS_SUPPORTED && (t = document.getElementsByTagName("script"), e = t.length ? t[t.length - 1].src : "", document.body ? document.addEventListener("DOMContentLoaded", (function() {
                a = !0
            }), !0) : a = !0), (d.prototype = Object.create(u.prototype)).constructor = d, (h.prototype = Object.create(u.prototype)).constructor = h, (p.prototype = Object.create(p.prototype)).constructor = p, (f.prototype = Object.create(u.prototype)).constructor = f, c
        }()
    }));
    const re = e => {
        try {
            return te.parse(e.replace(/^\ufeff/, ""), {
                header: !0
            }).data
        } catch (e) {
            return console.log(e), {}
        }
    };
    let ne = null;
    const ie = async e => {
        if (ne) return ne[e];
        const {
            hash: t
        } = await Z;
        try {
            const r = localStorage.getItem("sczh:data");
            return !!r && (ne = JSON.parse(r), ne.hash !== t ? (ne = null, localStorage.removeItem("sczh:data"), localStorage.removeItem("sczh:data"), !1) : ne[e])
        } catch (e) {
            console.log(e)
        }
        return !1
    }, ae = (e, t) => {
        ne || (ne = {
            hash: U.hash
        }), ne[e] = t;
        const r = JSON.stringify(ne);
        try {
            localStorage.setItem("sczh:data", r)
        } catch (e) {
            console.log(e)
        }
    }, oe = new Map;
    let se = !1;
    const ce = async (e = !1) => {
        if (!se) {
            let t = await ie("phrase");
            t || (t = await ee("/data/phrase.csv"), ae("phrase", t));
            re(t).forEach(t => {
                if (t && t.name) {
                    const r = _(t.name),
                        n = _(t.en, !0);
                    r && (n || e) && oe.set(r, v(n))
                }
            }), se = !0
        }
        return oe
    };
    const le = async (e, t) => {
        let r;
        try {
            const {
                moduleId: n
            } = await Z;
            r = ((e, t) => {
                let r, n = ((e, t) => {
                    let r = e + t,
                        n = [];
                    for (let i = e - t; i <= r; i++) i >= 0 && i !== e && n.push(i);
                    return n.unshift(e), n
                })(e, 10);
                for (let e = 0; e < n.length; e++) {
                    let i = n[e],
                        a = _require(i);
                    if (t(a)) {
                        r = a;
                        break
                    }
                }
                return r
            })(n[e], t)
        } catch (e) {
            x()
        }
        if (!r) throw new Error(e + " NOT FOUND.");
        return r
    }, ue = async () => await le("AOBA", e => e.loaders && e.Text && e.BLEND_MODES);
    let de = null;
    async function he() {
        const e = await (async () => (await le("PHRASE", e => e.default && e.default._polyglot && e.default._polyglot.phrases)).default._polyglot.phrases)();
        if (e) {
            0,
            de = await ce();
            for (let [t, r] of de) e[t] = r
        }
    }
    const pe = new Map,
        fe = new Map,
        me = new Map;
    let ge = !1;
    const ye = async () => {
        if (!ge) {
            let e = await ie("item");
            e || (e = await ee("/data/item.csv"), ae("item", e));
            re(e).forEach(e => {
                if (e && e.text) {
                    const t = _(e.text),
                        r = _(e.trans, !0),
                        n = w(e.type) || "normal";
                    t && r && t !== r && ("limit" === n ? fe.set(t, r) : "note" === n ? me.set(t, r) : pe.set(t, r))
                }
            }), ge = !0
        }
        return {
            itemMap: pe,
            itemLimitMap: fe,
            itemNoteMap: me
        }
    }, ve = new Map;
    let we = !1;
    const _e = async () => {
        if (!we) {
            let e = await ie("name");
            e || (e = await ee("/data/name.csv"), ae("name", e));
            re(e).forEach(e => {
                const t = w(e.name),
                    r = w(e.trans);
                t && r && t !== r && ve.set(t, r)
            }), we = !0
        }
        return ve
    };
    let Se = new Map,
        Ee = !1;
    var be = t((function(e) {
            ! function() {
                var t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                    r = {
                        rotl: function(e, t) {
                            return e << t | e >>> 32 - t
                        },
                        rotr: function(e, t) {
                            return e << 32 - t | e >>> t
                        },
                        endian: function(e) {
                            if (e.constructor == Number) return 16711935 & r.rotl(e, 8) | 4278255360 & r.rotl(e, 24);
                            for (var t = 0; t < e.length; t++) e[t] = r.endian(e[t]);
                            return e
                        },
                        randomBytes: function(e) {
                            for (var t = []; e > 0; e--) t.push(Math.floor(256 * Math.random()));
                            return t
                        },
                        bytesToWords: function(e) {
                            for (var t = [], r = 0, n = 0; r < e.length; r++, n += 8) t[n >>> 5] |= e[r] << 24 - n % 32;
                            return t
                        },
                        wordsToBytes: function(e) {
                            for (var t = [], r = 0; r < 32 * e.length; r += 8) t.push(e[r >>> 5] >>> 24 - r % 32 & 255);
                            return t
                        },
                        bytesToHex: function(e) {
                            for (var t = [], r = 0; r < e.length; r++) t.push((e[r] >>> 4).toString(16)), t.push((15 & e[r]).toString(16));
                            return t.join("")
                        },
                        hexToBytes: function(e) {
                            for (var t = [], r = 0; r < e.length; r += 2) t.push(parseInt(e.substr(r, 2), 16));
                            return t
                        },
                        bytesToBase64: function(e) {
                            for (var r = [], n = 0; n < e.length; n += 3)
                                for (var i = e[n] << 16 | e[n + 1] << 8 | e[n + 2], a = 0; a < 4; a++) 8 * n + 6 * a <= 8 * e.length ? r.push(t.charAt(i >>> 6 * (3 - a) & 63)) : r.push("=");
                            return r.join("")
                        },
                        base64ToBytes: function(e) {
                            e = e.replace(/[^A-Z0-9+\/]/gi, "");
                            for (var r = [], n = 0, i = 0; n < e.length; i = ++n % 4) 0 != i && r.push((t.indexOf(e.charAt(n - 1)) & Math.pow(2, -2 * i + 8) - 1) << 2 * i | t.indexOf(e.charAt(n)) >>> 6 - 2 * i);
                            return r
                        }
                    };
                e.exports = r
            }()
        })),
        xe = {
            utf8: {
                stringToBytes: function(e) {
                    return xe.bin.stringToBytes(unescape(encodeURIComponent(e)))
                },
                bytesToString: function(e) {
                    return decodeURIComponent(escape(xe.bin.bytesToString(e)))
                }
            },
            bin: {
                stringToBytes: function(e) {
                    for (var t = [], r = 0; r < e.length; r++) t.push(255 & e.charCodeAt(r));
                    return t
                },
                bytesToString: function(e) {
                    for (var t = [], r = 0; r < e.length; r++) t.push(String.fromCharCode(e[r]));
                    return t.join("")
                }
            }
        },
        Te = xe,
        Ce = function(e) {
            return null != e && (ke(e) || function(e) {
                return "function" == typeof e.readFloatLE && "function" == typeof e.slice && ke(e.slice(0, 0))
            }(e) || !!e._isBuffer)
        };

    function ke(e) {
        return !!e.constructor && "function" == typeof e.constructor.isBuffer && e.constructor.isBuffer(e)
    }
    var Ae = t((function(e) {
        ! function() {
            var t = be,
                r = Te.utf8,
                n = Ce,
                i = Te.bin,
                a = function(e, o) {
                    e.constructor == String ? e = o && "binary" === o.encoding ? i.stringToBytes(e) : r.stringToBytes(e) : n(e) ? e = Array.prototype.slice.call(e, 0) : Array.isArray(e) || (e = e.toString());
                    for (var s = t.bytesToWords(e), c = 8 * e.length, l = 1732584193, u = -271733879, d = -1732584194, h = 271733878, p = 0; p < s.length; p++) s[p] = 16711935 & (s[p] << 8 | s[p] >>> 24) | 4278255360 & (s[p] << 24 | s[p] >>> 8);
                    s[c >>> 5] |= 128 << c % 32, s[14 + (c + 64 >>> 9 << 4)] = c;
                    var f = a._ff,
                        m = a._gg,
                        g = a._hh,
                        y = a._ii;
                    for (p = 0; p < s.length; p += 16) {
                        var v = l,
                            w = u,
                            _ = d,
                            S = h;
                        l = f(l, u, d, h, s[p + 0], 7, -680876936), h = f(h, l, u, d, s[p + 1], 12, -389564586), d = f(d, h, l, u, s[p + 2], 17, 606105819), u = f(u, d, h, l, s[p + 3], 22, -1044525330), l = f(l, u, d, h, s[p + 4], 7, -176418897), h = f(h, l, u, d, s[p + 5], 12, 1200080426), d = f(d, h, l, u, s[p + 6], 17, -1473231341), u = f(u, d, h, l, s[p + 7], 22, -45705983), l = f(l, u, d, h, s[p + 8], 7, 1770035416), h = f(h, l, u, d, s[p + 9], 12, -1958414417), d = f(d, h, l, u, s[p + 10], 17, -42063), u = f(u, d, h, l, s[p + 11], 22, -1990404162), l = f(l, u, d, h, s[p + 12], 7, 1804603682), h = f(h, l, u, d, s[p + 13], 12, -40341101), d = f(d, h, l, u, s[p + 14], 17, -1502002290), l = m(l, u = f(u, d, h, l, s[p + 15], 22, 1236535329), d, h, s[p + 1], 5, -165796510), h = m(h, l, u, d, s[p + 6], 9, -1069501632), d = m(d, h, l, u, s[p + 11], 14, 643717713), u = m(u, d, h, l, s[p + 0], 20, -373897302), l = m(l, u, d, h, s[p + 5], 5, -701558691), h = m(h, l, u, d, s[p + 10], 9, 38016083), d = m(d, h, l, u, s[p + 15], 14, -660478335), u = m(u, d, h, l, s[p + 4], 20, -405537848), l = m(l, u, d, h, s[p + 9], 5, 568446438), h = m(h, l, u, d, s[p + 14], 9, -1019803690), d = m(d, h, l, u, s[p + 3], 14, -187363961), u = m(u, d, h, l, s[p + 8], 20, 1163531501), l = m(l, u, d, h, s[p + 13], 5, -1444681467), h = m(h, l, u, d, s[p + 2], 9, -51403784), d = m(d, h, l, u, s[p + 7], 14, 1735328473), l = g(l, u = m(u, d, h, l, s[p + 12], 20, -1926607734), d, h, s[p + 5], 4, -378558), h = g(h, l, u, d, s[p + 8], 11, -2022574463), d = g(d, h, l, u, s[p + 11], 16, 1839030562), u = g(u, d, h, l, s[p + 14], 23, -35309556), l = g(l, u, d, h, s[p + 1], 4, -1530992060), h = g(h, l, u, d, s[p + 4], 11, 1272893353), d = g(d, h, l, u, s[p + 7], 16, -155497632), u = g(u, d, h, l, s[p + 10], 23, -1094730640), l = g(l, u, d, h, s[p + 13], 4, 681279174), h = g(h, l, u, d, s[p + 0], 11, -358537222), d = g(d, h, l, u, s[p + 3], 16, -722521979), u = g(u, d, h, l, s[p + 6], 23, 76029189), l = g(l, u, d, h, s[p + 9], 4, -640364487), h = g(h, l, u, d, s[p + 12], 11, -421815835), d = g(d, h, l, u, s[p + 15], 16, 530742520), l = y(l, u = g(u, d, h, l, s[p + 2], 23, -995338651), d, h, s[p + 0], 6, -198630844), h = y(h, l, u, d, s[p + 7], 10, 1126891415), d = y(d, h, l, u, s[p + 14], 15, -1416354905), u = y(u, d, h, l, s[p + 5], 21, -57434055), l = y(l, u, d, h, s[p + 12], 6, 1700485571), h = y(h, l, u, d, s[p + 3], 10, -1894986606), d = y(d, h, l, u, s[p + 10], 15, -1051523), u = y(u, d, h, l, s[p + 1], 21, -2054922799), l = y(l, u, d, h, s[p + 8], 6, 1873313359), h = y(h, l, u, d, s[p + 15], 10, -30611744), d = y(d, h, l, u, s[p + 6], 15, -1560198380), u = y(u, d, h, l, s[p + 13], 21, 1309151649), l = y(l, u, d, h, s[p + 4], 6, -145523070), h = y(h, l, u, d, s[p + 11], 10, -1120210379), d = y(d, h, l, u, s[p + 2], 15, 718787259), u = y(u, d, h, l, s[p + 9], 21, -343485551), l = l + v >>> 0, u = u + w >>> 0, d = d + _ >>> 0, h = h + S >>> 0
                    }
                    return t.endian([l, u, d, h])
                };
            a._ff = function(e, t, r, n, i, a, o) {
                var s = e + (t & r | ~t & n) + (i >>> 0) + o;
                return (s << a | s >>> 32 - a) + t
            }, a._gg = function(e, t, r, n, i, a, o) {
                var s = e + (t & n | r & ~n) + (i >>> 0) + o;
                return (s << a | s >>> 32 - a) + t
            }, a._hh = function(e, t, r, n, i, a, o) {
                var s = e + (t ^ r ^ n) + (i >>> 0) + o;
                return (s << a | s >>> 32 - a) + t
            }, a._ii = function(e, t, r, n, i, a, o) {
                var s = e + (r ^ (t | ~n)) + (i >>> 0) + o;
                return (s << a | s >>> 32 - a) + t
            }, a._blocksize = 16, a._digestsize = 16, e.exports = function(e, r) {
                if (null == e) throw new Error("Illegal argument " + e);
                var n = t.wordsToBytes(a(e, r));
                return r && r.asBytes ? n : r && r.asString ? i.bytesToString(n) : t.bytesToHex(n)
            }
        }()
    }));
    const Me = new Map,
        Re = new Map,
        Ie = new Map;
    let Pe = !1,
        Oe = null;
    const De = e => (e.communications && e.communications.length ? e.communications.forEach(e => {
            Re.set(e.communicationId, e.title)
        }) : e.idol && e.idol.produceIdolEvents ? (e.idol.produceIdolEvents.forEach(e => {
            Re.set(e.id, e.title)
        }), e.idol.produceAfterEvents.forEach(e => {
            Re.set(e.id, e.title)
        })) : e.supportIdol && e.supportIdol.produceSupportIdolEvents ? e.supportIdol.produceSupportIdolEvents.forEach(e => {
            Re.set(e.id, e.title)
        }) : e.gameEvents ? e.gameEvents.forEach(e => {
            e.communications.forEach(e => {
                Re.set(e.id, `${e.name} ${e.title}`)
            })
        }) : e.specialEvents && e.specialEvents.forEach(e => {
            e.communications.forEach(e => {
                Re.set(e.id, `${e.name} ${e.title}`)
            })
        }), Re),
        Fe = e => {
            const t = re(e),
                r = new Map;
            return t.forEach(e => {
                const t = w(e.id),
                    n = _(e.text),
                    i = _(e.trans, !0),
                    a = w(e.name);
                if (n && i) {
                    const e = Ae(n);
                    if (t && !/^0+$/.test(t) && "select" !== t) {
                        const n = t + e;
                        r.set(n, v(i))
                    } else "select" === t ? r.set(e + "-select", v(i)) : r.set(e, v(i))
                }
                t && a && "info" === t && r.set("name", a)
            }), r
        },
        Be = async () => {
            if (!Pe) {
                let e = await ie("comm-story");
                e || (e = await ee("/data/comm-story.csv"), ae("comm-story", e));
                re(e).forEach(e => {
                    if (e && e.ja) {
                        const t = _(e.ja),
                            r = _(e.en, !0);
                        t && r && t !== r && Ie.set(t, r)
                    }
                }), Pe = !0
            }
            return Ie
        };
    let je = new Map,
        Le = !1;
    const Ne = async () => {
        if (!Le) {
            let e = await ie("type-text");
            e || (e = await ee("/data/type-text.csv"), ae("type-text", e));
            re(e).forEach(e => {
                if (e && e.ja) {
                    const t = _(e.ja),
                        r = _(e.en, !0);
                    t && r && t !== r && je.set(t, r)
                }
            });
            const t = await Be();
            je = new Map([...t, ...je]), Le = !0
        }
        return je
    };
    let He = new Map,
        Ue = new Map;
    const ze = [],
        Ge = e => {
            e && e.fontFamily && (e.fontFamily === $.HEITI_JA ? Reflect.set(e, "fontFamily", $.HEITI_TRANS) : e.fontFamily === $.YUAN_JA && Reflect.set(e, "fontFamily", $.YUAN_TRANS))
        },
        $e = (e, t, r) => {
            let n = e,
                i = S(e);
            return t.has(i) ? (n = "​" + t.get(i), Ge(r)) : e.startsWith("​") || (e => {
                e && e.fontFamily && (e.fontFamily === $.HEITI_TRANS ? Reflect.set(e, "fontFamily", $.HEITI_JA) : e.fontFamily === $.YUAN_TRANS && Reflect.set(e, "fontFamily", $.YUAN_JA))
            })(r), n
        },
        We = (e, t, r = !1) => {
            if (!y(e)) return e;
            let n = e;
            return e.startsWith("​") ? Ge(t) : e.trim() && (r ? (n = $e(e, Ue, t), (e => {
                ze.push(e), setTimeout(() => ze.shift(), 1e4)
            })(e)) : (e => {
                let t = !1;
                return ze.forEach(r => {
                    r.startsWith(e) && (t = !0)
                }), t
            })(e) || e.startsWith("‌") || (n = $e(e, He, t))), n
        };
    async function Ke() {
        let e = await ue();
        if (!e) return;
        try {
            He = await (async () => {
                if (!Ee) {
                    let e = await ie("common");
                    e || (e = await ee("/data/common.csv"), ae("common", e));
                    re(e).forEach(e => {
                        if (e && e.ja) {
                            const t = _(e.ja),
                                r = _(e.en, !0);
                            t && r && t !== r && Se.set(t, r)
                        }
                    });
                    const {
                        itemMap: t
                    } = await ye(), r = await _e();
                    Se = new Map([...t, ...r, ...Se]), Ee = !0
                }
                return Se
            })(), Ue = await Ne()
        } catch (e) {}
        const t = e.Text.prototype.typeText;
        e.Text.prototype.typeText = function(...e) {
            const r = e[0];
            return e[0] = We(r, this.style, !0), t.apply(this, e)
        };
        const r = e.Text.prototype.updateText;
        e.Text.prototype.updateText = function(e) {
            if (this.localStyleID !== this._style.styleID && (this.dirty = !0, this._style.styleID), this.dirty || !e) {
                0;
                const t = We(this._text, this._style);
                return Reflect.set(this, "_text", t), r.call(this, e)
            }
        }
    }
    const Xe = new Map,
        Ve = (e, t, r) => {
            if (Xe.has(e)) return Xe.get(e);
            let n = e;
            for (let [e, i] of t) n = n.replace(e, (...e) => {
                let t = i;
                for (let n = 1; n < e.length - 2; n++) {
                    let i = e[n],
                        a = !1;
                    r.forEach(e => {
                        e.has(i) && (t = t.replace("$" + n, e.get(i)), a = !0)
                    }), a || (t = t.replace("$" + n, e[n]))
                }
                return t
            }), e.lastIndex = 0;
            return Xe.set(e, n), n
        },
        Je = (e, t = "EMPTY") => e.sort((e, r) => {
            let n = e,
                i = r;
            return "EMPTY" !== t && (n = e[t], i = r[t]), i || (i = ""), n || (n = ""), i.length > n.length ? 1 : n.length > i.length ? -1 : 0
        }),
        qe = (e, t) => {
            let r = e.replace(/\$num/g, "([+-＋－]?\\d{1,10}\\.?\\d{0,4}?)").replace(/\$percent/g, "([+-＋－]?\\d{1,10}\\.?\\d{0,4}?[%％])").replace(/\$unknown/g, "(.+?)").replace(/\$uk/g, "(.+?)");
            return t.forEach(e => {
                r = r.replace(e.re, e.exp), e.re.lastIndex = 0
            }), new RegExp(r, "gi")
        },
        Qe = {
            expMap: new Map,
            nounMap: new Map,
            nounArr: [],
            loaded: !1
        },
        Ye = {
            expMap: new Map,
            textMap: new Map,
            nounMap: new Map,
            nameMap: new Map,
            otherMap: new Map,
            nounArr: [],
            nameArr: [],
            otherArr: [],
            loaded: !1
        };
    let Ze = null;
    const et = async () => (Ze || (Ze = (async () => {
        const {
            expMap: e,
            nounMap: t,
            textMap: r,
            nameMap: n,
            otherMap: i,
            nounArr: a,
            nameArr: o,
            otherArr: s,
            loaded: c
        } = Ye;
        if (!c) {
            let c = await ie("skill");
            c || (c = await ee("/data/skill.csv"), ae("skill", c));
            const l = re(c),
                u = new Map;
            Je(l, "text").forEach(e => {
                if (e && e.text) {
                    const c = _(e.text),
                        l = _(e.trans, !0),
                        d = w(e.type);
                    c && l && ("noun" === d ? (a.push(E(c)), t.set(c, l)) : "text" === d ? r.set(c, l) : "name" === d ? (o.push(E(c)), n.set(c, l)) : "other" === d ? (s.push(E(c)), i.set(c, l)) : u.set(c.replace(/\[/g, "\\[").replace(/\]/g, "\\]"), l))
                }
            });
            const d = [{
                re: /\$noun/g,
                exp: `(${a.join("|")})`
            }, {
                re: /\$name/g,
                exp: `(${o.join("|")})`
            }, {
                re: /\$other/g,
                exp: `(${s.join("|")})`
            }];
            for (let [t, r] of u) {
                const n = qe(t, d);
                e.set(n, r)
            }
            Ye.loaded = !0
        }
        return {
            expMap: e,
            wordMaps: [t, i, n],
            textMap: r
        }
    })()), await Ze), tt = (e, t) => {
        if (!t) {
            let t = [];
            return e.forEach((r, n) => {
                let i = r.match(/([＋+]+)$/);
                i && i[1] ? (t.push(i[1]), e[n] = r.replace(/[＋+]+$/, "")) : t.push("")
            }), t
        }
        e.forEach((r, n) => {
            e[n] = r + t[n]
        })
    }, rt = (e, t, r) => {
        if (e && e[t]) {
            let n = e[t].split("/");
            n.forEach((e, t) => {
                let i = tt(n);
                ((e, t, r) => {
                    if (!e) return;
                    const {
                        expMap: n,
                        wordMaps: i,
                        textMap: a
                    } = r, o = S(e[t]);
                    let s = o;
                    o && (a && a.has(o) ? e[t] = v(a.get(o)) : (s = Ve(o, n, i), o !== s && (e[t] = v(s))))
                })(n, t, r), tt(n, i)
            });
            let i = n.join("/");
            i !== e[t] && (e[t] = v(i))
        }
    }, nt = async e => {
        let t, r = e;
        if (e.gameData) return;
        e.userSupportIdol && (r = e.userSupportIdol);
        const n = r.acquiredSupportSkills;
        r.supportSkills ? t = r.supportSkills : r.supportIdol && r.supportIdol.supportSkills && (t = r.supportIdol.supportSkills);
        const i = await (async () => {
            const {
                expMap: e,
                nounMap: t,
                nounArr: r,
                loaded: n
            } = Qe;
            if (!n) {
                let n = await ie("support-skill");
                n || (n = await ee("/data/support-skill.csv"), ae("support-skill", n));
                const i = re(n),
                    a = new Map;
                Je(i, "text").forEach(e => {
                    if (e && e.text) {
                        const n = _(e.text),
                            i = _(e.trans, !0),
                            o = w(e.type);
                        n && i && ("noun" === o ? (r.push(E(n)), t.set(n, i)) : a.set(n, i))
                    }
                });
                const o = [{
                    re: /\$noun/g,
                    exp: `(${r.join("|")})`
                }];
                for (let [t, r] of a) {
                    const n = qe(t, o);
                    e.set(n, r)
                }
                Qe.loaded = !0
            }
            return {
                expMap: e,
                wordMaps: [t]
            }
        })();
        t && t.forEach(e => {
            rt(e, "description", i), rt(e, "name", i)
        }), n && n.forEach(e => {
            rt(e, "description", i), rt(e, "name", i)
        })
    }, it = (e, t) => {
        e.skillEffects && e.skillEffects.forEach(e => {
            rt(e, "effectName", t), rt(e, "effectDescription", t)
        }), e.rivalMemoryAppealEffects && e.rivalMemoryAppealEffects.forEach(e => {
            rt(e, "effectName", t), rt(e, "effectDescription", t)
        })
    }, at = (e, t, r = !1) => {
        e && (rt(e, "comment", t), rt(e, "name", t), r && it(e, t), e.linkSkill && (rt(e.linkSkill, "comment", t), rt(e.linkSkill, "name", t), r && it(e.linkSkill, t)))
    }, ot = (e, t) => {
        rt(e, "name", t), rt(e, "description", t)
    }, st = (e, t) => {
        e && e.forEach(e => {
            rt(e, "releaseConditions", t), rt(e.passiveSkills, "comment", t), rt(e.passiveSkills, "name", t), at(e.skill, t), at(e.concertActiveSkill, t), e.activeSkills && e.activeSkills.forEach(e => {
                at(e, t)
            })
        })
    }, ct = (e, t) => {
        e.forEach(e => {
            at(e, t)
        })
    }, lt = (e, t, r = !1) => {
        let n = e.userProduceIdol;
        n && (n.activeSkills && n.activeSkills.forEach(e => {
            at(e, t)
        }), n.passiveSkills && n.passiveSkills.forEach(e => {
            at(e, t)
        }), n.limitBreaks && n.limitBreaks.forEach(e => {
            at(e, t)
        }), r && st(n.skillPanels, t))
    }, ut = (e, t) => {
        e.forEach(e => {
            at(e.skill, t, !0)
        })
    }, dt = (e, t) => {
        e && e.forEach(e => {
            e.userFesDeck && e.userFesDeck.userFesDeckMembers.forEach(e => {
                e.userFesIdol.activeSkills.forEach(e => {
                    it(e, t)
                })
            }), e.userRaidDeck && e.userRaidDeck.userRaidDeckMembers.forEach(e => {
                e.userFesIdol.activeSkills.forEach(e => {
                    at(e, t, !0)
                })
            }), e.rival && e.rival.rivalSkills.forEach(e => {
                it(e, t)
            })
        })
    }, ht = async e => {
        const t = await et();
        st(e.idol.skillPanels, t), ct(e.idol.memoryAppeals, t), e.userIdolProduceExSkills.forEach(e => {
            ot(e.produceExSkill, t)
        })
    }, pt = async e => {
        const t = await et();
        st(e.supportIdol.skillPanels, t), e.userSupportIdolProduceExSkills.forEach(e => {
            ot(e.produceExSkill, t)
        });
        try {
            e.supportIdol.supportIdolActiveSkill.activeSkills.forEach(e => {
                rt(e, "comment", t), rt(e, "name", t)
            })
        } catch (e) {}
    }, ft = async e => {
        const t = await et(),
            r = e.userFesIdol;
        r.activeSkills.forEach(e => {
            at(e, t)
        }), at(r.memoryAppeal, t), r.passiveSkills.forEach(e => {
            rt(e, "comment", t), rt(e, "name", t)
        }), r.userFesIdolProduceExSkills.forEach(e => {
            ot(e.produceExSkill, t)
        }), r.userFesSupportIdols.forEach(e => {
            e.userFesSupportIdolProduceExSkills.forEach(e => {
                ot(e.produceExSkill, t)
            })
        })
    }, mt = ft, gt = async e => {
        const t = await et();
        e.userProduceExSkills.forEach(e => {
            ot(e.produceExSkill, t)
        })
    }, yt = async e => {
        const t = await et();
        e.userProduceSupportIdols.forEach(e => {
            st(e.skillPanels, t)
        }), lt(e, t, !0), e.userProduceLimitedSkills && e.userProduceLimitedSkills.forEach(e => {
            at(e.passiveSkills, t), at(e.skill, t)
        });
        try {
            st(e.userProduceIdol.userIdol.idol.skillPanels, t)
        } catch (e) {}
    }, vt = async e => {
        const t = await et(),
            r = e => {
                e.userFesIdol.activeSkills.forEach(e => {
                    at(e, t, !0)
                }), at(e.userFesIdol.memoryAppeal, t, !0), e.userFesIdol.passiveSkills.forEach(e => {
                    rt(e, "comment", t), rt(e, "name", t), it(e, t)
                })
            };
        e.userFesDeck && e.userFesDeck.userFesDeckMembers.forEach(r), e.userRaidDeck && e.userRaidDeck.userRaidDeckMembers.forEach(r), ut(e.judges, t), dt(e.userFesRivals, t), dt(e.userFesRaidRivals, t)
    }, wt = async e => {
        const t = await et();
        e.userProduceSupportIdols.forEach(e => {
            at(e.activeSkill, t, !0)
        });
        let r = e.userProduceIdol;
        r.activeSkills.forEach(e => {
            at(e, t, !0)
        }), at(r.memoryAppeal, t, !0), r.passiveSkills.forEach(e => {
            at(e, t, !0)
        });
        let n = e.produceAudition || e.produceConcert;
        ut(n.judges, t), ((e, t) => {
            e.forEach(e => {
                it(e.rivalMemoryAppeal, t), e.rivalSkills.forEach(e => {
                    it(e, t)
                })
            })
        })(n.rivals, t)
    }, _t = async e => {
        if (e.gameData) try {
            let t = JSON.parse(e.gameData);
            t.produceAudition || t.produceConcert ? await wt(t) : (t.userFesDeck || t.userRaidDeck) && await vt(t), e.gameData = JSON.stringify(t)
        } catch (e) {
            x()
        }
    };
    let St = new Map,
        Et = new Map,
        bt = new Map,
        xt = new Map,
        Tt = new Map,
        Ct = !1;
    let kt = null,
        At = null;
    const Mt = async () => (At || (At = (async (e = !1) => {
        if (!Ct) {
            let e = await ie("mission");
            e || (e = await ee("/data/mission-re.csv"), ae("mission", e));
            const t = re(e),
                r = [],
                n = [],
                i = [],
                a = new Map;
            Je(t, "text").forEach(e => {
                if (e && e.text) {
                    const t = _(e.text),
                        o = _(e.trans, !0),
                        s = w(e.type);
                    t && o && ("noun" === s ? (r.push(E(t)), bt.set(t, o)) : "note" === s ? (i.push(E(t)), Tt.set(t, o), a.set(`【${t}】`, `【${o}】`)) : "name" === s ? (n.push(E(t)), xt.set(t, o)) : "text" === s ? St.set(t, o) : a.set(t, o))
                }
            });
            const o = [{
                re: /\$name/g,
                exp: `(${n.join("|")})`
            }, {
                re: /\$noun/g,
                exp: `(${r.join("|")})`
            }, {
                re: /\$note/g,
                exp: `(${i.join("|")})`
            }];
            for (let [e, t] of a) {
                const r = qe(e, o);
                Et.set(r, t)
            }
            Ct = !0
        }
        const t = [bt, Tt, xt];
        let {
            itemMap: r
        } = await ye();
        return St = new Map([...r, ...St]), {
            expMap: Et,
            wordMaps: t,
            textMap: St
        }
    })()), kt = await At, kt), Rt = (e, t) => {
        if (!e) return;
        const {
            expMap: r,
            wordMaps: n,
            textMap: i
        } = kt, a = S(e[t]);
        let o = a;
        a && (i.has(a) ? e[t] = v(i.get(a)) : (o = Ve(a, r, n), a !== o && (e[t] = v(o))))
    }, It = e => {
        e.forEach(e => {
            Rt(e.mission, "title"), Rt(e.mission, "comment"), e.mission.missionReward.content && (Rt(e.mission.missionReward.content, "name"), Rt(e.mission.missionReward.content, "comment"))
        })
    }, Pt = e => {
        e.forEach(e => {
            let t = e.fesRaidAccumulatedReward;
            Rt(t, "title"), Rt(t, "comment");
            let r = t.fesRaidAccumulatedRewardContent;
            r && r.content && (Rt(r.content, "name"), Rt(r.content, "comment"))
        })
    }, Ot = e => {
        e && e.forEach(e => {
            let t = e;
            Rt(t, "title"), Rt(t, "afterAchievedComment"), Rt(t, "beforeAchievedComment");
            let r = t.lectureMissionReward;
            r && r.content && (Rt(r.content, "name"), Rt(r.content, "comment"))
        })
    }, Dt = async e => {
        await Mt(), Ot(e.lectureMissions)
    }, Ft = ["produceItem", "recoveryItem", "exchangeItem", "lotteryTicket", "evolutionItem", "gashaTicket", "scoutTicket", "enhancementItem"];
    let Bt;
    const jt = async () => (Bt || (Bt = ye()), await Bt);
    let Lt = [];
    (window.unsafeWindow || window).printUnknowItems = () => x(Lt.join("\n"));
    const Nt = (e, t, {
            itemMap: r,
            itemLimitMap: n,
            itemNoteMap: i
        }) => {
            if (!e || "string" != typeof e[t]) return;
            let a = S(e[t]),
                o = "",
                s = "",
                c = "";
            if (/[\s\S]+[\r\n]{0,2}\[[^\]]+\]$/.test(a)) {
                let e = a.match(/([\s\S]+)([\r\n]{0,2}\[[^\]]+\])$/);
                a = e[1].trim();
                let t = e[2];
                o = n.has(t) ? n.get(t) : t
            }
            if (/[\s\S]+[\r\n]{0,2}【Exp:\d+】$/.test(a)) {
                let e = a.match(/([\s\S]+)([\r\n]{0,2}【Exp:\d+】)$/);
                a = e[1].trim(), c = e[2]
            }
            if (/[\s\S]+[\r\n]{0,2}[(（][^)）]+[）)]$/.test(a)) {
                let e = a.match(/([\s\S]+)([\r\n]{0,2})[(（]([^)）]+)[）)]$/);
                a = e[1].trim();
                let t = e[3];
                s = i.has(t) ? `${e[2]}（${i.get(t)}）` : e[2] + "（txt）"
            }
            if (r.has(a)) {
                let n = r.get(a);
                n = `${n}${s}${c}${o}`, e[t] = v(n)
            } else 0
        },
        Ht = (e, t) => {
            e && e.shopMerchandises && e.shopMerchandises.forEach(e => {
                Nt(e, "title", t), Nt(e, "shopTitle", t), Nt(e, "comment", t)
            })
        },
        Ut = async e => {
            let t = e;
            e.userProduceItems && (t = e.userProduceItems);
            const r = await jt();
            Array.isArray(t) && t.forEach(e => {
                const t = e[Ft[0]] || e[Ft[1]] || e[Ft[2]] || e[Ft[3]] || e[Ft[4]] || e[Ft[5]] || e[Ft[6]] || e[Ft[7]];
                Nt(t, "name", r), Nt(t, "comment", r)
            })
        }, zt = new Map;
    let Gt = !1;
    var $t = t((function(e, t) {
        /* @license
        	Papa Parse
        	v4.6.3
        	https://github.com/mholt/PapaParse
        	License: MIT
        	*/
        Array.isArray || (Array.isArray = function(e) {
            return "[object Array]" === Object.prototype.toString.call(e)
        }), e.exports = function() {
            var e, t, r = "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {},
                n = !r.document && !!r.postMessage,
                i = n && /(\?|&)papaworker(=|&|$)/.test(r.location.search),
                a = !1,
                o = {},
                s = 0,
                c = {
                    parse: function(t, n) {
                        var i = (n = n || {}).dynamicTyping || !1;
                        if (x(i) && (n.dynamicTypingFunction = i, i = {}), n.dynamicTyping = i, n.transform = !!x(n.transform) && n.transform, n.worker && c.WORKERS_SUPPORTED) {
                            var l = function() {
                                if (!c.WORKERS_SUPPORTED) return !1;
                                if (!a && null === c.SCRIPT_PATH) throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");
                                var t = c.SCRIPT_PATH || e;
                                t += (-1 !== t.indexOf("?") ? "&" : "?") + "papaworker";
                                var n = new r.Worker(t);
                                return n.onmessage = w, n.id = s++, o[n.id] = n, n
                            }();
                            return l.userStep = n.step, l.userChunk = n.chunk, l.userComplete = n.complete, l.userError = n.error, n.step = x(n.step), n.chunk = x(n.chunk), n.complete = x(n.complete), n.error = x(n.error), delete n.worker, void l.postMessage({
                                input: t,
                                config: n,
                                workerId: l.id
                            })
                        }
                        var u = null;
                        return t === c.NODE_STREAM_INPUT && "undefined" == typeof PAPA_BROWSER_CONTEXT ? (u = new m(n)).getStream() : ("string" == typeof t ? u = n.download ? new d(n) : new p(n) : !0 === t.readable && x(t.read) && x(t.on) ? u = new f(n) : (r.File && t instanceof File || t instanceof Object) && (u = new h(n)), u.stream(t))
                    },
                    unparse: function(e, t) {
                        var r = !1,
                            n = !0,
                            i = ",",
                            a = "\r\n",
                            o = '"',
                            s = !1;
                        "object" == typeof t && ("string" != typeof t.delimiter || c.BAD_DELIMITERS.filter((function(e) {
                            return -1 !== t.delimiter.indexOf(e)
                        })).length || (i = t.delimiter), ("boolean" == typeof t.quotes || Array.isArray(t.quotes)) && (r = t.quotes), "boolean" != typeof t.skipEmptyLines && "string" != typeof t.skipEmptyLines || (s = t.skipEmptyLines), "string" == typeof t.newline && (a = t.newline), "string" == typeof t.quoteChar && (o = t.quoteChar), "boolean" == typeof t.header && (n = t.header));
                        var l = new RegExp(y(o), "g");
                        if ("string" == typeof e && (e = JSON.parse(e)), Array.isArray(e)) {
                            if (!e.length || Array.isArray(e[0])) return d(null, e, s);
                            if ("object" == typeof e[0]) return d(u(e[0]), e, s)
                        } else if ("object" == typeof e) return "string" == typeof e.data && (e.data = JSON.parse(e.data)), Array.isArray(e.data) && (e.fields || (e.fields = e.meta && e.meta.fields), e.fields || (e.fields = Array.isArray(e.data[0]) ? e.fields : u(e.data[0])), Array.isArray(e.data[0]) || "object" == typeof e.data[0] || (e.data = [e.data])), d(e.fields || [], e.data || [], s);
                        throw "exception: Unable to serialize unrecognized input";

                        function u(e) {
                            if ("object" != typeof e) return [];
                            var t = [];
                            for (var r in e) t.push(r);
                            return t
                        }

                        function d(e, t, r) {
                            var o = "";
                            "string" == typeof e && (e = JSON.parse(e)), "string" == typeof t && (t = JSON.parse(t));
                            var s = Array.isArray(e) && e.length > 0,
                                c = !Array.isArray(t[0]);
                            if (s && n) {
                                for (var l = 0; l < e.length; l++) l > 0 && (o += i), o += h(e[l], l);
                                t.length > 0 && (o += a)
                            }
                            for (var u = 0; u < t.length; u++) {
                                var d = s ? e.length : t[u].length,
                                    p = !1,
                                    f = s ? 0 === Object.keys(t[u]).length : 0 === t[u].length;
                                if (r && !s && (p = "greedy" === r ? "" === t[u].join("").trim() : 1 === t[u].length && 0 === t[u][0].length), "greedy" === r && s) {
                                    for (var m = [], g = 0; g < d; g++) {
                                        var y = c ? e[g] : g;
                                        m.push(t[u][y])
                                    }
                                    p = "" === m.join("").trim()
                                }
                                if (!p) {
                                    for (var v = 0; v < d; v++) {
                                        v > 0 && !f && (o += i);
                                        var w = s && c ? e[v] : v;
                                        o += h(t[u][w], v)
                                    }
                                    u < t.length - 1 && (!r || d > 0 && !f) && (o += a)
                                }
                            }
                            return o
                        }

                        function h(e, t) {
                            return null == e ? "" : e.constructor === Date ? JSON.stringify(e).slice(1, 25) : (e = e.toString().replace(l, o + o), "boolean" == typeof r && r || Array.isArray(r) && r[t] || function(e, t) {
                                for (var r = 0; r < t.length; r++)
                                    if (e.indexOf(t[r]) > -1) return !0;
                                return !1
                            }(e, c.BAD_DELIMITERS) || e.indexOf(i) > -1 || " " === e.charAt(0) || " " === e.charAt(e.length - 1) ? o + e + o : e)
                        }
                    }
                };
            if (c.RECORD_SEP = String.fromCharCode(30), c.UNIT_SEP = String.fromCharCode(31), c.BYTE_ORDER_MARK = "\ufeff", c.BAD_DELIMITERS = ["\r", "\n", '"', c.BYTE_ORDER_MARK], c.WORKERS_SUPPORTED = !n && !!r.Worker, c.SCRIPT_PATH = null, c.NODE_STREAM_INPUT = 1, c.LocalChunkSize = 10485760, c.RemoteChunkSize = 5242880, c.DefaultDelimiter = ",", c.Parser = v, c.ParserHandle = g, c.NetworkStreamer = d, c.FileStreamer = h, c.StringStreamer = p, c.ReadableStreamStreamer = f, "undefined" == typeof PAPA_BROWSER_CONTEXT && (c.DuplexStreamStreamer = m), r.jQuery) {
                var l = r.jQuery;
                l.fn.parse = function(e) {
                    var t = e.config || {},
                        n = [];
                    return this.each((function(e) {
                        if ("INPUT" !== l(this).prop("tagName").toUpperCase() || "file" !== l(this).attr("type").toLowerCase() || !r.FileReader || !this.files || 0 === this.files.length) return !0;
                        for (var i = 0; i < this.files.length; i++) n.push({
                            file: this.files[i],
                            inputElem: this,
                            instanceConfig: l.extend({}, t)
                        })
                    })), i(), this;

                    function i() {
                        if (0 !== n.length) {
                            var t, r, i, o, s = n[0];
                            if (x(e.before)) {
                                var u = e.before(s.file, s.inputElem);
                                if ("object" == typeof u) {
                                    if ("abort" === u.action) return t = "AbortError", r = s.file, i = s.inputElem, o = u.reason, void(x(e.error) && e.error({
                                        name: t
                                    }, r, i, o));
                                    if ("skip" === u.action) return void a();
                                    "object" == typeof u.config && (s.instanceConfig = l.extend(s.instanceConfig, u.config))
                                } else if ("skip" === u) return void a()
                            }
                            var d = s.instanceConfig.complete;
                            s.instanceConfig.complete = function(e) {
                                x(d) && d(e, s.file, s.inputElem), a()
                            }, c.parse(s.file, s.instanceConfig)
                        } else x(e.complete) && e.complete()
                    }

                    function a() {
                        n.splice(0, 1), i()
                    }
                }
            }

            function u(e) {
                this._handle = null, this._finished = !1, this._completed = !1, this._input = null, this._baseIndex = 0, this._partialLine = "", this._rowCount = 0, this._start = 0, this._nextChunk = null, this.isFirstChunk = !0, this._completeResults = {
                        data: [],
                        errors: [],
                        meta: {}
                    },
                    function(e) {
                        var t = E(e);
                        t.chunkSize = parseInt(t.chunkSize), e.step || e.chunk || (t.chunkSize = null), this._handle = new g(t), this._handle.streamer = this, this._config = t
                    }.call(this, e), this.parseChunk = function(e, t) {
                        if (this.isFirstChunk && x(this._config.beforeFirstChunk)) {
                            var n = this._config.beforeFirstChunk(e);
                            void 0 !== n && (e = n)
                        }
                        this.isFirstChunk = !1;
                        var a = this._partialLine + e;
                        this._partialLine = "";
                        var o = this._handle.parse(a, this._baseIndex, !this._finished);
                        if (!this._handle.paused() && !this._handle.aborted()) {
                            var s = o.meta.cursor;
                            this._finished || (this._partialLine = a.substring(s - this._baseIndex), this._baseIndex = s), o && o.data && (this._rowCount += o.data.length);
                            var l = this._finished || this._config.preview && this._rowCount >= this._config.preview;
                            if (i) r.postMessage({
                                results: o,
                                workerId: c.WORKER_ID,
                                finished: l
                            });
                            else if (x(this._config.chunk) && !t) {
                                if (this._config.chunk(o, this._handle), this._handle.paused() || this._handle.aborted()) return;
                                o = void 0, this._completeResults = void 0
                            }
                            return this._config.step || this._config.chunk || (this._completeResults.data = this._completeResults.data.concat(o.data), this._completeResults.errors = this._completeResults.errors.concat(o.errors), this._completeResults.meta = o.meta), this._completed || !l || !x(this._config.complete) || o && o.meta.aborted || (this._config.complete(this._completeResults, this._input), this._completed = !0), l || o && o.meta.paused || this._nextChunk(), o
                        }
                    }, this._sendError = function(e) {
                        x(this._config.error) ? this._config.error(e) : i && this._config.error && r.postMessage({
                            workerId: c.WORKER_ID,
                            error: e,
                            finished: !1
                        })
                    }
            }

            function d(e) {
                var t;
                (e = e || {}).chunkSize || (e.chunkSize = c.RemoteChunkSize), u.call(this, e), this._nextChunk = n ? function() {
                    this._readChunk(), this._chunkLoaded()
                } : function() {
                    this._readChunk()
                }, this.stream = function(e) {
                    this._input = e, this._nextChunk()
                }, this._readChunk = function() {
                    if (this._finished) this._chunkLoaded();
                    else {
                        if (t = new XMLHttpRequest, this._config.withCredentials && (t.withCredentials = this._config.withCredentials), n || (t.onload = b(this._chunkLoaded, this), t.onerror = b(this._chunkError, this)), t.open("GET", this._input, !n), this._config.downloadRequestHeaders) {
                            var e = this._config.downloadRequestHeaders;
                            for (var r in e) t.setRequestHeader(r, e[r])
                        }
                        if (this._config.chunkSize) {
                            var i = this._start + this._config.chunkSize - 1;
                            t.setRequestHeader("Range", "bytes=" + this._start + "-" + i), t.setRequestHeader("If-None-Match", "webkit-no-cache")
                        }
                        try {
                            t.send()
                        } catch (e) {
                            this._chunkError(e.message)
                        }
                        n && 0 === t.status ? this._chunkError() : this._start += this._config.chunkSize
                    }
                }, this._chunkLoaded = function() {
                    4 === t.readyState && (t.status < 200 || t.status >= 400 ? this._chunkError() : (this._finished = !this._config.chunkSize || this._start > function(e) {
                        var t = e.getResponseHeader("Content-Range");
                        return null === t ? -1 : parseInt(t.substr(t.lastIndexOf("/") + 1))
                    }(t), this.parseChunk(t.responseText)))
                }, this._chunkError = function(e) {
                    var r = t.statusText || e;
                    this._sendError(new Error(r))
                }
            }

            function h(e) {
                var t, r;
                (e = e || {}).chunkSize || (e.chunkSize = c.LocalChunkSize), u.call(this, e);
                var n = "undefined" != typeof FileReader;
                this.stream = function(e) {
                    this._input = e, r = e.slice || e.webkitSlice || e.mozSlice, n ? ((t = new FileReader).onload = b(this._chunkLoaded, this), t.onerror = b(this._chunkError, this)) : t = new FileReaderSync, this._nextChunk()
                }, this._nextChunk = function() {
                    this._finished || this._config.preview && !(this._rowCount < this._config.preview) || this._readChunk()
                }, this._readChunk = function() {
                    var e = this._input;
                    if (this._config.chunkSize) {
                        var i = Math.min(this._start + this._config.chunkSize, this._input.size);
                        e = r.call(e, this._start, i)
                    }
                    var a = t.readAsText(e, this._config.encoding);
                    n || this._chunkLoaded({
                        target: {
                            result: a
                        }
                    })
                }, this._chunkLoaded = function(e) {
                    this._start += this._config.chunkSize, this._finished = !this._config.chunkSize || this._start >= this._input.size, this.parseChunk(e.target.result)
                }, this._chunkError = function() {
                    this._sendError(t.error)
                }
            }

            function p(e) {
                var t;
                e = e || {}, u.call(this, e), this.stream = function(e) {
                    return t = e, this._nextChunk()
                }, this._nextChunk = function() {
                    if (!this._finished) {
                        var e = this._config.chunkSize,
                            r = e ? t.substr(0, e) : t;
                        return t = e ? t.substr(e) : "", this._finished = !t, this.parseChunk(r)
                    }
                }
            }

            function f(e) {
                e = e || {}, u.call(this, e);
                var t = [],
                    r = !0,
                    n = !1;
                this.pause = function() {
                    u.prototype.pause.apply(this, arguments), this._input.pause()
                }, this.resume = function() {
                    u.prototype.resume.apply(this, arguments), this._input.resume()
                }, this.stream = function(e) {
                    this._input = e, this._input.on("data", this._streamData), this._input.on("end", this._streamEnd), this._input.on("error", this._streamError)
                }, this._checkIsFinished = function() {
                    n && 1 === t.length && (this._finished = !0)
                }, this._nextChunk = function() {
                    this._checkIsFinished(), t.length ? this.parseChunk(t.shift()) : r = !0
                }, this._streamData = b((function(e) {
                    try {
                        t.push("string" == typeof e ? e : e.toString(this._config.encoding)), r && (r = !1, this._checkIsFinished(), this.parseChunk(t.shift()))
                    } catch (e) {
                        this._streamError(e)
                    }
                }), this), this._streamError = b((function(e) {
                    this._streamCleanUp(), this._sendError(e)
                }), this), this._streamEnd = b((function() {
                    this._streamCleanUp(), n = !0, this._streamData("")
                }), this), this._streamCleanUp = b((function() {
                    this._input.removeListener("data", this._streamData), this._input.removeListener("end", this._streamEnd), this._input.removeListener("error", this._streamError)
                }), this)
            }

            function m(e) {
                var t = require("stream").Duplex,
                    r = E(e),
                    n = !0,
                    i = !1,
                    a = [],
                    o = null;
                this._onCsvData = function(e) {
                    for (var t = e.data, r = 0; r < t.length; r++) o.push(t[r]) || this._handle.paused() || this._handle.pause()
                }, this._onCsvComplete = function() {
                    o.push(null)
                }, r.step = b(this._onCsvData, this), r.complete = b(this._onCsvComplete, this), u.call(this, r), this._nextChunk = function() {
                    i && 1 === a.length && (this._finished = !0), a.length ? a.shift()() : n = !0
                }, this._addToParseQueue = function(e, t) {
                    a.push(b((function() {
                        if (this.parseChunk("string" == typeof e ? e : e.toString(r.encoding)), x(t)) return t()
                    }), this)), n && (n = !1, this._nextChunk())
                }, this._onRead = function() {
                    this._handle.paused() && this._handle.resume()
                }, this._onWrite = function(e, t, r) {
                    this._addToParseQueue(e, r)
                }, this._onWriteComplete = function() {
                    i = !0, this._addToParseQueue("")
                }, this.getStream = function() {
                    return o
                }, (o = new t({
                    readableObjectMode: !0,
                    decodeStrings: !1,
                    read: b(this._onRead, this),
                    write: b(this._onWrite, this)
                })).once("finish", b(this._onWriteComplete, this))
            }

            function g(e) {
                var t, r, n, i = /^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,
                    a = /(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,
                    o = this,
                    s = 0,
                    l = 0,
                    u = !1,
                    d = !1,
                    h = [],
                    p = {
                        data: [],
                        errors: [],
                        meta: {}
                    };
                if (x(e.step)) {
                    var f = e.step;
                    e.step = function(t) {
                        if (p = t, w()) g();
                        else {
                            if (g(), 0 === p.data.length) return;
                            s += t.data.length, e.preview && s > e.preview ? r.abort() : f(p, o)
                        }
                    }
                }

                function m(t) {
                    return "greedy" === e.skipEmptyLines ? "" === t.join("").trim() : 1 === t.length && 0 === t[0].length
                }

                function g() {
                    if (p && n && (S("Delimiter", "UndetectableDelimiter", "Unable to auto-detect delimiting character; defaulted to '" + c.DefaultDelimiter + "'"), n = !1), e.skipEmptyLines)
                        for (var t = 0; t < p.data.length; t++) m(p.data[t]) && p.data.splice(t--, 1);
                    return w() && function() {
                            if (p) {
                                for (var t = 0; w() && t < p.data.length; t++)
                                    for (var r = 0; r < p.data[t].length; r++) {
                                        var n = p.data[t][r];
                                        e.trimHeaders && (n = n.trim()), h.push(n)
                                    }
                                p.data.splice(0, 1)
                            }
                        }(),
                        function() {
                            if (!p || !e.header && !e.dynamicTyping && !e.transform) return p;
                            for (var t = 0; t < p.data.length; t++) {
                                var r, n = e.header ? {} : [];
                                for (r = 0; r < p.data[t].length; r++) {
                                    var i = r,
                                        a = p.data[t][r];
                                    e.header && (i = r >= h.length ? "__parsed_extra" : h[r]), e.transform && (a = e.transform(a, i)), a = _(i, a), "__parsed_extra" === i ? (n[i] = n[i] || [], n[i].push(a)) : n[i] = a
                                }
                                p.data[t] = n, e.header && (r > h.length ? S("FieldMismatch", "TooManyFields", "Too many fields: expected " + h.length + " fields but parsed " + r, l + t) : r < h.length && S("FieldMismatch", "TooFewFields", "Too few fields: expected " + h.length + " fields but parsed " + r, l + t))
                            }
                            return e.header && p.meta && (p.meta.fields = h), l += p.data.length, p
                        }()
                }

                function w() {
                    return e.header && 0 === h.length
                }

                function _(t, r) {
                    return function(t) {
                        return e.dynamicTypingFunction && void 0 === e.dynamicTyping[t] && (e.dynamicTyping[t] = e.dynamicTypingFunction(t)), !0 === (e.dynamicTyping[t] || e.dynamicTyping)
                    }(t) ? "true" === r || "TRUE" === r || "false" !== r && "FALSE" !== r && (i.test(r) ? parseFloat(r) : a.test(r) ? new Date(r) : "" === r ? null : r) : r
                }

                function S(e, t, r, n) {
                    p.errors.push({
                        type: e,
                        code: t,
                        message: r,
                        row: n
                    })
                }
                this.parse = function(i, a, o) {
                    var s = e.quoteChar || '"';
                    if (e.newline || (e.newline = function(e, t) {
                            e = e.substr(0, 1048576);
                            var r = new RegExp(y(t) + "([^]*?)" + y(t), "gm"),
                                n = (e = e.replace(r, "")).split("\r"),
                                i = e.split("\n"),
                                a = i.length > 1 && i[0].length < n[0].length;
                            if (1 === n.length || a) return "\n";
                            for (var o = 0, s = 0; s < n.length; s++) "\n" === n[s][0] && o++;
                            return o >= n.length / 2 ? "\r\n" : "\r"
                        }(i, s)), n = !1, e.delimiter) x(e.delimiter) && (e.delimiter = e.delimiter(i), p.meta.delimiter = e.delimiter);
                    else {
                        var l = function(t, r, n, i) {
                            for (var a, o, s, l = [",", "\t", "|", ";", c.RECORD_SEP, c.UNIT_SEP], u = 0; u < l.length; u++) {
                                var d = l[u],
                                    h = 0,
                                    p = 0,
                                    f = 0;
                                s = void 0;
                                for (var g = new v({
                                        comments: i,
                                        delimiter: d,
                                        newline: r,
                                        preview: 10
                                    }).parse(t), y = 0; y < g.data.length; y++)
                                    if (n && m(g.data[y])) f++;
                                    else {
                                        var w = g.data[y].length;
                                        p += w, void 0 !== s ? w > 1 && (h += Math.abs(w - s), s = w) : s = 0
                                    } g.data.length > 0 && (p /= g.data.length - f), (void 0 === o || h > o) && p > 1.99 && (o = h, a = d)
                            }
                            return e.delimiter = a, {
                                successful: !!a,
                                bestDelimiter: a
                            }
                        }(i, e.newline, e.skipEmptyLines, e.comments);
                        l.successful ? e.delimiter = l.bestDelimiter : (n = !0, e.delimiter = c.DefaultDelimiter), p.meta.delimiter = e.delimiter
                    }
                    var d = E(e);
                    return e.preview && e.header && d.preview++, t = i, r = new v(d), p = r.parse(t, a, o), g(), u ? {
                        meta: {
                            paused: !0
                        }
                    } : p || {
                        meta: {
                            paused: !1
                        }
                    }
                }, this.paused = function() {
                    return u
                }, this.pause = function() {
                    u = !0, r.abort(), t = t.substr(r.getCharIndex())
                }, this.resume = function() {
                    u = !1, o.streamer.parseChunk(t, !0)
                }, this.aborted = function() {
                    return d
                }, this.abort = function() {
                    d = !0, r.abort(), p.meta.aborted = !0, x(e.complete) && e.complete(p), t = ""
                }
            }

            function y(e) {
                return e.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")
            }

            function v(e) {
                var t, r = (e = e || {}).delimiter,
                    n = e.newline,
                    i = e.comments,
                    a = e.step,
                    o = e.preview,
                    s = e.fastMode,
                    l = t = void 0 === e.quoteChar ? '"' : e.quoteChar;
                if (void 0 !== e.escapeChar && (l = e.escapeChar), ("string" != typeof r || c.BAD_DELIMITERS.indexOf(r) > -1) && (r = ","), i === r) throw "Comment character same as delimiter";
                !0 === i ? i = "#" : ("string" != typeof i || c.BAD_DELIMITERS.indexOf(i) > -1) && (i = !1), "\n" !== n && "\r" !== n && "\r\n" !== n && (n = "\n");
                var u = 0,
                    d = !1;
                this.parse = function(e, c, h) {
                    if ("string" != typeof e) throw "Input must be a string";
                    var p = e.length,
                        f = r.length,
                        m = n.length,
                        g = i.length,
                        v = x(a);
                    u = 0;
                    var w = [],
                        _ = [],
                        S = [],
                        E = 0;
                    if (!e) return B();
                    if (s || !1 !== s && -1 === e.indexOf(t)) {
                        for (var b = e.split(n), T = 0; T < b.length; T++) {
                            if (S = b[T], u += S.length, T !== b.length - 1) u += n.length;
                            else if (h) return B();
                            if (!i || S.substr(0, g) !== i) {
                                if (v) {
                                    if (w = [], P(S.split(r)), j(), d) return B()
                                } else P(S.split(r));
                                if (o && T >= o) return w = w.slice(0, o), B(!0)
                            }
                        }
                        return B()
                    }
                    for (var C, k = e.indexOf(r, u), A = e.indexOf(n, u), M = new RegExp(y(l) + y(t), "g");;)
                        if (e[u] !== t)
                            if (i && 0 === S.length && e.substr(u, g) === i) {
                                if (-1 === A) return B();
                                u = A + m, A = e.indexOf(n, u), k = e.indexOf(r, u)
                            } else if (-1 !== k && (k < A || -1 === A)) S.push(e.substring(u, k)), u = k + f, k = e.indexOf(r, u);
                    else {
                        if (-1 === A) break;
                        if (S.push(e.substring(u, A)), F(A + m), v && (j(), d)) return B();
                        if (o && w.length >= o) return B(!0)
                    } else
                        for (C = u, u++;;) {
                            if (-1 === (C = e.indexOf(t, C + 1))) return h || _.push({
                                type: "Quotes",
                                code: "MissingQuotes",
                                message: "Quoted field unterminated",
                                row: w.length,
                                index: u
                            }), D();
                            if (C === p - 1) return D(e.substring(u, C).replace(M, t));
                            if (t !== l || e[C + 1] !== l) {
                                if (t === l || 0 === C || e[C - 1] !== l) {
                                    var R = O(-1 === A ? k : Math.min(k, A));
                                    if (e[C + 1 + R] === r) {
                                        S.push(e.substring(u, C).replace(M, t)), u = C + 1 + R + f, k = e.indexOf(r, u), A = e.indexOf(n, u);
                                        break
                                    }
                                    var I = O(A);
                                    if (e.substr(C + 1 + I, m) === n) {
                                        if (S.push(e.substring(u, C).replace(M, t)), F(C + 1 + I + m), k = e.indexOf(r, u), v && (j(), d)) return B();
                                        if (o && w.length >= o) return B(!0);
                                        break
                                    }
                                    _.push({
                                        type: "Quotes",
                                        code: "InvalidQuotes",
                                        message: "Trailing quote on quoted field is malformed",
                                        row: w.length,
                                        index: u
                                    }), C++
                                }
                            } else C++
                        }
                    return D();

                    function P(e) {
                        w.push(e), E = u
                    }

                    function O(t) {
                        var r = 0;
                        if (-1 !== t) {
                            var n = e.substring(C + 1, t);
                            n && "" === n.trim() && (r = n.length)
                        }
                        return r
                    }

                    function D(t) {
                        return h || (void 0 === t && (t = e.substr(u)), S.push(t), u = p, P(S), v && j()), B()
                    }

                    function F(t) {
                        u = t, P(S), S = [], A = e.indexOf(n, u)
                    }

                    function B(e) {
                        return {
                            data: w,
                            errors: _,
                            meta: {
                                delimiter: r,
                                linebreak: n,
                                aborted: d,
                                truncated: !!e,
                                cursor: E + (c || 0)
                            }
                        }
                    }

                    function j() {
                        a(B()), w = [], _ = []
                    }
                }, this.abort = function() {
                    d = !0
                }, this.getCharIndex = function() {
                    return u
                }
            }

            function w(e) {
                var t = e.data,
                    r = o[t.workerId],
                    n = !1;
                if (t.error) r.userError(t.error, t.file);
                else if (t.results && t.results.data) {
                    var i = {
                        abort: function() {
                            n = !0, _(t.workerId, {
                                data: [],
                                errors: [],
                                meta: {
                                    aborted: !0
                                }
                            })
                        },
                        pause: S,
                        resume: S
                    };
                    if (x(r.userStep)) {
                        for (var a = 0; a < t.results.data.length && (r.userStep({
                                data: [t.results.data[a]],
                                errors: t.results.errors,
                                meta: t.results.meta
                            }, i), !n); a++);
                        delete t.results
                    } else x(r.userChunk) && (r.userChunk(t.results, i, t.file), delete t.results)
                }
                t.finished && !n && _(t.workerId, t.results)
            }

            function _(e, t) {
                var r = o[e];
                x(r.userComplete) && r.userComplete(t), r.terminate(), delete o[e]
            }

            function S() {
                throw "Not implemented."
            }

            function E(e) {
                if ("object" != typeof e || null === e) return e;
                var t = Array.isArray(e) ? [] : {};
                for (var r in e) t[r] = E(e[r]);
                return t
            }

            function b(e, t) {
                return function() {
                    e.apply(t, arguments)
                }
            }

            function x(e) {
                return "function" == typeof e
            }
            return i ? r.onmessage = function(e) {
                var t = e.data;
                if (void 0 === c.WORKER_ID && t && (c.WORKER_ID = t.workerId), "string" == typeof t.input) r.postMessage({
                    workerId: c.WORKER_ID,
                    results: c.parse(t.input, t.config),
                    finished: !0
                });
                else if (r.File && t.input instanceof File || t.input instanceof Object) {
                    var n = c.parse(t.input, t.config);
                    n && r.postMessage({
                        workerId: c.WORKER_ID,
                        results: n,
                        finished: !0
                    })
                }
            } : c.WORKERS_SUPPORTED && (t = document.getElementsByTagName("script"), e = t.length ? t[t.length - 1].src : "", document.body ? document.addEventListener("DOMContentLoaded", (function() {
                a = !0
            }), !0) : a = !0), d.prototype = Object.create(u.prototype), d.prototype.constructor = d, h.prototype = Object.create(u.prototype), h.prototype.constructor = h, p.prototype = Object.create(p.prototype), p.prototype.constructor = p, f.prototype = Object.create(u.prototype), f.prototype.constructor = f, "undefined" == typeof PAPA_BROWSER_CONTEXT && (m.prototype = Object.create(u.prototype), m.prototype.constructor = m), c
        }()
    }));
    let Wt = null;
    const Kt = async () => (Wt || (Wt = (async () => {
        if (!Gt) {
            let e = await ie("story-title");
            e || (e = await ee("/data/story-title.csv"), ae("story-title", e));
            re(e).forEach(e => {
                const t = w(e.title),
                    r = w(e.trans);
                t && r && t !== r && zt.set(t, r)
            }), Gt = !0
        }
        return zt
    })()), await Wt), Xt = (e, t, r) => {
        if (e && e[t]) {
            const n = e[t];
            r.has(n) && (e[t] = r.get(n))
        }
    }, Vt = async e => {
        const t = await Kt(),
            r = [];
        if (e.communications && e.communications.forEach(e => {
                r.push({
                    title: e.title,
                    trans: ""
                }), Xt(e, "title", t)
            }), e.idol && e.idol.produceIdolEvents && (e.idol.produceIdolEvents.forEach(e => {
                r.push({
                    title: e.title,
                    trans: ""
                }), Xt(e, "title", t)
            }), e.idol.produceAfterEvents.forEach(e => {
                r.push({
                    title: e.title,
                    trans: ""
                }), Xt(e, "title", t)
            })), e.supportIdol && e.supportIdol.produceSupportIdolEvents && e.supportIdol.produceSupportIdolEvents.forEach(e => {
                r.push({
                    title: e.title,
                    trans: ""
                }), Xt(e, "title", t)
            }), e.gameEvents && e.gameEvents.forEach(e => {
                e.communications.forEach(e => {
                    r.push({
                        title: e.title,
                        trans: ""
                    }), Xt(e, "title", t)
                })
            }), e.specialEvents && e.specialEvents.forEach(e => {
                e.communications.forEach(e => {
                    r.push({
                        title: e.title,
                        trans: ""
                    }), Xt(e, "title", t)
                })
            }), console.log(U.commuTitle), console.log(r), "download" == U.commuTitle) {
            const e = $t.unparse(r);
            C(e, "commuTitles"), U.commuTitle = "normal", V()
        }
        console.log("beep boop this is log, with data ensured")
    }, Jt = new Map;
    let qt = !1;
    let Qt = null;
    const Yt = async () => (Qt || (Qt = (async () => {
        if (!qt) {
            let e = await ie("profile");
            e || (e = await ee("/data/profile.csv"), ae("profile", e));
            re(e).forEach(e => {
                const t = w(e.name);
                t && Jt.set(t, e)
            }), qt = !0
        }
        return Jt
    })()), await Qt), Zt = (e, t, r) => {
        "unit_name" == t && r[t] ? e.unit.name = r[t] : r[t] && (e[t] = r[t])
    }, er = (e, t) => {
        Zt(e, "arm", t), Zt(e, "birthDay", t), Zt(e, "characterVoice", t), Zt(e, "firstName", t), Zt(e, "hobby", t), Zt(e, "nameKana", t), Zt(e, "place", t), Zt(e, "arm", t), Zt(e, "specialty", t), Zt(e, "starSign", t), Zt(e, "unit_name", t)
    }, tr = async e => {
        const t = await Yt();
        if (e.name) {
            const r = t.get(e.name);
            er(e, r)
        }
        e.beginnerMissionUnits && e.beginnerMissionUnits.forEach(e => {
            e.idols.forEach(e => {
                const r = t.get(e.idol.character.name);
                er(e.idol.character, r)
            })
        }), e.units && e.units.forEach(e => {
            e.idols.forEach(e => {
                const r = t.get(e.character.name);
                er(e.character, r)
            })
        })
    }, rr = new Map;
    let nr = !1;
    const ir = async () => {
        if (!nr) {
            let e = await ie("noun-fix");
            e || (e = await ee("/data/etc/noun-fix.csv"), ae("noun-fix", e));
            const t = re(e);
            Je(t, "text").forEach(e => {
                const t = w(e.text),
                    r = w(e.fixed);
                t && rr.set(t, r)
            }), nr = !0
        }
        return rr
    }, ar = new Map;
    let or = !1;
    var sr, cr = ((sr = function(e) {
        if (!(this instanceof sr)) return new sr(e);
        this.options = this.extend(e, {
            swfContainerId: "fingerprintjs2",
            swfPath: "flash/compiled/FontList.swf",
            detectScreenOrientation: !0,
            sortPluginsFor: [/palemoon/i],
            userDefinedFonts: [],
            excludeDoNotTrack: !0,
            excludePixelRatio: !0
        }), this.nativeForEach = Array.prototype.forEach, this.nativeMap = Array.prototype.map
    }).prototype = {
        extend: function(e, t) {
            if (null == e) return t;
            for (var r in e) null != e[r] && t[r] !== e[r] && (t[r] = e[r]);
            return t
        },
        get: function(e) {
            var t = this,
                r = {
                    data: [],
                    addPreprocessedComponent: function(e) {
                        var n = e.value;
                        "function" == typeof t.options.preprocessor && (n = t.options.preprocessor(e.key, n)), r.data.push({
                            key: e.key,
                            value: n
                        })
                    }
                };
            r = this.userAgentKey(r), r = this.languageKey(r), r = this.colorDepthKey(r), r = this.deviceMemoryKey(r), r = this.pixelRatioKey(r), r = this.hardwareConcurrencyKey(r), r = this.screenResolutionKey(r), r = this.availableScreenResolutionKey(r), r = this.timezoneOffsetKey(r), r = this.sessionStorageKey(r), r = this.localStorageKey(r), r = this.indexedDbKey(r), r = this.addBehaviorKey(r), r = this.openDatabaseKey(r), r = this.cpuClassKey(r), r = this.platformKey(r), r = this.doNotTrackKey(r), r = this.pluginsKey(r), r = this.canvasKey(r), r = this.webglKey(r), r = this.webglVendorAndRendererKey(r), r = this.adBlockKey(r), r = this.hasLiedLanguagesKey(r), r = this.hasLiedResolutionKey(r), r = this.hasLiedOsKey(r), r = this.hasLiedBrowserKey(r), r = this.touchSupportKey(r), r = this.customEntropyFunction(r), this.fontsKey(r, (function(r) {
                var n = [];
                t.each(r.data, (function(e) {
                    var t = e.value;
                    t && "function" == typeof t.join && (t = t.join(";")), n.push(t)
                }));
                var i = t.x64hash128(n.join("~~~"), 31);
                return e(i, r.data)
            }))
        },
        customEntropyFunction: function(e) {
            return "function" == typeof this.options.customFunction && e.addPreprocessedComponent({
                key: "custom",
                value: this.options.customFunction()
            }), e
        },
        userAgentKey: function(e) {
            return this.options.excludeUserAgent || e.addPreprocessedComponent({
                key: "user_agent",
                value: this.getUserAgent()
            }), e
        },
        getUserAgent: function() {
            return navigator.userAgent
        },
        languageKey: function(e) {
            return this.options.excludeLanguage || e.addPreprocessedComponent({
                key: "language",
                value: navigator.language || navigator.userLanguage || navigator.browserLanguage || navigator.systemLanguage || ""
            }), e
        },
        colorDepthKey: function(e) {
            return this.options.excludeColorDepth || e.addPreprocessedComponent({
                key: "color_depth",
                value: window.screen.colorDepth || -1
            }), e
        },
        deviceMemoryKey: function(e) {
            return this.options.excludeDeviceMemory || e.addPreprocessedComponent({
                key: "device_memory",
                value: this.getDeviceMemory()
            }), e
        },
        getDeviceMemory: function() {
            return navigator.deviceMemory || -1
        },
        pixelRatioKey: function(e) {
            return this.options.excludePixelRatio || e.addPreprocessedComponent({
                key: "pixel_ratio",
                value: this.getPixelRatio()
            }), e
        },
        getPixelRatio: function() {
            return window.devicePixelRatio || ""
        },
        screenResolutionKey: function(e) {
            return this.options.excludeScreenResolution ? e : this.getScreenResolution(e)
        },
        getScreenResolution: function(e) {
            var t;
            return t = this.options.detectScreenOrientation && window.screen.height > window.screen.width ? [window.screen.height, window.screen.width] : [window.screen.width, window.screen.height], e.addPreprocessedComponent({
                key: "resolution",
                value: t
            }), e
        },
        availableScreenResolutionKey: function(e) {
            return this.options.excludeAvailableScreenResolution ? e : this.getAvailableScreenResolution(e)
        },
        getAvailableScreenResolution: function(e) {
            var t;
            return window.screen.availWidth && window.screen.availHeight && (t = this.options.detectScreenOrientation ? window.screen.availHeight > window.screen.availWidth ? [window.screen.availHeight, window.screen.availWidth] : [window.screen.availWidth, window.screen.availHeight] : [window.screen.availHeight, window.screen.availWidth]), void 0 !== t && e.addPreprocessedComponent({
                key: "available_resolution",
                value: t
            }), e
        },
        timezoneOffsetKey: function(e) {
            return this.options.excludeTimezoneOffset || e.addPreprocessedComponent({
                key: "timezone_offset",
                value: (new Date).getTimezoneOffset()
            }), e
        },
        sessionStorageKey: function(e) {
            return !this.options.excludeSessionStorage && this.hasSessionStorage() && e.addPreprocessedComponent({
                key: "session_storage",
                value: 1
            }), e
        },
        localStorageKey: function(e) {
            return !this.options.excludeSessionStorage && this.hasLocalStorage() && e.addPreprocessedComponent({
                key: "local_storage",
                value: 1
            }), e
        },
        indexedDbKey: function(e) {
            return !this.options.excludeIndexedDB && this.hasIndexedDB() && e.addPreprocessedComponent({
                key: "indexed_db",
                value: 1
            }), e
        },
        addBehaviorKey: function(e) {
            return !this.options.excludeAddBehavior && document.body && document.body.addBehavior && e.addPreprocessedComponent({
                key: "add_behavior",
                value: 1
            }), e
        },
        openDatabaseKey: function(e) {
            return !this.options.excludeOpenDatabase && window.openDatabase && e.addPreprocessedComponent({
                key: "open_database",
                value: 1
            }), e
        },
        cpuClassKey: function(e) {
            return this.options.excludeCpuClass || e.addPreprocessedComponent({
                key: "cpu_class",
                value: this.getNavigatorCpuClass()
            }), e
        },
        platformKey: function(e) {
            return this.options.excludePlatform || e.addPreprocessedComponent({
                key: "navigator_platform",
                value: this.getNavigatorPlatform()
            }), e
        },
        doNotTrackKey: function(e) {
            return this.options.excludeDoNotTrack || e.addPreprocessedComponent({
                key: "do_not_track",
                value: this.getDoNotTrack()
            }), e
        },
        canvasKey: function(e) {
            return !this.options.excludeCanvas && this.isCanvasSupported() && e.addPreprocessedComponent({
                key: "canvas",
                value: this.getCanvasFp()
            }), e
        },
        webglKey: function(e) {
            return !this.options.excludeWebGL && this.isWebGlSupported() && e.addPreprocessedComponent({
                key: "webgl",
                value: this.getWebglFp()
            }), e
        },
        webglVendorAndRendererKey: function(e) {
            return !this.options.excludeWebGLVendorAndRenderer && this.isWebGlSupported() && e.addPreprocessedComponent({
                key: "webgl_vendor",
                value: this.getWebglVendorAndRenderer()
            }), e
        },
        adBlockKey: function(e) {
            return this.options.excludeAdBlock || e.addPreprocessedComponent({
                key: "adblock",
                value: this.getAdBlock()
            }), e
        },
        hasLiedLanguagesKey: function(e) {
            return this.options.excludeHasLiedLanguages || e.addPreprocessedComponent({
                key: "has_lied_languages",
                value: this.getHasLiedLanguages()
            }), e
        },
        hasLiedResolutionKey: function(e) {
            return this.options.excludeHasLiedResolution || e.addPreprocessedComponent({
                key: "has_lied_resolution",
                value: this.getHasLiedResolution()
            }), e
        },
        hasLiedOsKey: function(e) {
            return this.options.excludeHasLiedOs || e.addPreprocessedComponent({
                key: "has_lied_os",
                value: this.getHasLiedOs()
            }), e
        },
        hasLiedBrowserKey: function(e) {
            return this.options.excludeHasLiedBrowser || e.addPreprocessedComponent({
                key: "has_lied_browser",
                value: this.getHasLiedBrowser()
            }), e
        },
        fontsKey: function(e, t) {
            return this.options.excludeJsFonts ? this.flashFontsKey(e, t) : this.jsFontsKey(e, t)
        },
        flashFontsKey: function(e, t) {
            return this.options.excludeFlashFonts ? t(e) : this.hasSwfObjectLoaded() && this.hasMinFlashInstalled() ? void 0 === this.options.swfPath ? t(e) : void this.loadSwfAndDetectFonts((function(r) {
                e.addPreprocessedComponent({
                    key: "swf_fonts",
                    value: r.join(";")
                }), t(e)
            })) : t(e)
        },
        jsFontsKey: function(e, t) {
            var r = this;
            return setTimeout((function() {
                var n = ["monospace", "sans-serif", "serif"],
                    i = ["Andale Mono", "Arial", "Arial Black", "Arial Hebrew", "Arial MT", "Arial Narrow", "Arial Rounded MT Bold", "Arial Unicode MS", "Bitstream Vera Sans Mono", "Book Antiqua", "Bookman Old Style", "Calibri", "Cambria", "Cambria Math", "Century", "Century Gothic", "Century Schoolbook", "Comic Sans", "Comic Sans MS", "Consolas", "Courier", "Courier New", "Geneva", "Georgia", "Helvetica", "Helvetica Neue", "Impact", "Lucida Bright", "Lucida Calligraphy", "Lucida Console", "Lucida Fax", "LUCIDA GRANDE", "Lucida Handwriting", "Lucida Sans", "Lucida Sans Typewriter", "Lucida Sans Unicode", "Microsoft Sans Serif", "Monaco", "Monotype Corsiva", "MS Gothic", "MS Outlook", "MS PGothic", "MS Reference Sans Serif", "MS Sans Serif", "MS Serif", "MYRIAD", "MYRIAD PRO", "Palatino", "Palatino Linotype", "Segoe Print", "Segoe Script", "Segoe UI", "Segoe UI Light", "Segoe UI Semibold", "Segoe UI Symbol", "Tahoma", "Times", "Times New Roman", "Times New Roman PS", "Trebuchet MS", "Verdana", "Wingdings", "Wingdings 2", "Wingdings 3"];
                r.options.extendedJsFonts && (i = i.concat(["Abadi MT Condensed Light", "Academy Engraved LET", "ADOBE CASLON PRO", "Adobe Garamond", "ADOBE GARAMOND PRO", "Agency FB", "Aharoni", "Albertus Extra Bold", "Albertus Medium", "Algerian", "Amazone BT", "American Typewriter", "American Typewriter Condensed", "AmerType Md BT", "Andalus", "Angsana New", "AngsanaUPC", "Antique Olive", "Aparajita", "Apple Chancery", "Apple Color Emoji", "Apple SD Gothic Neo", "Arabic Typesetting", "ARCHER", "ARNO PRO", "Arrus BT", "Aurora Cn BT", "AvantGarde Bk BT", "AvantGarde Md BT", "AVENIR", "Ayuthaya", "Bandy", "Bangla Sangam MN", "Bank Gothic", "BankGothic Md BT", "Baskerville", "Baskerville Old Face", "Batang", "BatangChe", "Bauer Bodoni", "Bauhaus 93", "Bazooka", "Bell MT", "Bembo", "Benguiat Bk BT", "Berlin Sans FB", "Berlin Sans FB Demi", "Bernard MT Condensed", "BernhardFashion BT", "BernhardMod BT", "Big Caslon", "BinnerD", "Blackadder ITC", "BlairMdITC TT", "Bodoni 72", "Bodoni 72 Oldstyle", "Bodoni 72 Smallcaps", "Bodoni MT", "Bodoni MT Black", "Bodoni MT Condensed", "Bodoni MT Poster Compressed", "Bookshelf Symbol 7", "Boulder", "Bradley Hand", "Bradley Hand ITC", "Bremen Bd BT", "Britannic Bold", "Broadway", "Browallia New", "BrowalliaUPC", "Brush Script MT", "Californian FB", "Calisto MT", "Calligrapher", "Candara", "CaslonOpnface BT", "Castellar", "Centaur", "Cezanne", "CG Omega", "CG Times", "Chalkboard", "Chalkboard SE", "Chalkduster", "Charlesworth", "Charter Bd BT", "Charter BT", "Chaucer", "ChelthmITC Bk BT", "Chiller", "Clarendon", "Clarendon Condensed", "CloisterBlack BT", "Cochin", "Colonna MT", "Constantia", "Cooper Black", "Copperplate", "Copperplate Gothic", "Copperplate Gothic Bold", "Copperplate Gothic Light", "CopperplGoth Bd BT", "Corbel", "Cordia New", "CordiaUPC", "Cornerstone", "Coronet", "Cuckoo", "Curlz MT", "DaunPenh", "Dauphin", "David", "DB LCD Temp", "DELICIOUS", "Denmark", "DFKai-SB", "Didot", "DilleniaUPC", "DIN", "DokChampa", "Dotum", "DotumChe", "Ebrima", "Edwardian Script ITC", "Elephant", "English 111 Vivace BT", "Engravers MT", "EngraversGothic BT", "Eras Bold ITC", "Eras Demi ITC", "Eras Light ITC", "Eras Medium ITC", "EucrosiaUPC", "Euphemia", "Euphemia UCAS", "EUROSTILE", "Exotc350 Bd BT", "FangSong", "Felix Titling", "Fixedsys", "FONTIN", "Footlight MT Light", "Forte", "FrankRuehl", "Fransiscan", "Freefrm721 Blk BT", "FreesiaUPC", "Freestyle Script", "French Script MT", "FrnkGothITC Bk BT", "Fruitger", "FRUTIGER", "Futura", "Futura Bk BT", "Futura Lt BT", "Futura Md BT", "Futura ZBlk BT", "FuturaBlack BT", "Gabriola", "Galliard BT", "Gautami", "Geeza Pro", "Geometr231 BT", "Geometr231 Hv BT", "Geometr231 Lt BT", "GeoSlab 703 Lt BT", "GeoSlab 703 XBd BT", "Gigi", "Gill Sans", "Gill Sans MT", "Gill Sans MT Condensed", "Gill Sans MT Ext Condensed Bold", "Gill Sans Ultra Bold", "Gill Sans Ultra Bold Condensed", "Gisha", "Gloucester MT Extra Condensed", "GOTHAM", "GOTHAM BOLD", "Goudy Old Style", "Goudy Stout", "GoudyHandtooled BT", "GoudyOLSt BT", "Gujarati Sangam MN", "Gulim", "GulimChe", "Gungsuh", "GungsuhChe", "Gurmukhi MN", "Haettenschweiler", "Harlow Solid Italic", "Harrington", "Heather", "Heiti SC", "Heiti TC", "HELV", "Herald", "High Tower Text", "Hiragino Kaku Gothic ProN", "Hiragino Mincho ProN", "Hoefler Text", "Humanst 521 Cn BT", "Humanst521 BT", "Humanst521 Lt BT", "Imprint MT Shadow", "Incised901 Bd BT", "Incised901 BT", "Incised901 Lt BT", "INCONSOLATA", "Informal Roman", "Informal011 BT", "INTERSTATE", "IrisUPC", "Iskoola Pota", "JasmineUPC", "Jazz LET", "Jenson", "Jester", "Jokerman", "Juice ITC", "Kabel Bk BT", "Kabel Ult BT", "Kailasa", "KaiTi", "Kalinga", "Kannada Sangam MN", "Kartika", "Kaufmann Bd BT", "Kaufmann BT", "Khmer UI", "KodchiangUPC", "Kokila", "Korinna BT", "Kristen ITC", "Krungthep", "Kunstler Script", "Lao UI", "Latha", "Leelawadee", "Letter Gothic", "Levenim MT", "LilyUPC", "Lithograph", "Lithograph Light", "Long Island", "Lydian BT", "Magneto", "Maiandra GD", "Malayalam Sangam MN", "Malgun Gothic", "Mangal", "Marigold", "Marion", "Marker Felt", "Market", "Marlett", "Matisse ITC", "Matura MT Script Capitals", "Meiryo", "Meiryo UI", "Microsoft Himalaya", "Microsoft JhengHei", "Microsoft New Tai Lue", "Microsoft PhagsPa", "Microsoft Tai Le", "Microsoft Uighur", "Microsoft YaHei", "Microsoft Yi Baiti", "MingLiU", "MingLiU_HKSCS", "MingLiU_HKSCS-ExtB", "MingLiU-ExtB", "Minion", "Minion Pro", "Miriam", "Miriam Fixed", "Mistral", "Modern", "Modern No. 20", "Mona Lisa Solid ITC TT", "Mongolian Baiti", "MONO", "MoolBoran", "Mrs Eaves", "MS LineDraw", "MS Mincho", "MS PMincho", "MS Reference Specialty", "MS UI Gothic", "MT Extra", "MUSEO", "MV Boli", "Nadeem", "Narkisim", "NEVIS", "News Gothic", "News GothicMT", "NewsGoth BT", "Niagara Engraved", "Niagara Solid", "Noteworthy", "NSimSun", "Nyala", "OCR A Extended", "Old Century", "Old English Text MT", "Onyx", "Onyx BT", "OPTIMA", "Oriya Sangam MN", "OSAKA", "OzHandicraft BT", "Palace Script MT", "Papyrus", "Parchment", "Party LET", "Pegasus", "Perpetua", "Perpetua Titling MT", "PetitaBold", "Pickwick", "Plantagenet Cherokee", "Playbill", "PMingLiU", "PMingLiU-ExtB", "Poor Richard", "Poster", "PosterBodoni BT", "PRINCETOWN LET", "Pristina", "PTBarnum BT", "Pythagoras", "Raavi", "Rage Italic", "Ravie", "Ribbon131 Bd BT", "Rockwell", "Rockwell Condensed", "Rockwell Extra Bold", "Rod", "Roman", "Sakkal Majalla", "Santa Fe LET", "Savoye LET", "Sceptre", "Script", "Script MT Bold", "SCRIPTINA", "Serifa", "Serifa BT", "Serifa Th BT", "ShelleyVolante BT", "Sherwood", "Shonar Bangla", "Showcard Gothic", "Shruti", "Signboard", "SILKSCREEN", "SimHei", "Simplified Arabic", "Simplified Arabic Fixed", "SimSun", "SimSun-ExtB", "Sinhala Sangam MN", "Sketch Rockwell", "Skia", "Small Fonts", "Snap ITC", "Snell Roundhand", "Socket", "Souvenir Lt BT", "Staccato222 BT", "Steamer", "Stencil", "Storybook", "Styllo", "Subway", "Swis721 BlkEx BT", "Swiss911 XCm BT", "Sylfaen", "Synchro LET", "System", "Tamil Sangam MN", "Technical", "Teletype", "Telugu Sangam MN", "Tempus Sans ITC", "Terminal", "Thonburi", "Traditional Arabic", "Trajan", "TRAJAN PRO", "Tristan", "Tubular", "Tunga", "Tw Cen MT", "Tw Cen MT Condensed", "Tw Cen MT Condensed Extra Bold", "TypoUpright BT", "Unicorn", "Univers", "Univers CE 55 Medium", "Univers Condensed", "Utsaah", "Vagabond", "Vani", "Vijaya", "Viner Hand ITC", "VisualUI", "Vivaldi", "Vladimir Script", "Vrinda", "Westminster", "WHITNEY", "Wide Latin", "ZapfEllipt BT", "ZapfHumnst BT", "ZapfHumnst Dm BT", "Zapfino", "Zurich BlkEx BT", "Zurich Ex BT", "ZWAdobeF"])), i = (i = i.concat(r.options.userDefinedFonts)).filter((function(e, t) {
                    return i.indexOf(e) === t
                }));
                var a = document.getElementsByTagName("body")[0],
                    o = document.createElement("div"),
                    s = document.createElement("div"),
                    c = {},
                    l = {},
                    u = function() {
                        var e = document.createElement("span");
                        return e.style.position = "absolute", e.style.left = "-9999px", e.style.fontSize = "72px", e.style.fontStyle = "normal", e.style.fontWeight = "normal", e.style.letterSpacing = "normal", e.style.lineBreak = "auto", e.style.lineHeight = "normal", e.style.textTransform = "none", e.style.textAlign = "left", e.style.textDecoration = "none", e.style.textShadow = "none", e.style.whiteSpace = "normal", e.style.wordBreak = "normal", e.style.wordSpacing = "normal", e.innerHTML = "mmmmmmmmmmlli", e
                    },
                    d = function() {
                        for (var e = [], t = 0, r = n.length; t < r; t++) {
                            var i = u();
                            i.style.fontFamily = n[t], o.appendChild(i), e.push(i)
                        }
                        return e
                    }();
                a.appendChild(o);
                for (var h = 0, p = n.length; h < p; h++) c[n[h]] = d[h].offsetWidth, l[n[h]] = d[h].offsetHeight;
                var f = function() {
                    for (var e, t, r, a = {}, o = 0, c = i.length; o < c; o++) {
                        for (var l = [], d = 0, h = n.length; d < h; d++) {
                            var p = (e = i[o], t = n[d], r = void 0, (r = u()).style.fontFamily = "'" + e + "'," + t, r);
                            s.appendChild(p), l.push(p)
                        }
                        a[i[o]] = l
                    }
                    return a
                }();
                a.appendChild(s);
                for (var m = [], g = 0, y = i.length; g < y; g++)(function(e) {
                    for (var t = !1, r = 0; r < n.length; r++)
                        if (t = e[r].offsetWidth !== c[n[r]] || e[r].offsetHeight !== l[n[r]]) return t;
                    return t
                })(f[i[g]]) && m.push(i[g]);
                a.removeChild(s), a.removeChild(o), e.addPreprocessedComponent({
                    key: "js_fonts",
                    value: m
                }), t(e)
            }), 1)
        },
        pluginsKey: function(e) {
            return this.options.excludePlugins || (this.isIE() ? this.options.excludeIEPlugins || e.addPreprocessedComponent({
                key: "ie_plugins",
                value: this.getIEPlugins()
            }) : e.addPreprocessedComponent({
                key: "regular_plugins",
                value: this.getRegularPlugins()
            })), e
        },
        getRegularPlugins: function() {
            var e = [];
            if (navigator.plugins)
                for (var t = 0, r = navigator.plugins.length; t < r; t++) navigator.plugins[t] && e.push(navigator.plugins[t]);
            return this.pluginsShouldBeSorted() && (e = e.sort((function(e, t) {
                return e.name > t.name ? 1 : e.name < t.name ? -1 : 0
            }))), this.map(e, (function(e) {
                var t = this.map(e, (function(e) {
                    return [e.type, e.suffixes].join("~")
                })).join(",");
                return [e.name, e.description, t].join("::")
            }), this)
        },
        getIEPlugins: function() {
            var e = [];
            return (Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(window, "ActiveXObject") || "ActiveXObject" in window) && (e = this.map(["AcroPDF.PDF", "Adodb.Stream", "AgControl.AgControl", "DevalVRXCtrl.DevalVRXCtrl.1", "MacromediaFlashPaper.MacromediaFlashPaper", "Msxml2.DOMDocument", "Msxml2.XMLHTTP", "PDF.PdfCtrl", "QuickTime.QuickTime", "QuickTimeCheckObject.QuickTimeCheck.1", "RealPlayer", "RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)", "RealVideo.RealVideo(tm) ActiveX Control (32-bit)", "Scripting.Dictionary", "SWCtl.SWCtl", "Shell.UIHelper", "ShockwaveFlash.ShockwaveFlash", "Skype.Detection", "TDCCtl.TDCCtl", "WMPlayer.OCX", "rmocx.RealPlayer G2 Control", "rmocx.RealPlayer G2 Control.1"], (function(e) {
                try {
                    return new window.ActiveXObject(e), e
                } catch (e) {
                    return null
                }
            }))), navigator.plugins && (e = e.concat(this.getRegularPlugins())), e
        },
        pluginsShouldBeSorted: function() {
            for (var e = !1, t = 0, r = this.options.sortPluginsFor.length; t < r; t++) {
                var n = this.options.sortPluginsFor[t];
                if (navigator.userAgent.match(n)) {
                    e = !0;
                    break
                }
            }
            return e
        },
        touchSupportKey: function(e) {
            return this.options.excludeTouchSupport || e.addPreprocessedComponent({
                key: "touch_support",
                value: this.getTouchSupport()
            }), e
        },
        hardwareConcurrencyKey: function(e) {
            return this.options.excludeHardwareConcurrency || e.addPreprocessedComponent({
                key: "hardware_concurrency",
                value: this.getHardwareConcurrency()
            }), e
        },
        hasSessionStorage: function() {
            try {
                return !!window.sessionStorage
            } catch (e) {
                return !0
            }
        },
        hasLocalStorage: function() {
            try {
                return !!window.localStorage
            } catch (e) {
                return !0
            }
        },
        hasIndexedDB: function() {
            try {
                return !!window.indexedDB
            } catch (e) {
                return !0
            }
        },
        getHardwareConcurrency: function() {
            return navigator.hardwareConcurrency ? navigator.hardwareConcurrency : "unknown"
        },
        getNavigatorCpuClass: function() {
            return navigator.cpuClass ? navigator.cpuClass : "unknown"
        },
        getNavigatorPlatform: function() {
            return navigator.platform ? navigator.platform : "unknown"
        },
        getDoNotTrack: function() {
            return navigator.doNotTrack ? navigator.doNotTrack : navigator.msDoNotTrack ? navigator.msDoNotTrack : window.doNotTrack ? window.doNotTrack : "unknown"
        },
        getTouchSupport: function() {
            var e = 0,
                t = !1;
            void 0 !== navigator.maxTouchPoints ? e = navigator.maxTouchPoints : void 0 !== navigator.msMaxTouchPoints && (e = navigator.msMaxTouchPoints);
            try {
                document.createEvent("TouchEvent"), t = !0
            } catch (e) {}
            return [e, t, "ontouchstart" in window]
        },
        getCanvasFp: function() {
            var e = [],
                t = document.createElement("canvas");
            t.width = 2e3, t.height = 200, t.style.display = "inline";
            var r = t.getContext("2d");
            return r.rect(0, 0, 10, 10), r.rect(2, 2, 6, 6), e.push("canvas winding:" + (!1 === r.isPointInPath(5, 5, "evenodd") ? "yes" : "no")), r.textBaseline = "alphabetic", r.fillStyle = "#f60", r.fillRect(125, 1, 62, 20), r.fillStyle = "#069", this.options.dontUseFakeFontInCanvas ? r.font = "11pt Arial" : r.font = "11pt no-real-font-123", r.fillText("Cwm fjordbank glyphs vext quiz, 😃", 2, 15), r.fillStyle = "rgba(102, 204, 0, 0.2)", r.font = "18pt Arial", r.fillText("Cwm fjordbank glyphs vext quiz, 😃", 4, 45), r.globalCompositeOperation = "multiply", r.fillStyle = "rgb(255,0,255)", r.beginPath(), r.arc(50, 50, 50, 0, 2 * Math.PI, !0), r.closePath(), r.fill(), r.fillStyle = "rgb(0,255,255)", r.beginPath(), r.arc(100, 50, 50, 0, 2 * Math.PI, !0), r.closePath(), r.fill(), r.fillStyle = "rgb(255,255,0)", r.beginPath(), r.arc(75, 100, 50, 0, 2 * Math.PI, !0), r.closePath(), r.fill(), r.fillStyle = "rgb(255,0,255)", r.arc(75, 75, 75, 0, 2 * Math.PI, !0), r.arc(75, 75, 25, 0, 2 * Math.PI, !0), r.fill("evenodd"), t.toDataURL && e.push("canvas fp:" + t.toDataURL()), e.join("~")
        },
        getWebglFp: function() {
            var e, t = function(t) {
                return e.clearColor(0, 0, 0, 1), e.enable(e.DEPTH_TEST), e.depthFunc(e.LEQUAL), e.clear(e.COLOR_BUFFER_BIT | e.DEPTH_BUFFER_BIT), "[" + t[0] + ", " + t[1] + "]"
            };
            if (!(e = this.getWebglCanvas())) return null;
            var r = [],
                n = e.createBuffer();
            e.bindBuffer(e.ARRAY_BUFFER, n);
            var i = new Float32Array([-.2, -.9, 0, .4, -.26, 0, 0, .732134444, 0]);
            e.bufferData(e.ARRAY_BUFFER, i, e.STATIC_DRAW), n.itemSize = 3, n.numItems = 3;
            var a = e.createProgram(),
                o = e.createShader(e.VERTEX_SHADER);
            e.shaderSource(o, "attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"), e.compileShader(o);
            var s = e.createShader(e.FRAGMENT_SHADER);
            e.shaderSource(s, "precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"), e.compileShader(s), e.attachShader(a, o), e.attachShader(a, s), e.linkProgram(a), e.useProgram(a), a.vertexPosAttrib = e.getAttribLocation(a, "attrVertex"), a.offsetUniform = e.getUniformLocation(a, "uniformOffset"), e.enableVertexAttribArray(a.vertexPosArray), e.vertexAttribPointer(a.vertexPosAttrib, n.itemSize, e.FLOAT, !1, 0, 0), e.uniform2f(a.offsetUniform, 1, 1), e.drawArrays(e.TRIANGLE_STRIP, 0, n.numItems);
            try {
                r.push(e.canvas.toDataURL())
            } catch (e) {}
            r.push("extensions:" + (e.getSupportedExtensions() || []).join(";")), r.push("webgl aliased line width range:" + t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))), r.push("webgl aliased point size range:" + t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))), r.push("webgl alpha bits:" + e.getParameter(e.ALPHA_BITS)), r.push("webgl antialiasing:" + (e.getContextAttributes().antialias ? "yes" : "no")), r.push("webgl blue bits:" + e.getParameter(e.BLUE_BITS)), r.push("webgl depth bits:" + e.getParameter(e.DEPTH_BITS)), r.push("webgl green bits:" + e.getParameter(e.GREEN_BITS)), r.push("webgl max anisotropy:" + function(e) {
                var t = e.getExtension("EXT_texture_filter_anisotropic") || e.getExtension("WEBKIT_EXT_texture_filter_anisotropic") || e.getExtension("MOZ_EXT_texture_filter_anisotropic");
                if (t) {
                    var r = e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
                    return 0 === r && (r = 2), r
                }
                return null
            }(e)), r.push("webgl max combined texture image units:" + e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)), r.push("webgl max cube map texture size:" + e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)), r.push("webgl max fragment uniform vectors:" + e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)), r.push("webgl max render buffer size:" + e.getParameter(e.MAX_RENDERBUFFER_SIZE)), r.push("webgl max texture image units:" + e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)), r.push("webgl max texture size:" + e.getParameter(e.MAX_TEXTURE_SIZE)), r.push("webgl max varying vectors:" + e.getParameter(e.MAX_VARYING_VECTORS)), r.push("webgl max vertex attribs:" + e.getParameter(e.MAX_VERTEX_ATTRIBS)), r.push("webgl max vertex texture image units:" + e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)), r.push("webgl max vertex uniform vectors:" + e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)), r.push("webgl max viewport dims:" + t(e.getParameter(e.MAX_VIEWPORT_DIMS))), r.push("webgl red bits:" + e.getParameter(e.RED_BITS)), r.push("webgl renderer:" + e.getParameter(e.RENDERER)), r.push("webgl shading language version:" + e.getParameter(e.SHADING_LANGUAGE_VERSION)), r.push("webgl stencil bits:" + e.getParameter(e.STENCIL_BITS)), r.push("webgl vendor:" + e.getParameter(e.VENDOR)), r.push("webgl version:" + e.getParameter(e.VERSION));
            try {
                var c = e.getExtension("WEBGL_debug_renderer_info");
                c && (r.push("webgl unmasked vendor:" + e.getParameter(c.UNMASKED_VENDOR_WEBGL)), r.push("webgl unmasked renderer:" + e.getParameter(c.UNMASKED_RENDERER_WEBGL)))
            } catch (e) {}
            return e.getShaderPrecisionFormat ? (r.push("webgl vertex shader high float precision:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_FLOAT).precision), r.push("webgl vertex shader high float precision rangeMin:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_FLOAT).rangeMin), r.push("webgl vertex shader high float precision rangeMax:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_FLOAT).rangeMax), r.push("webgl vertex shader medium float precision:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_FLOAT).precision), r.push("webgl vertex shader medium float precision rangeMin:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_FLOAT).rangeMin), r.push("webgl vertex shader medium float precision rangeMax:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_FLOAT).rangeMax), r.push("webgl vertex shader low float precision:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.LOW_FLOAT).precision), r.push("webgl vertex shader low float precision rangeMin:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.LOW_FLOAT).rangeMin), r.push("webgl vertex shader low float precision rangeMax:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.LOW_FLOAT).rangeMax), r.push("webgl fragment shader high float precision:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT).precision), r.push("webgl fragment shader high float precision rangeMin:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT).rangeMin), r.push("webgl fragment shader high float precision rangeMax:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT).rangeMax), r.push("webgl fragment shader medium float precision:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_FLOAT).precision), r.push("webgl fragment shader medium float precision rangeMin:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_FLOAT).rangeMin), r.push("webgl fragment shader medium float precision rangeMax:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_FLOAT).rangeMax), r.push("webgl fragment shader low float precision:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.LOW_FLOAT).precision), r.push("webgl fragment shader low float precision rangeMin:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.LOW_FLOAT).rangeMin), r.push("webgl fragment shader low float precision rangeMax:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.LOW_FLOAT).rangeMax), r.push("webgl vertex shader high int precision:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_INT).precision), r.push("webgl vertex shader high int precision rangeMin:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_INT).rangeMin), r.push("webgl vertex shader high int precision rangeMax:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_INT).rangeMax), r.push("webgl vertex shader medium int precision:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_INT).precision), r.push("webgl vertex shader medium int precision rangeMin:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_INT).rangeMin), r.push("webgl vertex shader medium int precision rangeMax:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_INT).rangeMax), r.push("webgl vertex shader low int precision:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.LOW_INT).precision), r.push("webgl vertex shader low int precision rangeMin:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.LOW_INT).rangeMin), r.push("webgl vertex shader low int precision rangeMax:" + e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.LOW_INT).rangeMax), r.push("webgl fragment shader high int precision:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_INT).precision), r.push("webgl fragment shader high int precision rangeMin:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_INT).rangeMin), r.push("webgl fragment shader high int precision rangeMax:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_INT).rangeMax), r.push("webgl fragment shader medium int precision:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_INT).precision), r.push("webgl fragment shader medium int precision rangeMin:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_INT).rangeMin), r.push("webgl fragment shader medium int precision rangeMax:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_INT).rangeMax), r.push("webgl fragment shader low int precision:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.LOW_INT).precision), r.push("webgl fragment shader low int precision rangeMin:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.LOW_INT).rangeMin), r.push("webgl fragment shader low int precision rangeMax:" + e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.LOW_INT).rangeMax), r.join("~")) : r.join("~")
        },
        getWebglVendorAndRenderer: function() {
            try {
                var e = this.getWebglCanvas(),
                    t = e.getExtension("WEBGL_debug_renderer_info");
                return e.getParameter(t.UNMASKED_VENDOR_WEBGL) + "~" + e.getParameter(t.UNMASKED_RENDERER_WEBGL)
            } catch (e) {
                return null
            }
        },
        getAdBlock: function() {
            var e = document.createElement("div");
            e.innerHTML = "&nbsp;", e.className = "adsbox";
            var t = !1;
            try {
                document.body.appendChild(e), t = 0 === document.getElementsByClassName("adsbox")[0].offsetHeight, document.body.removeChild(e)
            } catch (e) {
                t = !1
            }
            return t
        },
        getHasLiedLanguages: function() {
            if (void 0 !== navigator.languages) try {
                if (navigator.languages[0].substr(0, 2) !== navigator.language.substr(0, 2)) return !0
            } catch (e) {
                return !0
            }
            return !1
        },
        getHasLiedResolution: function() {
            return window.screen.width < window.screen.availWidth || window.screen.height < window.screen.availHeight
        },
        getHasLiedOs: function() {
            var e, t = navigator.userAgent.toLowerCase(),
                r = navigator.oscpu,
                n = navigator.platform.toLowerCase();
            if (e = t.indexOf("windows phone") >= 0 ? "Windows Phone" : t.indexOf("win") >= 0 ? "Windows" : t.indexOf("android") >= 0 ? "Android" : t.indexOf("linux") >= 0 ? "Linux" : t.indexOf("iphone") >= 0 || t.indexOf("ipad") >= 0 ? "iOS" : t.indexOf("mac") >= 0 ? "Mac" : "Other", ("ontouchstart" in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0) && "Windows Phone" !== e && "Android" !== e && "iOS" !== e && "Other" !== e) return !0;
            if (void 0 !== r) {
                if ((r = r.toLowerCase()).indexOf("win") >= 0 && "Windows" !== e && "Windows Phone" !== e) return !0;
                if (r.indexOf("linux") >= 0 && "Linux" !== e && "Android" !== e) return !0;
                if (r.indexOf("mac") >= 0 && "Mac" !== e && "iOS" !== e) return !0;
                if ((-1 === r.indexOf("win") && -1 === r.indexOf("linux") && -1 === r.indexOf("mac")) != ("Other" === e)) return !0
            }
            return n.indexOf("win") >= 0 && "Windows" !== e && "Windows Phone" !== e || (n.indexOf("linux") >= 0 || n.indexOf("android") >= 0 || n.indexOf("pike") >= 0) && "Linux" !== e && "Android" !== e || (n.indexOf("mac") >= 0 || n.indexOf("ipad") >= 0 || n.indexOf("ipod") >= 0 || n.indexOf("iphone") >= 0) && "Mac" !== e && "iOS" !== e || (-1 === n.indexOf("win") && -1 === n.indexOf("linux") && -1 === n.indexOf("mac")) != ("Other" === e) || void 0 === navigator.plugins && "Windows" !== e && "Windows Phone" !== e
        },
        getHasLiedBrowser: function() {
            var e, t = navigator.userAgent.toLowerCase(),
                r = navigator.productSub;
            if (("Chrome" == (e = t.indexOf("firefox") >= 0 ? "Firefox" : t.indexOf("opera") >= 0 || t.indexOf("opr") >= 0 ? "Opera" : t.indexOf("chrome") >= 0 ? "Chrome" : t.indexOf("safari") >= 0 ? "Safari" : t.indexOf("trident") >= 0 ? "Internet Explorer" : "Other") || "Safari" === e || "Opera" === e) && "20030107" !== r) return !0;
            var n, i = eval.toString().length;
            if (37 === i && "Safari" !== e && "Firefox" !== e && "Other" !== e) return !0;
            if (39 === i && "Internet Explorer" !== e && "Other" !== e) return !0;
            if (33 === i && "Chrome" !== e && "Opera" !== e && "Other" !== e) return !0;
            try {
                throw "a"
            } catch (e) {
                try {
                    e.toSource(), n = !0
                } catch (e) {
                    n = !1
                }
            }
            return !(!n || "Firefox" === e || "Other" === e)
        },
        isCanvasSupported: function() {
            var e = document.createElement("canvas");
            return !(!e.getContext || !e.getContext("2d"))
        },
        isWebGlSupported: function() {
            if (!this.isCanvasSupported()) return !1;
            var e = this.getWebglCanvas();
            return !!window.WebGLRenderingContext && !!e
        },
        isIE: function() {
            return "Microsoft Internet Explorer" === navigator.appName || !("Netscape" !== navigator.appName || !/Trident/.test(navigator.userAgent))
        },
        hasSwfObjectLoaded: function() {
            return void 0 !== window.swfobject
        },
        hasMinFlashInstalled: function() {
            return window.swfobject.hasFlashPlayerVersion("9.0.0")
        },
        addFlashDivNode: function() {
            var e = document.createElement("div");
            e.setAttribute("id", this.options.swfContainerId), document.body.appendChild(e)
        },
        loadSwfAndDetectFonts: function(e) {
            var t = "___fp_swf_loaded";
            window[t] = function(t) {
                e(t)
            };
            var r = this.options.swfContainerId;
            this.addFlashDivNode();
            var n = {
                onReady: t
            };
            window.swfobject.embedSWF(this.options.swfPath, r, "1", "1", "9.0.0", !1, n, {
                allowScriptAccess: "always",
                menu: "false"
            }, {})
        },
        getWebglCanvas: function() {
            var e = document.createElement("canvas"),
                t = null;
            try {
                t = e.getContext("webgl") || e.getContext("experimental-webgl")
            } catch (e) {}
            return t || (t = null), t
        },
        each: function(e, t, r) {
            if (null !== e)
                if (this.nativeForEach && e.forEach === this.nativeForEach) e.forEach(t, r);
                else if (e.length === +e.length) {
                for (var n = 0, i = e.length; n < i; n++)
                    if (t.call(r, e[n], n, e) === {}) return
            } else
                for (var a in e)
                    if (e.hasOwnProperty(a) && t.call(r, e[a], a, e) === {}) return
        },
        map: function(e, t, r) {
            var n = [];
            return null == e ? n : this.nativeMap && e.map === this.nativeMap ? e.map(t, r) : (this.each(e, (function(e, i, a) {
                n[n.length] = t.call(r, e, i, a)
            })), n)
        },
        x64Add: function(e, t) {
            e = [e[0] >>> 16, 65535 & e[0], e[1] >>> 16, 65535 & e[1]], t = [t[0] >>> 16, 65535 & t[0], t[1] >>> 16, 65535 & t[1]];
            var r = [0, 0, 0, 0];
            return r[3] += e[3] + t[3], r[2] += r[3] >>> 16, r[3] &= 65535, r[2] += e[2] + t[2], r[1] += r[2] >>> 16, r[2] &= 65535, r[1] += e[1] + t[1], r[0] += r[1] >>> 16, r[1] &= 65535, r[0] += e[0] + t[0], r[0] &= 65535, [r[0] << 16 | r[1], r[2] << 16 | r[3]]
        },
        x64Multiply: function(e, t) {
            e = [e[0] >>> 16, 65535 & e[0], e[1] >>> 16, 65535 & e[1]], t = [t[0] >>> 16, 65535 & t[0], t[1] >>> 16, 65535 & t[1]];
            var r = [0, 0, 0, 0];
            return r[3] += e[3] * t[3], r[2] += r[3] >>> 16, r[3] &= 65535, r[2] += e[2] * t[3], r[1] += r[2] >>> 16, r[2] &= 65535, r[2] += e[3] * t[2], r[1] += r[2] >>> 16, r[2] &= 65535, r[1] += e[1] * t[3], r[0] += r[1] >>> 16, r[1] &= 65535, r[1] += e[2] * t[2], r[0] += r[1] >>> 16, r[1] &= 65535, r[1] += e[3] * t[1], r[0] += r[1] >>> 16, r[1] &= 65535, r[0] += e[0] * t[3] + e[1] * t[2] + e[2] * t[1] + e[3] * t[0], r[0] &= 65535, [r[0] << 16 | r[1], r[2] << 16 | r[3]]
        },
        x64Rotl: function(e, t) {
            return 32 == (t %= 64) ? [e[1], e[0]] : t < 32 ? [e[0] << t | e[1] >>> 32 - t, e[1] << t | e[0] >>> 32 - t] : (t -= 32, [e[1] << t | e[0] >>> 32 - t, e[0] << t | e[1] >>> 32 - t])
        },
        x64LeftShift: function(e, t) {
            return 0 == (t %= 64) ? e : t < 32 ? [e[0] << t | e[1] >>> 32 - t, e[1] << t] : [e[1] << t - 32, 0]
        },
        x64Xor: function(e, t) {
            return [e[0] ^ t[0], e[1] ^ t[1]]
        },
        x64Fmix: function(e) {
            return e = this.x64Xor(e, [0, e[0] >>> 1]), e = this.x64Multiply(e, [4283543511, 3981806797]), e = this.x64Xor(e, [0, e[0] >>> 1]), e = this.x64Multiply(e, [3301882366, 444984403]), this.x64Xor(e, [0, e[0] >>> 1])
        },
        x64hash128: function(e, t) {
            t = t || 0;
            for (var r = (e = e || "").length % 16, n = e.length - r, i = [0, t], a = [0, t], o = [0, 0], s = [0, 0], c = [2277735313, 289559509], l = [1291169091, 658871167], u = 0; u < n; u += 16) o = [255 & e.charCodeAt(u + 4) | (255 & e.charCodeAt(u + 5)) << 8 | (255 & e.charCodeAt(u + 6)) << 16 | (255 & e.charCodeAt(u + 7)) << 24, 255 & e.charCodeAt(u) | (255 & e.charCodeAt(u + 1)) << 8 | (255 & e.charCodeAt(u + 2)) << 16 | (255 & e.charCodeAt(u + 3)) << 24], s = [255 & e.charCodeAt(u + 12) | (255 & e.charCodeAt(u + 13)) << 8 | (255 & e.charCodeAt(u + 14)) << 16 | (255 & e.charCodeAt(u + 15)) << 24, 255 & e.charCodeAt(u + 8) | (255 & e.charCodeAt(u + 9)) << 8 | (255 & e.charCodeAt(u + 10)) << 16 | (255 & e.charCodeAt(u + 11)) << 24], o = this.x64Multiply(o, c), o = this.x64Rotl(o, 31), o = this.x64Multiply(o, l), i = this.x64Xor(i, o), i = this.x64Rotl(i, 27), i = this.x64Add(i, a), i = this.x64Add(this.x64Multiply(i, [0, 5]), [0, 1390208809]), s = this.x64Multiply(s, l), s = this.x64Rotl(s, 33), s = this.x64Multiply(s, c), a = this.x64Xor(a, s), a = this.x64Rotl(a, 31), a = this.x64Add(a, i), a = this.x64Add(this.x64Multiply(a, [0, 5]), [0, 944331445]);
            switch (o = [0, 0], s = [0, 0], r) {
                case 15:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(u + 14)], 48));
                case 14:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(u + 13)], 40));
                case 13:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(u + 12)], 32));
                case 12:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(u + 11)], 24));
                case 11:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(u + 10)], 16));
                case 10:
                    s = this.x64Xor(s, this.x64LeftShift([0, e.charCodeAt(u + 9)], 8));
                case 9:
                    s = this.x64Xor(s, [0, e.charCodeAt(u + 8)]), s = this.x64Multiply(s, l), s = this.x64Rotl(s, 33), s = this.x64Multiply(s, c), a = this.x64Xor(a, s);
                case 8:
                    o = this.x64Xor(o, this.x64LeftShift([0, e.charCodeAt(u + 7)], 56));
                case 7:
                    o = this.x64Xor(o, this.x64LeftShift([0, e.charCodeAt(u + 6)], 48));
                case 6:
                    o = this.x64Xor(o, this.x64LeftShift([0, e.charCodeAt(u + 5)], 40));
                case 5:
                    o = this.x64Xor(o, this.x64LeftShift([0, e.charCodeAt(u + 4)], 32));
                case 4:
                    o = this.x64Xor(o, this.x64LeftShift([0, e.charCodeAt(u + 3)], 24));
                case 3:
                    o = this.x64Xor(o, this.x64LeftShift([0, e.charCodeAt(u + 2)], 16));
                case 2:
                    o = this.x64Xor(o, this.x64LeftShift([0, e.charCodeAt(u + 1)], 8));
                case 1:
                    o = this.x64Xor(o, [0, e.charCodeAt(u)]), o = this.x64Multiply(o, c), o = this.x64Rotl(o, 31), o = this.x64Multiply(o, l), i = this.x64Xor(i, o)
            }
            return i = this.x64Xor(i, [0, e.length]), a = this.x64Xor(a, [0, e.length]), i = this.x64Add(i, a), a = this.x64Add(a, i), i = this.x64Fmix(i), a = this.x64Fmix(a), i = this.x64Add(i, a), a = this.x64Add(a, i), ("00000000" + (i[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (i[1] >>> 0).toString(16)).slice(-8) + ("00000000" + (a[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (a[1] >>> 0).toString(16)).slice(-8)
        }
    }, sr.VERSION = "1.8.0", sr);
    const lr = !!window.GM_xmlhttpRequest,
        ur = (e, t = {}) => {
            const {
                method: r = "GET",
                headers: n,
                responseType: i = "json",
                data: a,
                cors: o = !1,
                credentials: s
            } = t;
            return o ? fetch(e, {
                body: a,
                headers: n,
                method: r,
                mode: "cors",
                credentials: s
            }).then(e => e.json()) : new Promise((t, o) => {
                if (!lr) return o("GM_XHR MISSING");
                window.GM_xmlhttpRequest({
                    method: r,
                    url: e,
                    headers: n,
                    responseType: i,
                    data: a,
                    onload({
                        status: e,
                        responseText: r,
                        statusText: n
                    }) {
                        if (e >= 200 && e < 300)
                            if ("json" === i) {
                                const e = JSON.parse(r);
                                t(e)
                            } else t(r);
                        else o(n)
                    },
                    onerror(e) {
                        o(e)
                    }
                })
            })
        };
    let dr = "",
        hr = "",
        pr = "",
        fr = null;
    const mr = e => new Promise(t => {
            setTimeout(t, e)
        }),
        gr = () => (fr || (fr = new Promise((e, t) => {
            (async () => {
                const e = await ur("https://biz.caiyunapp.com/test_cookies", {
                    cors: !0,
                    credentials: "include",
                    headers: {
                        "X-Authorization": "token " + Y.data.cyweb_token
                    }
                });
                if ("ok" !== e.status || !e.cookies.cy_user) return !1; {
                    const t = JSON.parse(decodeURIComponent(e.cookies.cy_user));
                    hr = t._id || "5a096eec830f7876a48aac47"
                }
            })().then(async () => {
                if (!hr && !dr) {
                    (new cr).get(e => dr = e);
                    let e = 5;
                    for (; !dr || --e > 0;) await mr(300);
                    if (!dr) throw new Error("timeout: get browser id ")
                }
                return ur("https://api.interpreter.caiyunai.com/v1/page/auth", {
                    cors: !0,
                    method: "POST",
                    headers: {
                        "X-Authorization": "token " + Y.data.cyweb_token,
                        "Content-Type": "application/json"
                    },
                    data: JSON.stringify({
                        browser_id: dr,
                        device_id: "",
                        os_type: "web",
                        title: document.title,
                        url: document.URL,
                        user_id: hr
                    })
                })
            }).then(e => {
                if (-1 === e.auth_type || !e.page_id) throw new Error("Caiyun api out of limit.");
                pr = e.page_id
            }).then(e).catch(t)
        })), fr);
    var yr = Object.prototype.hasOwnProperty,
        vr = Array.isArray,
        wr = function() {
            for (var e = [], t = 0; t < 256; ++t) e.push("%" + ((t < 16 ? "0" : "") + t.toString(16)).toUpperCase());
            return e
        }(),
        _r = function(e, t) {
            for (var r = t && t.plainObjects ? Object.create(null) : {}, n = 0; n < e.length; ++n) void 0 !== e[n] && (r[n] = e[n]);
            return r
        },
        Sr = {
            arrayToObject: _r,
            assign: function(e, t) {
                return Object.keys(t).reduce((function(e, r) {
                    return e[r] = t[r], e
                }), e)
            },
            combine: function(e, t) {
                return [].concat(e, t)
            },
            compact: function(e) {
                for (var t = [{
                        obj: {
                            o: e
                        },
                        prop: "o"
                    }], r = [], n = 0; n < t.length; ++n)
                    for (var i = t[n], a = i.obj[i.prop], o = Object.keys(a), s = 0; s < o.length; ++s) {
                        var c = o[s],
                            l = a[c];
                        "object" == typeof l && null !== l && -1 === r.indexOf(l) && (t.push({
                            obj: a,
                            prop: c
                        }), r.push(l))
                    }
                return function(e) {
                    for (; e.length > 1;) {
                        var t = e.pop(),
                            r = t.obj[t.prop];
                        if (vr(r)) {
                            for (var n = [], i = 0; i < r.length; ++i) void 0 !== r[i] && n.push(r[i]);
                            t.obj[t.prop] = n
                        }
                    }
                }(t), e
            },
            decode: function(e, t, r) {
                var n = e.replace(/\+/g, " ");
                if ("iso-8859-1" === r) return n.replace(/%[0-9a-f]{2}/gi, unescape);
                try {
                    return decodeURIComponent(n)
                } catch (e) {
                    return n
                }
            },
            encode: function(e, t, r) {
                if (0 === e.length) return e;
                var n = e;
                if ("symbol" == typeof e ? n = Symbol.prototype.toString.call(e) : "string" != typeof e && (n = String(e)), "iso-8859-1" === r) return escape(n).replace(/%u[0-9a-f]{4}/gi, (function(e) {
                    return "%26%23" + parseInt(e.slice(2), 16) + "%3B"
                }));
                for (var i = "", a = 0; a < n.length; ++a) {
                    var o = n.charCodeAt(a);
                    45 === o || 46 === o || 95 === o || 126 === o || o >= 48 && o <= 57 || o >= 65 && o <= 90 || o >= 97 && o <= 122 ? i += n.charAt(a) : o < 128 ? i += wr[o] : o < 2048 ? i += wr[192 | o >> 6] + wr[128 | 63 & o] : o < 55296 || o >= 57344 ? i += wr[224 | o >> 12] + wr[128 | o >> 6 & 63] + wr[128 | 63 & o] : (a += 1, o = 65536 + ((1023 & o) << 10 | 1023 & n.charCodeAt(a)), i += wr[240 | o >> 18] + wr[128 | o >> 12 & 63] + wr[128 | o >> 6 & 63] + wr[128 | 63 & o])
                }
                return i
            },
            isBuffer: function(e) {
                return !(!e || "object" != typeof e) && !!(e.constructor && e.constructor.isBuffer && e.constructor.isBuffer(e))
            },
            isRegExp: function(e) {
                return "[object RegExp]" === Object.prototype.toString.call(e)
            },
            maybeMap: function(e, t) {
                if (vr(e)) {
                    for (var r = [], n = 0; n < e.length; n += 1) r.push(t(e[n]));
                    return r
                }
                return t(e)
            },
            merge: function e(t, r, n) {
                if (!r) return t;
                if ("object" != typeof r) {
                    if (vr(t)) t.push(r);
                    else {
                        if (!t || "object" != typeof t) return [t, r];
                        (n && (n.plainObjects || n.allowPrototypes) || !yr.call(Object.prototype, r)) && (t[r] = !0)
                    }
                    return t
                }
                if (!t || "object" != typeof t) return [t].concat(r);
                var i = t;
                return vr(t) && !vr(r) && (i = _r(t, n)), vr(t) && vr(r) ? (r.forEach((function(r, i) {
                    if (yr.call(t, i)) {
                        var a = t[i];
                        a && "object" == typeof a && r && "object" == typeof r ? t[i] = e(a, r, n) : t.push(r)
                    } else t[i] = r
                })), t) : Object.keys(r).reduce((function(t, i) {
                    var a = r[i];
                    return yr.call(t, i) ? t[i] = e(t[i], a, n) : t[i] = a, t
                }), i)
            }
        },
        Er = String.prototype.replace,
        br = /%20/g,
        xr = {
            RFC1738: "RFC1738",
            RFC3986: "RFC3986"
        },
        Tr = Sr.assign({
            default: xr.RFC3986,
            formatters: {
                RFC1738: function(e) {
                    return Er.call(e, br, "+")
                },
                RFC3986: function(e) {
                    return String(e)
                }
            }
        }, xr),
        Cr = Object.prototype.hasOwnProperty,
        kr = {
            brackets: function(e) {
                return e + "[]"
            },
            comma: "comma",
            indices: function(e, t) {
                return e + "[" + t + "]"
            },
            repeat: function(e) {
                return e
            }
        },
        Ar = Array.isArray,
        Mr = Array.prototype.push,
        Rr = function(e, t) {
            Mr.apply(e, Ar(t) ? t : [t])
        },
        Ir = Date.prototype.toISOString,
        Pr = Tr.default,
        Or = {
            addQueryPrefix: !1,
            allowDots: !1,
            charset: "utf-8",
            charsetSentinel: !1,
            delimiter: "&",
            encode: !0,
            encoder: Sr.encode,
            encodeValuesOnly: !1,
            format: Pr,
            formatter: Tr.formatters[Pr],
            indices: !1,
            serializeDate: function(e) {
                return Ir.call(e)
            },
            skipNulls: !1,
            strictNullHandling: !1
        },
        Dr = function e(t, r, n, i, a, o, s, c, l, u, d, h, p) {
            var f, m = t;
            if ("function" == typeof s ? m = s(r, m) : m instanceof Date ? m = u(m) : "comma" === n && Ar(m) && (m = Sr.maybeMap(m, (function(e) {
                    return e instanceof Date ? u(e) : e
                })).join(",")), null === m) {
                if (i) return o && !h ? o(r, Or.encoder, p, "key") : r;
                m = ""
            }
            if ("string" == typeof(f = m) || "number" == typeof f || "boolean" == typeof f || "symbol" == typeof f || "bigint" == typeof f || Sr.isBuffer(m)) return o ? [d(h ? r : o(r, Or.encoder, p, "key")) + "=" + d(o(m, Or.encoder, p, "value"))] : [d(r) + "=" + d(String(m))];
            var g, y = [];
            if (void 0 === m) return y;
            if (Ar(s)) g = s;
            else {
                var v = Object.keys(m);
                g = c ? v.sort(c) : v
            }
            for (var w = 0; w < g.length; ++w) {
                var _ = g[w],
                    S = m[_];
                if (!a || null !== S) {
                    var E = Ar(m) ? "function" == typeof n ? n(r, _) : r : r + (l ? "." + _ : "[" + _ + "]");
                    Rr(y, e(S, E, n, i, a, o, s, c, l, u, d, h, p))
                }
            }
            return y
        },
        Fr = (Object.prototype.hasOwnProperty, Array.isArray, function(e, t) {
            var r, n = e,
                i = function(e) {
                    if (!e) return Or;
                    if (null !== e.encoder && void 0 !== e.encoder && "function" != typeof e.encoder) throw new TypeError("Encoder has to be a function.");
                    var t = e.charset || Or.charset;
                    if (void 0 !== e.charset && "utf-8" !== e.charset && "iso-8859-1" !== e.charset) throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");
                    var r = Tr.default;
                    if (void 0 !== e.format) {
                        if (!Cr.call(Tr.formatters, e.format)) throw new TypeError("Unknown format option provided.");
                        r = e.format
                    }
                    var n = Tr.formatters[r],
                        i = Or.filter;
                    return ("function" == typeof e.filter || Ar(e.filter)) && (i = e.filter), {
                        addQueryPrefix: "boolean" == typeof e.addQueryPrefix ? e.addQueryPrefix : Or.addQueryPrefix,
                        allowDots: void 0 === e.allowDots ? Or.allowDots : !!e.allowDots,
                        charset: t,
                        charsetSentinel: "boolean" == typeof e.charsetSentinel ? e.charsetSentinel : Or.charsetSentinel,
                        delimiter: void 0 === e.delimiter ? Or.delimiter : e.delimiter,
                        encode: "boolean" == typeof e.encode ? e.encode : Or.encode,
                        encoder: "function" == typeof e.encoder ? e.encoder : Or.encoder,
                        encodeValuesOnly: "boolean" == typeof e.encodeValuesOnly ? e.encodeValuesOnly : Or.encodeValuesOnly,
                        filter: i,
                        formatter: n,
                        serializeDate: "function" == typeof e.serializeDate ? e.serializeDate : Or.serializeDate,
                        skipNulls: "boolean" == typeof e.skipNulls ? e.skipNulls : Or.skipNulls,
                        sort: "function" == typeof e.sort ? e.sort : null,
                        strictNullHandling: "boolean" == typeof e.strictNullHandling ? e.strictNullHandling : Or.strictNullHandling
                    }
                }(t);
            "function" == typeof i.filter ? n = (0, i.filter)("", n) : Ar(i.filter) && (r = i.filter);
            var a, o = [];
            if ("object" != typeof n || null === n) return "";
            a = t && t.arrayFormat in kr ? t.arrayFormat : t && "indices" in t ? t.indices ? "indices" : "repeat" : "indices";
            var s = kr[a];
            r || (r = Object.keys(n)), i.sort && r.sort(i.sort);
            for (var c = 0; c < r.length; ++c) {
                var l = r[c];
                i.skipNulls && null === n[l] || Rr(o, Dr(n[l], l, s, i.strictNullHandling, i.skipNulls, i.encode ? i.encoder : null, i.filter, i.sort, i.allowDots, i.serializeDate, i.formatter, i.encodeValuesOnly, i.charset))
            }
            var u = o.join(i.delimiter),
                d = !0 === i.addQueryPrefix ? "?" : "";
            return i.charsetSentinel && ("iso-8859-1" === i.charset ? d += "utf8=%26%2310003%3B&" : d += "utf8=%E2%9C%93&"), u.length > 0 ? d + u : ""
        });
    const Br = (e, t, r) => {
            t.forEach(t => {
                let n = t,
                    i = "";
                for (; n >= 0;) {
                    n--;
                    let t = e.shift();
                    y(t) && (t || (t = "……"), i += t + "\n")
                }
                i && r.push(i.slice(0, i.length - 1))
            })
        },
        jr = e => {
            let t = [],
                r = e.map(e => S(e));
            return r.forEach(e => {
                let r = [...e].filter(e => "\n" === e).length;
                t.push(r)
            }), [r.join("\n"), t]
        },
        Lr = (e, t = 4e3) => {
            let r = "",
                n = [],
                i = 0;
            return e.split("\n").forEach(e => {
                r += e, i += new Blob([e]).size, i > t ? (n.push(r), i = 0, r = "") : r += "\n"
            }), r && n.push(r.replace(/\n$/, "")), n
        },
        Nr = async e => {
            try {
                let t = I("caiyuLimit");
                if (t && Date.now() - t < 36e5) return [];
                let [r, n] = jr(e), i = Lr(r), a = (await Promise.all(i.map(e => (async (e, t = "ja") => {
                    await gr(), await fr;
                    const r = await ur("https://api.interpreter.caiyunai.com/v1/page/translator", {
                        cors: !0,
                        method: "POST",
                        headers: {
                            "X-Authorization": "token " + Y.data.cyweb_token,
                            "Content-Type": "application/json"
                        },
                        data: JSON.stringify({
                            cached: !0,
                            os_type: "web",
                            page_id: pr,
                            replaced: !0,
                            request_id: dr || hr,
                            source: e,
                            trans_type: t + "2zh",
                            url: document.URL
                        })
                    });
                    return r && r.target ? r.target.map(e => e.target) : []
                })(e.split("\n"))))).reduce((e, t) => e.concat(t)), o = [];
                return Br(a, n, o), o
            } catch (e) {
                return "Caiyun api out of limit." === e.message && I("caiyuLimit", Date.now()), x(), []
            }
        }, Hr = async e => {
            try {
                let [t, r] = jr(e), n = Lr(t), i = (await Promise.all(n.map(e => (async e => {
                    let t = Y.data.language || "zh-CN",
                        r = Fr({
                            client: "gtx",
                            sl: "ja",
                            tl: t,
                            hl: t,
                            ie: "UTF-8",
                            oe: "UTF-8"
                        });
                    ["at", "bd", "ex", "ld", "md", "qca", "rw", "rm", "ss", "t"].forEach(e => {
                        r += "&dt=" + e
                    });
                    const n = Fr({
                        q: e
                    });
                    return (e => {
                        if (e[0] && e[0].length) {
                            return e[0].map(e => e[0]).join("").split("\n")
                        }
                        return []
                    })(await ur("https://translate.google.com/translate_a/single?" + r, {
                        data: n,
                        method: "POST",
                        headers: {
                            accept: "*/*",
                            "content-type": "application/x-www-form-urlencoded;charset=UTF-8",
                            referer: "https://translate.google.com",
                            origin: "https://translate.google.com"
                        }
                    }))
                })(e)))).reduce((e, t) => e.concat(t)), a = [];
                return Br(i, r, a), a
            } catch (e) {
                return x(), []
            }
        }, Ur = ["text", "select", "comment", "title", "actionComment", "actionComment2", "reactionComment", "resultLoseComment", "resultStartComment", "resultWinComment", "characterComment", "producerComment", "comment1", "comment2"], zr = async e => {
            const t = await (async () => {
                if (!or) {
                    let e = await ie("caiyun-prefix");
                    e || (e = await ee("/data/etc/caiyun-prefix.csv"), ae("caiyun-prefix", e));
                    const t = re(e);
                    Je(t, "text").forEach(e => {
                        const t = w(e.text),
                            r = w(e.fixed);
                        t && ar.set(t, r)
                    }), or = !0
                }
                return ar
            })();
            return A(e, t)
        }, Gr = new Map, $r = async (e, t, r, n = !1) => {
            if (!e.length) return;
            const i = await Be(),
                a = await Ne(),
                {
                    textInfo: o,
                    textList: s
                } = ((e, t, r) => {
                    const n = [],
                        i = [];
                    return e.forEach((e, a) => {
                        Ur.forEach(o => {
                            let s = S(e[o]);
                            e[o] && (t.has(s) ? e[o] = v(t.get(s)) : r.has(s) ? e[o] = v(r.get(s)) : (n.push({
                                key: o,
                                index: a
                            }), i.push(s)))
                        })
                    }), {
                        textInfo: n,
                        textList: i
                    }
                })(e, i, a);
            if (!o.length) return;
            const c = t || e;
            let l = !1,
                u = [];
            if (Gr.has(c)) l = !0, u = Gr.get(c);
            else {
                let e = Y.data.trans_api,
                    t = [];
                if ("on" === U.auto && !n) {
                    if ("caiyun" === e) {
                        let e = await zr(s);
                        t = await Nr(e)
                    } else "google" === e && (t = await Hr(s));
                    u = await (async e => {
                        const t = await ir();
                        return A(e, t)
                    })(t)
                }
                Gr.set(c, u)
            }
            if (!l && (!t || r)) {
                let e = [];
                s.forEach((t, r) => {
                    e.push(k(t), u[r])
                });
                let n = x;
                t && !r || (n = T), n(e.join("\n"))
            }
            u.forEach((t, n) => {
                let i = t;
                const {
                    key: a,
                    index: s
                } = o[n];
                "select" === a && (i = ((e, t) => {
                    if (e.length > t && !e.includes("\n")) {
                        const t = Math.floor(e.length / 2) + 1;
                        return e.slice(0, t) + "\n" + e.slice(t, e.length)
                    }
                    return e
                })(i, 8)), i = i.replace(/"([^"]*)"/g, "“$1”").replace(/'([^']*)'/g, "“$1”").replace(/‘([^']+)'/g, "“$1”"), 0 !== n || r || (i += " ☁️"), e[s][a] = v(i)
            });
            const d = await _e();
            e.forEach(e => {
                R(e, d)
            }), (e => {
                e.forEach(e => {
                    e.text && !e.text.startsWith("​") && (e.text = "‌" + e.text)
                })
            })(e)
        }, Wr = async (e, t = "comment") => {
            const r = e.map(e => e[t]).join("").trim();
            await $r(e, r, !0)
        }, Kr = async (e, t = "comment") => {
            const r = e.map(e => e[t]).join("").trim();
            e.map(e => e[t]);
            await $r(e, r, !0, !0)
        }, Xr = ["actionComment", "actionComment2", "reactionComment", "resultLoseComment", "resultStartComment", "resultWinComment"], Vr = async e => {
            try {
                if (e.produceAudition) {
                    let t = e.produceAudition.judges.map(e => Xr.map(t => e[t] || "").join("")).join("").trim();
                    await $r(e.produceAudition.judges, t, !0)
                }
                if (e.produceConcert) {
                    let t = e.produceConcert.judges.map(e => Xr.map(t => e[t] || "").join("")).join("").trim();
                    await $r(e.produceConcert.judges, t, !0)
                }
            } catch (e) {
                x()
            }
        }, Jr = async e => {
            if (e.judges) {
                let t = e.judges.map(e => Xr.map(t => e[t] || "").join("")).join("").trim();
                await $r(e.judges, t, !0)
            }
        }, qr = async e => {
            if (e.topCharacterReaction) try {
                const t = [...e.topCharacterReaction.moveReactions, ...e.topCharacterReaction.skillReleasedReactions, ...e.topCharacterReaction.touchExReactions, ...e.topCharacterReaction.touchReactions, ...e.topCharacterReaction.waitReactions];
                await Wr(t)
            } catch (e) {
                x()
            }
        }, Qr = async e => {
            let t = [...e.produceStaffComments || [], ...e.produceStaffConcertComments || [], ...e.produceStaffFailComments || [], ...e.produceStaffSeasonComments || []];
            await Wr(t)
        }, Yr = async e => {
            if (e.gameData) try {
                let t = JSON.parse(e.gameData);
                t.judges ? await Jr(t) : await Vr(t), e.gameData = JSON.stringify(t)
            } catch (e) {
                x()
            }
        }, Zr = async e => {
            if (!e.characterComment) return;
            let t = [];
            t = t.concat(e.characterComment), await Wr(t)
        };
    var en = function() {
        this.__data__ = [], this.size = 0
    };
    var tn = function(e, t) {
        return e === t || e != e && t != t
    };
    var rn = function(e, t) {
            for (var r = e.length; r--;)
                if (tn(e[r][0], t)) return r;
            return -1
        },
        nn = Array.prototype.splice;
    var an = function(e) {
        var t = this.__data__,
            r = rn(t, e);
        return !(r < 0) && (r == t.length - 1 ? t.pop() : nn.call(t, r, 1), --this.size, !0)
    };
    var on = function(e) {
        var t = this.__data__,
            r = rn(t, e);
        return r < 0 ? void 0 : t[r][1]
    };
    var sn = function(e) {
        return rn(this.__data__, e) > -1
    };
    var cn = function(e, t) {
        var r = this.__data__,
            n = rn(r, e);
        return n < 0 ? (++this.size, r.push([e, t])) : r[n][1] = t, this
    };

    function ln(e) {
        var t = -1,
            r = null == e ? 0 : e.length;
        for (this.clear(); ++t < r;) {
            var n = e[t];
            this.set(n[0], n[1])
        }
    }
    ln.prototype.clear = en, ln.prototype.delete = an, ln.prototype.get = on, ln.prototype.has = sn, ln.prototype.set = cn;
    var un = ln;
    var dn = function() {
        this.__data__ = new un, this.size = 0
    };
    var hn = function(e) {
        var t = this.__data__,
            r = t.delete(e);
        return this.size = t.size, r
    };
    var pn = function(e) {
        return this.__data__.get(e)
    };
    var fn = function(e) {
        return this.__data__.has(e)
    };
    var mn = function(e) {
        var t = typeof e;
        return null != e && ("object" == t || "function" == t)
    };
    var gn = function(e) {
            if (!mn(e)) return !1;
            var t = f(e);
            return "[object Function]" == t || "[object GeneratorFunction]" == t || "[object AsyncFunction]" == t || "[object Proxy]" == t
        },
        yn = i["__core-js_shared__"],
        vn = function() {
            var e = /[^.]+$/.exec(yn && yn.keys && yn.keys.IE_PROTO || "");
            return e ? "Symbol(src)_1." + e : ""
        }();
    var wn = function(e) {
            return !!vn && vn in e
        },
        _n = Function.prototype.toString;
    var Sn = function(e) {
            if (null != e) {
                try {
                    return _n.call(e)
                } catch (e) {}
                try {
                    return e + ""
                } catch (e) {}
            }
            return ""
        },
        En = /^\[object .+?Constructor\]$/,
        bn = Function.prototype,
        xn = Object.prototype,
        Tn = bn.toString,
        Cn = xn.hasOwnProperty,
        kn = RegExp("^" + Tn.call(Cn).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
    var An = function(e) {
        return !(!mn(e) || wn(e)) && (gn(e) ? kn : En).test(Sn(e))
    };
    var Mn = function(e, t) {
        return null == e ? void 0 : e[t]
    };
    var Rn = function(e, t) {
            var r = Mn(e, t);
            return An(r) ? r : void 0
        },
        In = Rn(i, "Map"),
        Pn = Rn(Object, "create");
    var On = function() {
        this.__data__ = Pn ? Pn(null) : {}, this.size = 0
    };
    var Dn = function(e) {
            var t = this.has(e) && delete this.__data__[e];
            return this.size -= t ? 1 : 0, t
        },
        Fn = Object.prototype.hasOwnProperty;
    var Bn = function(e) {
            var t = this.__data__;
            if (Pn) {
                var r = t[e];
                return "__lodash_hash_undefined__" === r ? void 0 : r
            }
            return Fn.call(t, e) ? t[e] : void 0
        },
        jn = Object.prototype.hasOwnProperty;
    var Ln = function(e) {
        var t = this.__data__;
        return Pn ? void 0 !== t[e] : jn.call(t, e)
    };
    var Nn = function(e, t) {
        var r = this.__data__;
        return this.size += this.has(e) ? 0 : 1, r[e] = Pn && void 0 === t ? "__lodash_hash_undefined__" : t, this
    };

    function Hn(e) {
        var t = -1,
            r = null == e ? 0 : e.length;
        for (this.clear(); ++t < r;) {
            var n = e[t];
            this.set(n[0], n[1])
        }
    }
    Hn.prototype.clear = On, Hn.prototype.delete = Dn, Hn.prototype.get = Bn, Hn.prototype.has = Ln, Hn.prototype.set = Nn;
    var Un = Hn;
    var zn = function() {
        this.size = 0, this.__data__ = {
            hash: new Un,
            map: new(In || un),
            string: new Un
        }
    };
    var Gn = function(e) {
        var t = typeof e;
        return "string" == t || "number" == t || "symbol" == t || "boolean" == t ? "__proto__" !== e : null === e
    };
    var $n = function(e, t) {
        var r = e.__data__;
        return Gn(t) ? r["string" == typeof t ? "string" : "hash"] : r.map
    };
    var Wn = function(e) {
        var t = $n(this, e).delete(e);
        return this.size -= t ? 1 : 0, t
    };
    var Kn = function(e) {
        return $n(this, e).get(e)
    };
    var Xn = function(e) {
        return $n(this, e).has(e)
    };
    var Vn = function(e, t) {
        var r = $n(this, e),
            n = r.size;
        return r.set(e, t), this.size += r.size == n ? 0 : 1, this
    };

    function Jn(e) {
        var t = -1,
            r = null == e ? 0 : e.length;
        for (this.clear(); ++t < r;) {
            var n = e[t];
            this.set(n[0], n[1])
        }
    }
    Jn.prototype.clear = zn, Jn.prototype.delete = Wn, Jn.prototype.get = Kn, Jn.prototype.has = Xn, Jn.prototype.set = Vn;
    var qn = Jn;
    var Qn = function(e, t) {
        var r = this.__data__;
        if (r instanceof un) {
            var n = r.__data__;
            if (!In || n.length < 199) return n.push([e, t]), this.size = ++r.size, this;
            r = this.__data__ = new qn(n)
        }
        return r.set(e, t), this.size = r.size, this
    };

    function Yn(e) {
        var t = this.__data__ = new un(e);
        this.size = t.size
    }
    Yn.prototype.clear = dn, Yn.prototype.delete = hn, Yn.prototype.get = pn, Yn.prototype.has = fn, Yn.prototype.set = Qn;
    ! function() {
        try {
            var e = Rn(Object, "defineProperty");
            e({}, "", {})
        } catch (e) {}
    }();
    Object.prototype.hasOwnProperty;
    var Zn = function(e) {
            return g(e) && "[object Arguments]" == f(e)
        },
        ei = Object.prototype,
        ti = ei.hasOwnProperty,
        ri = ei.propertyIsEnumerable;
    Zn(function() {
        return arguments
    }());
    var ni = function() {
        return !1
    };
    t((function(e, t) {
        var r = t && !t.nodeType && t,
            n = r && e && !e.nodeType && e,
            a = n && n.exports === r ? i.Buffer : void 0,
            o = (a ? a.isBuffer : void 0) || ni;
        e.exports = o
    }));
    var ii = function(e) {
            return "number" == typeof e && e > -1 && e % 1 == 0 && e <= 9007199254740991
        },
        ai = {};
    ai["[object Float32Array]"] = ai["[object Float64Array]"] = ai["[object Int8Array]"] = ai["[object Int16Array]"] = ai["[object Int32Array]"] = ai["[object Uint8Array]"] = ai["[object Uint8ClampedArray]"] = ai["[object Uint16Array]"] = ai["[object Uint32Array]"] = !0, ai["[object Arguments]"] = ai["[object Array]"] = ai["[object ArrayBuffer]"] = ai["[object Boolean]"] = ai["[object DataView]"] = ai["[object Date]"] = ai["[object Error]"] = ai["[object Function]"] = ai["[object Map]"] = ai["[object Number]"] = ai["[object Object]"] = ai["[object RegExp]"] = ai["[object Set]"] = ai["[object String]"] = ai["[object WeakMap]"] = !1;
    var oi = function(e) {
        return g(e) && ii(e.length) && !!ai[f(e)]
    };
    var si = function(e) {
            return function(t) {
                return e(t)
            }
        },
        ci = t((function(e, t) {
            var n = t && !t.nodeType && t,
                i = n && e && !e.nodeType && e,
                a = i && i.exports === n && r.process,
                o = function() {
                    try {
                        var e = i && i.require && i.require("util").types;
                        return e || a && a.binding && a.binding("util")
                    } catch (e) {}
                }();
            e.exports = o
        })),
        li = ci && ci.isTypedArray;
    li && si(li), Object.prototype.hasOwnProperty;
    Object.prototype;
    O(Object.keys, Object), Object.prototype.hasOwnProperty;
    Object.prototype.hasOwnProperty;
    t((function(e, t) {
        var r = t && !t.nodeType && t,
            n = r && e && !e.nodeType && e,
            a = n && n.exports === r ? i.Buffer : void 0,
            o = a ? a.allocUnsafe : void 0;
        e.exports = function(e, t) {
            if (t) return e.slice();
            var r = e.length,
                n = o ? o(r) : new e.constructor(r);
            return e.copy(n), n
        }
    }));
    var ui = function(e, t) {
        for (var r = -1, n = null == e ? 0 : e.length, i = 0, a = []; ++r < n;) {
            var o = e[r];
            t(o, r, e) && (a[i++] = o)
        }
        return a
    };
    var di = function() {
            return []
        },
        hi = Object.prototype.propertyIsEnumerable,
        pi = Object.getOwnPropertySymbols,
        fi = pi ? function(e) {
            return null == e ? [] : (e = Object(e), ui(pi(e), (function(t) {
                return hi.call(e, t)
            })))
        } : di;
    var mi = function(e, t) {
        for (var r = -1, n = t.length, i = e.length; ++r < n;) e[i + r] = t[r];
        return e
    };
    Object.getOwnPropertySymbols;
    var gi = Rn(i, "DataView"),
        yi = Rn(i, "Promise"),
        vi = Rn(i, "Set"),
        wi = Rn(i, "WeakMap"),
        _i = Sn(gi),
        Si = Sn(In),
        Ei = Sn(yi),
        bi = Sn(vi),
        xi = Sn(wi),
        Ti = f;
    (gi && "[object DataView]" != Ti(new gi(new ArrayBuffer(1))) || In && "[object Map]" != Ti(new In) || yi && "[object Promise]" != Ti(yi.resolve()) || vi && "[object Set]" != Ti(new vi) || wi && "[object WeakMap]" != Ti(new wi)) && (Ti = function(e) {
        var t = f(e),
            r = "[object Object]" == t ? e.constructor : void 0,
            n = r ? Sn(r) : "";
        if (n) switch (n) {
            case _i:
                return "[object DataView]";
            case Si:
                return "[object Map]";
            case Ei:
                return "[object Promise]";
            case bi:
                return "[object Set]";
            case xi:
                return "[object WeakMap]"
        }
        return t
    });
    var Ci = Ti;
    Object.prototype.hasOwnProperty;
    i.Uint8Array;
    var ki = a ? a.prototype : void 0;
    ki && ki.valueOf;
    var Ai = Object.create;
    ! function() {
        function e() {}
    }();
    var Mi = function(e) {
            return g(e) && "[object Map]" == Ci(e)
        },
        Ri = ci && ci.isMap;
    Ri && si(Ri);
    var Ii = function(e) {
            return g(e) && "[object Set]" == Ci(e)
        },
        Pi = ci && ci.isSet,
        Oi = (Pi && si(Pi), {});
    Oi["[object Arguments]"] = Oi["[object Array]"] = Oi["[object ArrayBuffer]"] = Oi["[object DataView]"] = Oi["[object Boolean]"] = Oi["[object Date]"] = Oi["[object Float32Array]"] = Oi["[object Float64Array]"] = Oi["[object Int8Array]"] = Oi["[object Int16Array]"] = Oi["[object Int32Array]"] = Oi["[object Map]"] = Oi["[object Number]"] = Oi["[object Object]"] = Oi["[object RegExp]"] = Oi["[object Set]"] = Oi["[object String]"] = Oi["[object Symbol]"] = Oi["[object Uint8Array]"] = Oi["[object Uint8ClampedArray]"] = Oi["[object Uint16Array]"] = Oi["[object Uint32Array]"] = !0, Oi["[object Error]"] = Oi["[object Function]"] = Oi["[object WeakMap]"] = !1;
    var Di = function(e) {
            return g(e) && "[object RegExp]" == f(e)
        },
        Fi = ci && ci.isRegExp,
        Bi = Fi ? si(Fi) : Di;
    const ji = (e, t, r, n) => {
            0
        },
        Li = async (e, t, r) => {
            try {
                for (let [n, i] of r) {
                    Array.isArray(n) || (n = [n]);
                    let r = !1;
                    for (let e of n)(y(e) && e === t || Bi(e) && e.test(t)) && (r = !0);
                    if (r) {
                        Array.isArray(i) || (i = [i]);
                        for (let t of i) y(t) ? "storyTitle" === t && (De(e), Vt(e)) : await t(e)
                    }
                }
            } catch (e) {
                x()
            }
        }, Ni = [
            [
                [/^userSupportIdols\/\d+$/, /^userSupportIdols\/statusMax/, /^produceTeachingSupportIdols\/\d+$/],
                [nt, pt, "storyTitle"]
            ],
            [/^userProduce(Teaching)?SupportIdols\/\d+$/, [nt, async e => {
                const t = await et();
                st(e.skillPanels, t), e.userProduceSupportIdolProduceExSkills.forEach(e => {
                    ot(e.produceExSkill, t)
                });
                try {
                    e.userSupportIdol.supportIdol.supportIdolActiveSkill.activeSkills.forEach(e => {
                        rt(e, "comment", t), rt(e, "name", t)
                    })
                } catch (e) {}
            }]],
            [/^userReserveSupportIdols\/userSupportIdol\/\d+$/, [nt, async e => {
                const t = await et();
                st(e.supportIdol.skillPanels, t);
                try {
                    e.supportIdol.supportIdolActiveSkill.activeSkills.forEach(e => {
                        rt(e, "comment", t), rt(e, "name", t)
                    })
                } catch (e) {}
            }]],
            [/^userIdols\/\d+\/produceExSkillTop$/, gt],
            [/^userSupportIdols\/\d+\/produceExSkillTop$/, gt],
            [
                [/^userIdols\/\d+$/, /^userIdols\/statusMax$/, /^produceTeachingIdols\/\d+$/],
                [ht, "storyTitle"]
            ],
            [
                [/^userProduce(Teaching)?Idols\/\d+$/, "userProduceTeachingIdol"], async e => {
                    const t = await et();
                    e.activeSkills.forEach(e => {
                        at(e, t)
                    }), ct(e.userIdol.idol.memoryAppeals, t), e.userProduceIdolProduceExSkills.forEach(e => {
                        ot(e.produceExSkill, t)
                    })
                }
            ],
            [/^userReserveIdols\/userIdol\/\d+$/, async e => {
                const t = await et();
                st(e.idol.skillPanels, t), ct(e.idol.memoryAppeals, t)
            }],
            [/^userFesIdols\/\d+$/, ft],
            [
                ["userProduces/skillPanels", "userProduceTeachings/skillPanels"], yt
            ],
            ["userMissions", async e => {
                await Mt(), It(e.dailyUserMissions), It(e.weeklyUserMissions), e.eventUserMissions.forEach(e => {
                    e && e.userMissions && It(e.userMissions)
                }), It(e.normalUserMissions), It(e.specialUserMissions)
            }],
            [/^fesRaidEvents\/\d+\/rewards$/, async e => {
                await Mt(), Pt(e.fesRaidBestScoreRewards), Pt(e.fesRaidLapRewards), Pt(e.fesRaidPointRewards)
            }],
            [
                ["characterAlbums", "album/top"], "storyTitle"
            ],
            [
                ["userShops", "userIdolPieceShops"], async e => {
                    const t = await jt();
                    e && (Array.isArray(e.userShops) && e.userShops.forEach(e => {
                        Ht(e, t)
                    }), Array.isArray(e.userEventShops) && e.userEventShops.forEach(e => {
                        Ht(e.userShop, t)
                    }))
                }
            ],
            [
                ["userRecoveryItems", "userProduceItems", "userExchangeItems", "userLotteryTickets", "userEvolutionItems", "userGashaTickets", "userScoutTickets", "userEnhancementItems"], Ut
            ],
            [
                [/^userPresents\?limit=/, /^userPresentHistories\?limit=/], async e => {
                    const t = await jt();
                    Array.isArray(e) && e.forEach(e => {
                        Nt(e.content, "name", t)
                    })
                }
            ],
            [/gashaGroups\/\d+\/rates/, "cardName"],
            ["userProduces", [qr]],
            [/^fes(Match)?Concert\/actions\/resume$/, [Yr, _t]],
            [/earthUsers\/[^\/]+\/userFesIdols\/\d+$/, mt],
            ["userBeginnerMissions/top", [Dt, tr]],
            ["tutorialIdols", tr],
            ["userRaidDecks", async e => {
                const t = await et();
                e.userRaidDecks.forEach(e => {
                    e.userRaidDeckMembers.forEach(e => {
                        e.userFesIdol && e.userFesIdol.activeSkills.forEach(e => {
                            at(e, t)
                        })
                    })
                })
            }]
        ], Hi = [
            ["myPage", [async e => {
                await Mt(), It(e.reportUserMissions)
            }, async e => {
                try {
                    let t = [],
                        r = {};
                    e.userHomeDeck.userHomeDeckAnimationMember && (t = [...e.userHomeDeck.userHomeDeckAnimationMember.mypageComments]);
                    let n = e.userHomeDeck.userHomeAnimationDeck.userHomeAnimationDeckMembers;
                    if (n && n.forEach(e => {
                            e.mypageComments.forEach(e => {
                                t.push(e)
                            })
                        }), e.userHomeDeck.userHomeDeckMembers.length && e.userHomeDeck.userHomeDeckMembers.forEach(async e => {
                            e.mypageComments.forEach(async e => {
                                t.push(e), Object.keys(e).forEach(async t => {
                                    let n = e[t];
                                    if ("speakerName" === t) {
                                        Object.keys(r).some(r => r === e[t]) || (r[n] = []), r[n].push(e)
                                    }
                                })
                            })
                        }), "multiple" === U.myPage) Object.keys(r).forEach(e => {
                        const t = r[e].map(e => k(e.comment)).map(e => ({
                                jp: e,
                                en: ""
                            })),
                            n = $t.unparse(t);
                        C(n, r[e][0].speakerName + "-myPageComments")
                    }), U.myPage = "normal", V();
                    else if ("single" === U.myPage) {
                        const e = t.map(e => ({
                                name: e.speakerName,
                                comment: k(e.comment)
                            })).map(e => ({
                                name: e.name,
                                jp: e.comment,
                                en: ""
                            })),
                            r = $t.unparse(e);
                        C(r, "deckMember-myPageComments"), U.myPage = "normal", V()
                    }
                    await Kr(t)
                } catch (e) {
                    x()
                }
            }, async e => {
                await Mt();
                let t = e.beginnerMission;
                t && (t.clearedLectureMission && Ot([t.clearedLectureMission]), t.progressLectureMission && Ot([t.progressLectureMission]))
            }]],
            [/^(produceMarathons|fesMarathons|trainingEvents)\/\d+\/top$/, [async e => {
                await Mt(), Rt(e.userRecommendedMission.mission, "comment"), Rt(e.userRecommendedMission.mission, "title"), e.accumulatedPresent.userGameEventAccumulatedPresents.forEach(e => {
                    Rt(e.gameEventAccumulatedPresent, "comment"), Rt(e.gameEventAccumulatedPresent, "title")
                })
            }, async e => {
                const t = await jt();
                e.accumulatedPresent.userGameEventAccumulatedPresents.forEach(e => {
                    e.gameEventAccumulatedPresent.rewards.forEach(e => {
                        Nt(e.content, "name", t)
                    })
                })
            }]],
            [/userIdols\/\d+\/produceExSkills\/\d+\/actions\/set/, ht],
            ["userShops/actions/purchase", async e => {
                const t = await jt();
                e && e.shopMerchandise && (Nt(e.shopMerchandise, "title", t), Nt(e.shopMerchandise, "comment", t))
            }],
            [/produces\/\d+\/actions\/ready/, Ut],
            [/userPresents\/\d+\/actions\/receive/, async e => {
                const t = await jt();
                Nt(e.receivedPresent, "Name", t)
            }],
            [/userMissions\/\d+\/actions\/receive/, async e => {
                const t = await jt();
                Nt(e.userMission.mission.missionReward.content, "name", t)
            }],
            ["userLoginBonuses", async e => {
                const t = await jt();
                e.userLoginBonuses.forEach(e => {
                    e.loginBonus.sheets.forEach(e => {
                        e.rewards.forEach(e => {
                            Nt(e.content, "name", t)
                        })
                    })
                }), e.userTotalBonuses.forEach(e => {
                    e.rewards.forEach(e => {
                        Nt(e.content, "name", t)
                    })
                })
            }],
            ["fesTop", [async e => {
                const t = await jt();
                e.lastRankingResult && Array.isArray(e.lastRankingResult.fesMatchGradeRewards) && e.lastRankingResult.fesMatchGradeRewards.forEach(e => {
                    Nt(e.content, "name", t)
                })
            }, async e => {
                if (e.userFesDeck) try {
                    let t = [],
                        r = e.userFesDeck.userFesDeckMembers;
                    for (let e of r) e.fesTopCharacterReactions.forEach(e => {
                        t.push(e)
                    });
                    await Wr(t)
                } catch (e) {
                    x()
                }
            }]],
            [
                [/^userProduce(Teaching)?s\/skillPanels\/\d+$/, /^userProduces\/limitedSkills\/\d+$/], yt
            ],
            [/userSupportIdols\/\d+\/produceExSkills\/\d+\/actions\/set/, [pt, nt]],
            [/^produces\/actions\/(resume|next)$/, [async e => {
                if (!e.userProduceIdeaNotes) return;
                const t = await et();
                e.userProduceIdeaNotes.forEach(e => {
                    let r = e.produceIdeaNote.produceIdeaNoteCompleteBonus;
                    rt(r, "title", t), rt(r, "comment", t), e.produceIdeaNote.produceIdeaNoteExtraBonuses.forEach(e => {
                        rt(e, "comment", t), rt(e, "condition", t)
                    })
                })
            }, qr, Qr, Yr, Zr, Vr, async e => {
                try {
                    let t = e.produceReporterEvent;
                    t && t.produceReporterEventAnswers && await Wr(t.produceReporterEventAnswers, "comment2")
                } catch (e) {
                    x()
                }
            }, nt]],
            [
                ["produces/actions/resume", "produces/actions/finish", "produceTeachings/resume"],
                [async e => {
                    if (e.gameData) return;
                    const t = await et();
                    lt(e, t)
                }, _t]
            ],
            ["produces/actions/endWeek", Qr],
            ["produces/actions/act", [async e => {
                if (!e.lessonResult) return;
                let t = e.lessonResult;
                try {
                    let e = [];
                    t.produceActCutinComment && (e = e.concat(t.produceActCutinComment)), t.produceRestBoostIdolComment && (e = e.concat(t.produceRestBoostIdolComment)), t.produceRestBoostSupportIdolComment && (e = e.concat(t.produceRestBoostSupportIdolComment)), t.produceRestComments && (e = e.concat(t.produceRestComments)), await Wr(e)
                } catch (e) {
                    x()
                }
            }, async e => {
                const t = await et();
                try {
                    let r = e.lessonResult.userProduceIdeaNote.produceIdeaNote.produceIdeaNoteCompleteBonus;
                    at(r, t)
                } catch (e) {}
            }]],
            [/^fes(Match|Raid)?Concert\/actions\/start$/, [Jr, vt]],
            [/^fes(Match)?Concert\/actions\/resume$/, [Yr, _t]],
            ["fesRaidConcert/actions/resume", [async e => {
                if (e.gameState && e.gameState.game_data) try {
                    let t = JSON.parse(e.gameState.game_data);
                    t.judges && await Jr(t), e.gameState.game_data = JSON.stringify(t)
                } catch (e) {
                    x()
                }
            }, async e => {
                if (e.gameState && e.gameState.game_data) try {
                    let t = JSON.parse(e.gameState.game_data);
                    t.userRaidDeck && await vt(t), e.gameState.game_data = JSON.stringify(t)
                } catch (e) {
                    x()
                }
            }]],
            ["produces/actions/result", [async e => {
                try {
                    let t = e.characterTrustLevelUpComments;
                    await Wr(t)
                } catch (e) {
                    x()
                }
            }, async e => {
                const t = await et();
                e.produceExSkillRewards.forEach(e => {
                    ot(e.produceExSkill, t)
                })
            }]],
            [
                [/^produce(Teaching)?s\/(\d+\/audition|concert)\/actions\/start$/, /^produceTeachings\/(auditions|concerts)\/start$/],
                [wt]
            ],
            [/^produces\/(\d+\/audition|concert)\/actions\/(start|finish)$/, [Vr, Zr]],
            ["userProduceHelperSupportIdols", async e => {
                try {
                    let t = e.characterComment + e.producerComment;
                    await $r([e], t, !0)
                } catch (e) {
                    x()
                }
            }],
            [
                ["produceTeachings/resume", "produceTeachings/next"],
                [async e => {
                    await Mt(), e.teachingHints && e.teachingHints.forEach(e => {
                        e.userProduceTeachingHints.forEach(e => {
                            Rt(e.produceTeachingHint, "title")
                        })
                    })
                }, nt]
            ],
            [/^userSelectLoginBonuses\/\d+$/, async e => {
                const t = await jt();
                e.rewards.forEach(e => {
                    Nt(e.content, "name", t)
                })
            }],
            [/^characterAlbums\/characters\/\d+$/, [tr, "storyTitle", async e => {
                if (e.voices) {
                    const t = [];
                    e.voices.forEach(e => {
                        e.characterTrustLevelComment && t.push(e.characterTrustLevelComment)
                    }), await Kr(t)
                }
            }]],
            [/^userLectureMissions\/\d+\/actions\/receive$/, Dt]
        ], Ui = [
            [/^userSupportIdols\/\d+$/, nt],
            ["userFesDecks", async e => {
                const t = await et();
                e.userFesDecks.forEach(e => {
                    e.userFesDeckMembers.forEach(e => {
                        e.userFesIdol && e.userFesIdol.activeSkills.forEach(e => {
                            at(e, t)
                        })
                    })
                })
            }]
        ];
    async function zi() {
        const e = await (async () => await le("REQUEST", e => e.get && e.post && e.put && e.patch))();
        if (!e || !e.get) return;
        const t = e.get;
        e.get = async function(...e) {
            const r = e[0],
                n = await t.apply(this, e);
            if (!r) return n;
            let i = n.body;
            return ji(), await Li(i, r, Ni), n
        };
        const r = e.patch;
        e.patch = async function(...e) {
            const t = e[0],
                n = await r.apply(this, e);
            if (!t) return n;
            let i = n.body;
            return ji(), await Li(i, t, Ui), n
        };
        const n = e.post;
        e.post = async function(...e) {
            const t = e[0],
                r = await n.apply(this, e);
            if (!t) return r;
            let i = r.body;
            return ji(), await Li(i, t, Hi), r
        };
        const i = e.put;
        e.put = async function(...e) {
            const t = e[0],
                r = await i.apply(this, e);
            if (!t) return r;
            r.body;
            return ji(), r
        }
    }
    const Gi = new Map;
    let $i = !1;
    new Map;
    let Wi = null;
    const Ki = async () => (Wi || (Wi = (async () => {
        if (!$i) {
            let e = await ie("image");
            e || (e = await ee("/data/image.csv"), ae("image", e));
            re(e).forEach(e => {
                if (e && e.name) {
                    const t = w(e.name),
                        r = w(e.url),
                        n = w(e.version) || "1";
                    t && r && Gi.set(t, {
                        url: r,
                        version: n
                    })
                }
            }), $i = !0
        }
        return Gi
    })()), await Wi);
    let Xi = !1;
    async function Vi() {
        let e = await ue();
        if (!e || Xi) return;
        const t = e.loaders.Resource.prototype._loadElement,
            r = async function(e) {
                try {
                    const t = await Ki();
                    this.url;
                    if ("image" === e && t.has(this.name)) {
                        const e = t.get(this.name);
                        this.url.endsWith("v=" + e.version) && (this.url = `${U.origin}/data/image/${e.url}?V=${U.hash}`, this.crossOrigin = !0)
                    } else 0
                } catch (e) {}
                return t.call(this, e)
            }, n = new Proxy(e.loaders.Resource, {
                construct(e, t, n) {
                    var i = Reflect.construct(e, t, n);
                    return new Proxy(i, {
                        get: (e, t, n) => "_loadElement" == t ? r : Reflect.get(e, t, n)
                    })
                },
                get: (e, t, r) => Reflect.get(e, t, r)
            });
        Object.defineProperty(e.loaders, "Resource", {
            value: n
        }), Xi = !0
    }
    var Ji = function() {
        return i.Date.now()
    };
    var qi = function(e) {
            return "symbol" == typeof e || g(e) && "[object Symbol]" == f(e)
        },
        Qi = /^\s+|\s+$/g,
        Yi = /^[-+]0x[0-9a-f]+$/i,
        Zi = /^0b[01]+$/i,
        ea = /^0o[0-7]+$/i,
        ta = parseInt;
    var ra = function(e) {
            if ("number" == typeof e) return e;
            if (qi(e)) return NaN;
            if (mn(e)) {
                var t = "function" == typeof e.valueOf ? e.valueOf() : e;
                e = mn(t) ? t + "" : t
            }
            if ("string" != typeof e) return 0 === e ? e : +e;
            e = e.replace(Qi, "");
            var r = Zi.test(e);
            return r || ea.test(e) ? ta(e.slice(2), r ? 2 : 8) : Yi.test(e) ? NaN : +e
        },
        na = Math.max,
        ia = Math.min;
    var aa = function(e, t, r) {
        var n, i, a, o, s, c, l = 0,
            u = !1,
            d = !1,
            h = !0;
        if ("function" != typeof e) throw new TypeError("Expected a function");

        function p(t) {
            var r = n,
                a = i;
            return n = i = void 0, l = t, o = e.apply(a, r)
        }

        function f(e) {
            return l = e, s = setTimeout(g, t), u ? p(e) : o
        }

        function m(e) {
            var r = e - c;
            return void 0 === c || r >= t || r < 0 || d && e - l >= a
        }

        function g() {
            var e = Ji();
            if (m(e)) return y(e);
            s = setTimeout(g, function(e) {
                var r = t - (e - c);
                return d ? ia(r, a - (e - l)) : r
            }(e))
        }

        function y(e) {
            return s = void 0, h && n ? p(e) : (n = i = void 0, o)
        }

        function v() {
            var e = Ji(),
                r = m(e);
            if (n = arguments, i = this, c = e, r) {
                if (void 0 === s) return f(c);
                if (d) return clearTimeout(s), s = setTimeout(g, t), p(c)
            }
            return void 0 === s && (s = setTimeout(g, t)), o
        }
        return t = ra(t) || 0, mn(r) && (u = !!r.leading, a = (d = "maxWait" in r) ? na(ra(r.maxWait) || 0, t) : a, h = "trailing" in r ? !!r.trailing : h), v.cancel = function() {
            void 0 !== s && clearTimeout(s), l = 0, n = c = i = s = void 0
        }, v.flush = function() {
            return void 0 === s ? o : y(Ji())
        }, v
    };
    const oa = `\n  <style>\n  #sczh-story-tool {\n    position: absolute;\n    display: none;\n    background: #ffffff;\n    border-radius: 24px;\n    box-sizing: border-box;\n    font-family: sczh-yuanti;\n    align-items: center;\n    justify-content: center;\n    color: #ff6499;\n    text-shadow: 0 0 6px #fff;\n    cursor: pointer;\n    user-select: none;\n    width: 100px;\n    height: 100px;\n    font-size: 32px;\n    border: 7px solid transparent;\n    border-image: url(${U.origin}/data/image/border.png);\n    border-image-slice: 7;\n    transform-origin: top right;\n  }\n  .story-tool-btns {\n    width: 100%;\n    height: 100%;\n    display: none;\n  }\n  .story-tool-btns .btn-download-sczh,\n  .story-tool-btns label {\n    flex: 1;\n    height: 100%;\n    background: #fff;\n    display: flex;\n    box-sizing: content-box;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    color: #c0aade;\n    text-shadow: 0 0 6px #fff;\n  }\n  .story-tool-btns .btn-download-sczh:hover {\n    color: #9f66ec;\n  }\n  .story-tool-btns label {\n    color: rgb(242, 156, 199);\n    border-right: 1px solid #c9c9c9;\n  }\n  #sczh-story-tool .btn-close-sczh {\n    height: 25px;\n    width: 50px;\n    background: rgba(0, 0, 0, 0.58);\n    color: #fff;\n    letter-spacing: 2px;\n    position: absolute;\n    right: -25px;\n    top: -20px;\n    border-radius: 4px;\n    display: none;\n    align-items: center;\n    justify-content: center;\n    z-index: 1;\n    font-family: sczh-heiti;\n    font-size: 15px;\n  }\n  #sczh-story-tool:hover {\n    width: 200px;\n  }\n  #sczh-story-tool:hover .story-tool-btns {\n    display: flex;\n  }\n  #sczh-story-tool:hover .btn-close-sczh {\n    display: flex;\n  }\n  #sczh-story-tool:hover > .text-sczh {\n    display: none;\n  }\n  #sczh-story-tool .btn-close-sczh:hover {\n    background: rgba(0, 0, 0, 0.9);\n  }\n  .story-tool-btns label:hover {\n    color: #f270b1;\n  }\n  .story-tool-btns .btn-download-sczh:hover,\n  .story-tool-btns label:hover {\n    background-color: #f7f7f7;\n  }\n  </style>\n  <div id="sczh-story-tool"><span class="text-sczh">Story</span>\n    <span id="btn-close-sczh" class="btn-close-sczh">X</span>\n    <input type="file" style="display:none" id="ipt-preview-sczh" multiple accept=".csv">\n    <div class="story-tool-btns">\n      <label for="ipt-preview-sczh">Import</label>\n      <div id="btn-download-sczh" class="btn-download-sczh">DL</div>\n    </div>\n  </div>\n  `;
    let sa = !1;
    const ca = e => {
            if (sa) return;
            sa = !0, document.body.insertAdjacentHTML("beforeend", oa);
            const t = document.getElementById("sczh-story-tool"),
                r = aa(() => {
                    const r = [.017, .22],
                        n = window.innerHeight,
                        i = window.innerWidth;
                    let a = n,
                        o = i,
                        s = 0,
                        c = 0;
                    n / i > 9 / 16 ? (a = 9 * i / 16, s = (n - a) / 2) : (o = 16 * n / 9, c = (i - o) / 2), t.style.right = Math.floor(c + r[0] * o) + "px", t.style.top = Math.floor(s + r[1] * a) + "px", t.style.transform = `scale(${(a/900).toFixed(3)})`, e.name ? t.style.display = "flex" : t.style.display = "none"
                }, 300);
            r(), window.addEventListener("resize", r);
            document.getElementById("btn-download-sczh").addEventListener("click", (function() {
                if (e.name) {
                    const t = $t.unparse(e.list);
                    C(t, e.filename)
                }
            }));
            document.getElementById("btn-close-sczh").addEventListener("click", (function() {
                t.style.display = "none", U.story = "normal", V()
            }));
            document.getElementById("ipt-preview-sczh").addEventListener("change", (function() {
                const t = this.files;
                t.length && t.forEach(t => {
                    const r = new FileReader;
                    r.onload = t => {
                        const r = t.target.result,
                            n = Fe(r);
                        if (n.has("name")) {
                            const t = n.get("name");
                            e.preview.set(t, n), (e => {
                                const t = [...e].slice(-5).map(e => (e[1] = [...e[1]], e));
                                sessionStorage.setItem("sczh:preview", JSON.stringify(t))
                            })(e.preview), alert("Succesfully imported " + t)
                        }
                    }, r.readAsText(t)
                })
            }))
        },
        la = {
            name: "",
            filename: "",
            list: "",
            preview: new Map
        };
    let ua = !1;
    const da = async () => {
        const e = await (async () => (await le("SCENARIO", e => e.default && e.default.load && e.default._errorEvent && e.default._handleError)).default)();
        if (!e) return;
        const t = e.load;
        e.load = async function(...e) {
            const r = await t.apply(this, e),
                n = e[0];
            if (!n) return r;
            if (n.includes("/produce_events/") || n.includes("/produce_communications/") || n.includes("/produce_communications_promises/") || n.includes("/produce_communication_promise_results/") || n.includes("/game_event_communications/") || n.includes("/special_communications/") || n.includes("/produce_communication_cheers/") || n.includes("/produce_communication_auditions/") || n.includes("/produce_communication_televisions/")) try {
                const e = n.replace(/^\/assets\/json\//, "");
                let t;
                if ("edit" === U.story && (((e, t) => {
                        const r = t.replace(".json", ""),
                            n = (e => {
                                const t = e.match(/\/(\d+)$/);
                                return t && t[1] ? t[1] : ""
                            })(r),
                            i = Re.get(n) || r.replace(/\//g, "_"),
                            a = [];
                        e.forEach(e => {
                            let t = w(k(e.text));
                            t && t.trim() ? a.push({
                                id: e.id || "0000000000000",
                                name: e.speaker || "",
                                text: t,
                                trans: ""
                            }) : e.select && a.push({
                                id: "select",
                                name: "",
                                text: w(k(e.select)),
                                trans: ""
                            })
                        }), a.push({
                            id: "info",
                            name: t,
                            text: "",
                            trans: ""
                        }), a.push({
                            id: "Translator",
                            name: "",
                            text: "",
                            trans: ""
                        }), la.name = t, la.filename = i + ".csv", la.list = a
                    })(r, e), ca(la)), (() => {
                        if (ua) return;
                        ua = !0;
                        const e = sessionStorage.getItem("sczh:preview");
                        if (e) try {
                            const t = JSON.parse(e),
                                r = new Map(t);
                            for (let [e, t] of r) r.set(e, new Map(t));
                            la.preview = r
                        } catch (e) {
                            x()
                        }
                    })(), t = la.preview.has(e) ? la.preview.get(e) : await (async e => {
                        if (!Oe) {
                            let e = await ie("story-index");
                            if (e) Oe = new Map(JSON.parse(e));
                            else {
                                const t = await ee("/story.json");
                                Oe = new Map(t), ae("story-index", JSON.stringify(e))
                            }
                        }
                        if (Oe.has(e)) {
                            if (Me.has(e)) return Me.get(e); {
                                const t = Oe.get(e),
                                    r = await ee(t),
                                    n = Fe(r);
                                return Me.set(e, n), n
                            }
                        }
                        return !1
                    })(e), t) {
                    const e = await Be();
                    ((e, t, r, n) => {
                        Array.isArray(e) && e.forEach(e => {
                            if (R(e, n), e.text) {
                                const n = Ae(S(e.text));
                                if (e.id) {
                                    const r = e.id + n;
                                    t.has(r) && (e.text = t.get(r))
                                } else t.has(n) ? e.text = t.get(n) : r.has(e.text) && (e.text = v(r.get(e.text)))
                            }
                            if (e.select) {
                                const n = S(e.select),
                                    i = Ae(n) + "-select";
                                t.has(i) ? e.select = t.get(i) : r.has(n) && (e.select = v(r.get(e.select)))
                            }
                        })
                    })(r, t, e, await _e())
                } else "on" === U.auto ? await $r(r, e) : await $r(r, e, !1, !0)
            } catch (e) {
                x()
            }
            return r
        }
    }, ha = e => {
        const t = document.createElement("link");
        t.setAttribute("rel", "preload"), t.setAttribute("href", e), t.setAttribute("as", "font"), t.setAttribute("type", "font/woff2"), t.setAttribute("crossorigin", "anonymous"), document.head.appendChild(t)
    }, pa = async () => {
        const e = document.createElement("style"),
            {
                hash: t
            } = await Z;
        e.innerHTML = `\n  @font-face {\n    font-family: "sczh-heiti";\n    src: url("${U.origin}/data/font/heiti.woff2?v=${t}");\n  }\n  @font-face {\n    font-family: "sczh-yuanti";\n    src: url("${U.origin}/data/font/yuanti.woff2?v=${t}");\n  }\n  @font-face {\n    font-family: "sczh-yuanti2";\n    src: url("${U.origin}/data/font/yuanti2.woff2?v=${t}");\n  }\n  ::-webkit-scrollbar {\n    display: none;\n  }\n  `, "yuanti" === U.font1 ? ha(`${U.origin}/data/font/yuanti.woff2?v=${t}`) : "yuanti2" === U.font1 && ha(`${U.origin}/data/font/yuanti2.woff2?v=${t}`), "heiti" === U.font2 && ha(`${U.origin}/data/font/heiti.woff2?v=${t}`), document.head.appendChild(e)
    };
    if (!("onbeforescriptexecute" in document)) {
        new MutationObserver(e => {
            for (let t of e)
                for (let e of t.addedNodes)
                    if ("SCRIPT" === e.tagName) {
                        let t = new CustomEvent("beforescriptexecute", {
                            detail: e,
                            cancelable: !0
                        });
                        document.dispatchEvent(t) || e.remove()
                    }
        }).observe(document, {
            childList: !0,
            subtree: !0
        })
    }
    const fa = e => {
        e = (e => {
            let t = [/var n=window.[a-z0-9]*;/g, "Object.freeze({addHeader:"],
                r = ["$&window._require=t;", "({addHeader:"];
            for (let i = 0; i < t.length; i++)
                if (e)
                    if (t[i] instanceof RegExp && t[i].test(e)) {
                        var n = e.match(t[i]);
                        console.log("RegExp match found: " + n), e = e.replace(t[i], r[i])
                    } else e.includes(t[i]) && (console.log("Match found: " + t[i]), e = e.replace(t[i], r[i]));
            return e
        })(e);
        var t = document.createElement("script");
        t.type = "text/javascript", t.textContent = e, document.getElementsByTagName("body")[0].appendChild(t)
    };
    document.addEventListener("beforescriptexecute", (function(e) {
        ((e, t) => {
            e.src.includes("shinycolors.enza.fun/app") && (t.preventDefault(), t.stopPropagation(), fetch(e.src).then(async e => {
                if (e.ok) {
                    var t = await e.text();
                    fa(t)
                }
            }))
        })(e.detail || e.target, e)
    }));
    window.addEventListener("blur", (function(e) {
        "on" === U.bgm && e.stopImmediatePropagation()
    }), !1), document.addEventListener("visibilitychange", (function(e) {
        "on" === U.bgm && e.stopImmediatePropagation()
    }));
    let ma = 0;
    const ga = async () => {
        var e;
        (window.unsafeWindow || window)._require || ma >= 300 ? (async () => {
            try {
                await Promise.all([Vi(), pa(), he(), Ke(), zi(), da()])
            } catch (e) {
                x()
            }
        })() : (await (e = 100, new Promise(t => {
            setTimeout(t, e)
        })), ma++, ma % 10 == 0 && x(), await ga())
    };
    window.unsafeWindow ? window.unsafeWindow.addEventListener("load", ga) : window.addEventListener("load", ga)
}();